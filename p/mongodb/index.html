<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="MongoDB ÁõÆÊ†á ‰∫ÜËß£‰ªÄ‰πàÊòØMongoDB ÊéåÊè°MongoDBÁöÑÂÆâË£Ö ÊéåÊè°MongoDBÁöÑÂ∏∏Áî®ÂëΩ‰ª§ ÊéåÊè°mongoÁöÑÁ¥¢Âºï ‰∫ÜËß£mongoÈõÜÁæ§ÂéüÁêÜÔºåËÉΩÂ§üÊê≠Âª∫ÈõÜÁæ§ ÊéåÊè°mongodb-driverÁöÑÂü∫Êú¨‰ΩøÁî® ÊéåÊè°SpringDataMongoDBÁöÑ‰ΩøÁî® ‰∫ÜËß£Â¶Ç‰ΩïÂú®ÂéüÊúâÁöÑspring-dataÊ°ÜÊû∂‰∏≠Â∞ÅË£ÖÊñ∞ÁöÑÂäüËÉΩ Á¨¨‰∏ÄÁ´†-MongoDB Áü•ËØÜÁÇπ-MongoDBÁÆÄ‰ªã 1.ÁõÆÊ†á ‰∫ÜËß£‰ªÄ‰πàÊòØMongoDB 2.Ë∑ØÂæÑ ‰∏∫‰ªÄ‰πàË¶Å‰ΩøÁî®MongoDB ‰ªÄ‰πàÊòØMongoDB MongoDBÁâπÁÇπ MongoDB‰ΩìÁ≥ªÁªìÊûÑ MongoDBÊï∞ÊçÆÁ±ªÂûã 3.ËÆ≤Ëß£ 3.1 ‰∏∫‰ªÄ‰πàË¶Å‰ΩøÁî®MongoDB ">
<title>MongoDb</title>

<link rel='canonical' href='https://mikeLing-qx.github.io/p/mongodb/'>

<link rel="stylesheet" href="/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css"><meta property='og:title' content="MongoDb">
<meta property='og:description' content="MongoDB ÁõÆÊ†á ‰∫ÜËß£‰ªÄ‰πàÊòØMongoDB ÊéåÊè°MongoDBÁöÑÂÆâË£Ö ÊéåÊè°MongoDBÁöÑÂ∏∏Áî®ÂëΩ‰ª§ ÊéåÊè°mongoÁöÑÁ¥¢Âºï ‰∫ÜËß£mongoÈõÜÁæ§ÂéüÁêÜÔºåËÉΩÂ§üÊê≠Âª∫ÈõÜÁæ§ ÊéåÊè°mongodb-driverÁöÑÂü∫Êú¨‰ΩøÁî® ÊéåÊè°SpringDataMongoDBÁöÑ‰ΩøÁî® ‰∫ÜËß£Â¶Ç‰ΩïÂú®ÂéüÊúâÁöÑspring-dataÊ°ÜÊû∂‰∏≠Â∞ÅË£ÖÊñ∞ÁöÑÂäüËÉΩ Á¨¨‰∏ÄÁ´†-MongoDB Áü•ËØÜÁÇπ-MongoDBÁÆÄ‰ªã 1.ÁõÆÊ†á ‰∫ÜËß£‰ªÄ‰πàÊòØMongoDB 2.Ë∑ØÂæÑ ‰∏∫‰ªÄ‰πàË¶Å‰ΩøÁî®MongoDB ‰ªÄ‰πàÊòØMongoDB MongoDBÁâπÁÇπ MongoDB‰ΩìÁ≥ªÁªìÊûÑ MongoDBÊï∞ÊçÆÁ±ªÂûã 3.ËÆ≤Ëß£ 3.1 ‰∏∫‰ªÄ‰πàË¶Å‰ΩøÁî®MongoDB ">
<meta property='og:url' content='https://mikeLing-qx.github.io/p/mongodb/'>
<meta property='og:site_name' content='lexqinMike'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='MongoDb' /><meta property='article:tag' content='NoSql' /><meta property='article:published_time' content='2025-01-03T14:32:15&#43;08:00'/><meta property='article:modified_time' content='2025-01-03T14:32:15&#43;08:00'/>
<meta name="twitter:title" content="MongoDb">
<meta name="twitter:description" content="MongoDB ÁõÆÊ†á ‰∫ÜËß£‰ªÄ‰πàÊòØMongoDB ÊéåÊè°MongoDBÁöÑÂÆâË£Ö ÊéåÊè°MongoDBÁöÑÂ∏∏Áî®ÂëΩ‰ª§ ÊéåÊè°mongoÁöÑÁ¥¢Âºï ‰∫ÜËß£mongoÈõÜÁæ§ÂéüÁêÜÔºåËÉΩÂ§üÊê≠Âª∫ÈõÜÁæ§ ÊéåÊè°mongodb-driverÁöÑÂü∫Êú¨‰ΩøÁî® ÊéåÊè°SpringDataMongoDBÁöÑ‰ΩøÁî® ‰∫ÜËß£Â¶Ç‰ΩïÂú®ÂéüÊúâÁöÑspring-dataÊ°ÜÊû∂‰∏≠Â∞ÅË£ÖÊñ∞ÁöÑÂäüËÉΩ Á¨¨‰∏ÄÁ´†-MongoDB Áü•ËØÜÁÇπ-MongoDBÁÆÄ‰ªã 1.ÁõÆÊ†á ‰∫ÜËß£‰ªÄ‰πàÊòØMongoDB 2.Ë∑ØÂæÑ ‰∏∫‰ªÄ‰πàË¶Å‰ΩøÁî®MongoDB ‰ªÄ‰πàÊòØMongoDB MongoDBÁâπÁÇπ MongoDB‰ΩìÁ≥ªÁªìÊûÑ MongoDBÊï∞ÊçÆÁ±ªÂûã 3.ËÆ≤Ëß£ 3.1 ‰∏∫‰ªÄ‰πàË¶Å‰ΩøÁî®MongoDB ">
        
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
		<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="ÂàáÊç¢ËèúÂçï">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avator_hu1060881492573662444.jpg" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üç•</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">lexqinMike</a></h1>
            <h2 class="site-description">welcome to my blog, ‰ª£Á†ÅÊó† bugÔºåÂíñÂï°Êó†ÈôêÁª≠„ÄÇ</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://github.com/CaiJimmy/hugo-theme-stack'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://twitter.com'
                        target="_blank"
                        title="Twitter"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>‰∏ªÈ°µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>ÂÖ≥‰∫é</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>ÊöóËâ≤Ê®°Âºè</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ÁõÆÂΩï</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ul>
    <li><a href="#mongodb">MongoDB</a></li>
    <li><a href="#ÁõÆÊ†á">ÁõÆÊ†á</a></li>
    <li><a href="#Á¨¨‰∏ÄÁ´†-mongodb">Á¨¨‰∏ÄÁ´†-MongoDB</a>
      <ul>
        <li><a href="#Áü•ËØÜÁÇπ-mongodbÁÆÄ‰ªã">Áü•ËØÜÁÇπ-MongoDBÁÆÄ‰ªã</a>
          <ul>
            <li><a href="#1ÁõÆÊ†á">1.ÁõÆÊ†á</a></li>
            <li><a href="#2Ë∑ØÂæÑ">2.Ë∑ØÂæÑ</a></li>
            <li><a href="#3ËÆ≤Ëß£">3.ËÆ≤Ëß£</a>
              <ul>
                <li><a href="#31-‰∏∫‰ªÄ‰πàË¶Å‰ΩøÁî®mongodb">3.1 ‰∏∫‰ªÄ‰πàË¶Å‰ΩøÁî®MongoDB</a></li>
                <li><a href="#32-‰ªÄ‰πàÊòØmongodb">3.2 ‰ªÄ‰πàÊòØMongoDB</a></li>
                <li><a href="#33-mongodbÁâπÁÇπ">3.3 MongoDBÁâπÁÇπ</a></li>
                <li><a href="#34-mongodb‰ΩìÁ≥ªÁªìÊûÑ">3.4 MongoDB‰ΩìÁ≥ªÁªìÊûÑ</a></li>
                <li><a href="#35-mongodbÊï∞ÊçÆÁ±ªÂûã">3.5 MongoDBÊï∞ÊçÆÁ±ªÂûã</a></li>
                <li><a href="#36-mongodbÂíåredisÊØîËæÉÈù¢ËØï">3.6 MongoDBÂíåRedisÊØîËæÉ„ÄêÈù¢ËØï„Äë</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#Áü•ËØÜÁÇπ-mongodbÂÆâË£Ö">Áü•ËØÜÁÇπ-MongoDBÂÆâË£Ö</a>
          <ul>
            <li><a href="#1ÁõÆÊ†á-1">1.ÁõÆÊ†á</a></li>
            <li><a href="#2Ë∑ØÂæÑ-1">2.Ë∑ØÂæÑ</a></li>
            <li><a href="#3ËÆ≤Ëß£-1">3.ËÆ≤Ëß£</a>
              <ul>
                <li><a href="#31-docker-ÁéØÂ¢É‰∏ãmongodbÂÆâË£Ö">3.1 Docker ÁéØÂ¢É‰∏ãMongoDBÂÆâË£Ö</a></li>
                <li><a href="#32ÂÆ¢Êà∑Á´ØÁöÑÂÆâË£ÖÂíå‰ΩøÁî®">3.2ÂÆ¢Êà∑Á´ØÁöÑÂÆâË£ÖÂíå‰ΩøÁî®</a></li>
              </ul>
            </li>
            <li><a href="#4Â∞èÁªì">4.Â∞èÁªì</a></li>
          </ul>
        </li>
        <li><a href="#Áü•ËØÜÁÇπ-Â∏∏Áî®ÂëΩ‰ª§">Áü•ËØÜÁÇπ-Â∏∏Áî®ÂëΩ‰ª§</a>
          <ul>
            <li><a href="#1ÁõÆÊ†á-2">1.ÁõÆÊ†á</a></li>
            <li><a href="#2Ë∑ØÂæÑ-2">2.Ë∑ØÂæÑ</a></li>
            <li><a href="#3ËÆ≤Ëß£-2">3.ËÆ≤Ëß£</a>
              <ul>
                <li><a href="#31-ÈÄâÊã©ÂíåÂàõÂª∫Êï∞ÊçÆÂ∫ì">3.1 ÈÄâÊã©ÂíåÂàõÂª∫Êï∞ÊçÆÂ∫ì</a></li>
                <li><a href="#32-ÊèíÂÖ•‰∏éÊü•ËØ¢ÊñáÊ°£">3.2 ÊèíÂÖ•‰∏éÊü•ËØ¢ÊñáÊ°£</a></li>
                <li><a href="#33-‰øÆÊîπ‰∏éÂà†Èô§ÊñáÊ°£">3.3 ‰øÆÊîπ‰∏éÂà†Èô§ÊñáÊ°£</a></li>
                <li><a href="#34-ÁªüËÆ°Êù°Êï∞">3.4 ÁªüËÆ°Êù°Êï∞</a></li>
                <li><a href="#35-Ê®°Á≥äÊü•ËØ¢">3.5 Ê®°Á≥äÊü•ËØ¢</a></li>
                <li><a href="#36-Â§ß‰∫é-Â∞è‰∫é-‰∏çÁ≠â‰∫é">3.6 Â§ß‰∫é Â∞è‰∫é ‰∏çÁ≠â‰∫é</a></li>
                <li><a href="#37-ÂåÖÂê´‰∏é‰∏çÂåÖÂê´">3.7 ÂåÖÂê´‰∏é‰∏çÂåÖÂê´</a></li>
                <li><a href="#38-Êù°‰ª∂ËøûÊé•">3.8 Êù°‰ª∂ËøûÊé•</a></li>
                <li><a href="#39-ÂàóÂÄºÂ¢ûÈïø">3.9 ÂàóÂÄºÂ¢ûÈïø</a></li>
              </ul>
            </li>
            <li><a href="#4Â∞èÁªì-1">4.Â∞èÁªì</a></li>
          </ul>
        </li>
        <li><a href="#Áü•ËØÜÁÇπ-Á¥¢ÂºïÁöÑ‰ΩøÁî®">Áü•ËØÜÁÇπ-Á¥¢ÂºïÁöÑ‰ΩøÁî®</a>
          <ul>
            <li><a href="#1ÁõÆÊ†á-3">1.ÁõÆÊ†á</a></li>
            <li><a href="#2Ë∑ØÂæÑ-3">2.Ë∑ØÂæÑ</a></li>
            <li><a href="#3ËÆ≤Ëß£-3">3.ËÆ≤Ëß£</a>
              <ul>
                <li><a href="#31-Á¥¢ÂºïÁÆÄ‰ªã">3.1 Á¥¢ÂºïÁÆÄ‰ªã</a></li>
                <li><a href="#32-Á¥¢ÂºïÂü∫Êú¨Êìç‰Ωú">3.2 Á¥¢ÂºïÂü∫Êú¨Êìç‰Ωú</a>
                  <ul>
                    <li><a href="#321-ÂàõÂª∫Á¥¢Âºï">3.2.1 ÂàõÂª∫Á¥¢Âºï</a></li>
                    <li><a href="#322-Êü•ÁúãÁ¥¢Âºï">3.2.2 Êü•ÁúãÁ¥¢Âºï</a></li>
                    <li><a href="#323-Âà†Èô§Á¥¢Âºï">3.2.3 Âà†Èô§Á¥¢Âºï</a></li>
                    <li><a href="#324-‰øÆÊîπÁ¥¢Âºï">3.2.4 ‰øÆÊîπÁ¥¢Âºï</a></li>
                  </ul>
                </li>
                <li><a href="#33-Á¥¢ÂºïÁ±ªÂûã">3.3 Á¥¢ÂºïÁ±ªÂûã</a>
                  <ul>
                    <li><a href="#ÊôÆÈÄöÁ¥¢Âºï-ËÅîÂêàÁ¥¢Âºï">ÊôÆÈÄöÁ¥¢Âºï, ËÅîÂêàÁ¥¢Âºï</a></li>
                    <li><a href="#Â§öÈîÆÁ¥¢ÂºïÊï∞ÁªÑÁ¥¢Âºï">Â§öÈîÆÁ¥¢ÂºïÔºàÊï∞ÁªÑÁ¥¢ÂºïÔºâ</a></li>
                    <li><a href="#ÊñáÊú¨Á¥¢Âºï">ÊñáÊú¨Á¥¢Âºï</a></li>
                    <li><a href="#ÂìàÂ∏åÁ¥¢Âºï">ÂìàÂ∏åÁ¥¢Âºï</a></li>
                  </ul>
                </li>
                <li><a href="#34-Á¥¢ÂºïÂ±ûÊÄß">3.4 Á¥¢ÂºïÂ±ûÊÄß</a>
                  <ul>
                    <li><a href="#ÂîØ‰∏ÄÁ¥¢Âºï">ÂîØ‰∏ÄÁ¥¢Âºï</a></li>
                    <li><a href="#ÈÉ®ÂàÜÁ¥¢Âºï">ÈÉ®ÂàÜÁ¥¢Âºï</a></li>
                    <li><a href="#Á®ÄÁñèÁ¥¢Âºï">Á®ÄÁñèÁ¥¢Âºï</a></li>
                    <li><a href="#ttlÊåáÊï∞">TTLÊåáÊï∞</a></li>
                  </ul>
                </li>
                <li><a href="#35-Á¥¢ÂºïÂàÜÊûê">3.5 Á¥¢ÂºïÂàÜÊûê</a></li>
              </ul>
            </li>
            <li><a href="#4ÊÄªÁªì">4.ÊÄªÁªì</a></li>
          </ul>
        </li>
        <li><a href="#Áü•ËØÜÁÇπ-mongoÈõÜÁæ§Êê≠Âª∫">Áü•ËØÜÁÇπ-mongoÈõÜÁæ§Êê≠Âª∫	</a>
          <ul>
            <li><a href="#1ÁõÆÊ†á-4">1.ÁõÆÊ†á</a></li>
            <li><a href="#2Ë∑ØÂæÑ-4">2.Ë∑ØÂæÑ</a></li>
            <li><a href="#3ËÆ≤Ëß£-4">3.ËÆ≤Ëß£</a>
              <ul>
                <li><a href="#31-ÈõÜÁæ§ÁÆÄ‰ªã">3.1 ÈõÜÁæ§ÁÆÄ‰ªã</a></li>
                <li><a href="#32-ÂâØÊú¨ÈõÜ">3.2 ÂâØÊú¨ÈõÜ</a>
                  <ul>
                    <li><a href="#321ÂâØÊú¨ÈõÜËßíËâ≤">3.2.1ÂâØÊú¨ÈõÜËßíËâ≤</a></li>
                    <li><a href="#322-‰∏§ÁßçÊû∂ÊûÑÊ®°Âºè">3.2.2 ‰∏§ÁßçÊû∂ÊûÑÊ®°Âºè</a></li>
                  </ul>
                </li>
                <li><a href="#33-ÂàÜÁâá">3.3 ÂàÜÁâá</a></li>
                <li><a href="#32-Êê≠Âª∫ÈõÜÁæ§">3.2 Êê≠Âª∫ÈõÜÁæ§</a>
                  <ul>
                    <li><a href="#321-ÂàõÂª∫ÈÖçÁΩÆÊúçÂä°Â§çÊú¨ÈõÜ">3.2.1 ÂàõÂª∫ÈÖçÁΩÆÊúçÂä°Â§çÊú¨ÈõÜ</a></li>
                    <li><a href="#322-ÂàõÂª∫ÂàÜÁâáÂ§çÊú¨ÈõÜ">3.2.2 ÂàõÂª∫ÂàÜÁâáÂ§çÊú¨ÈõÜ</a></li>
                    <li><a href="#323-ÂàùÂßãÂåñÈÖçÁΩÆÂâØÊú¨ÈõÜÂíåÂàÜÁâáÂâØÊú¨ÈõÜ"><strong>3.2.3 ÂàùÂßãÂåñÈÖçÁΩÆÂâØÊú¨ÈõÜ</strong>ÂíåÂàÜÁâáÂâØÊú¨ÈõÜ</a></li>
                    <li><a href="#324-ÂàõÂª∫ÈõÜÁæ§ÂÖ•Âè£Âπ∂ÂÖ≥ËÅîÈÖçÁΩÆÈõÜ">3.2.4 ÂàõÂª∫ÈõÜÁæ§ÂÖ•Âè£Âπ∂ÂÖ≥ËÅîÈÖçÁΩÆÈõÜ</a></li>
                    <li><a href="#325-Âú®ÈõÜÁæ§ÂÖ•Âè£Ë∑ØÁî±‰∏äÊåÇËΩΩÂàÜÁâáÈõÜ">3.2.5 Âú®ÈõÜÁæ§ÂÖ•Âè£(Ë∑ØÁî±)‰∏äÊåÇËΩΩÂàÜÁâáÈõÜ</a></li>
                    <li><a href="#326-ÊµãËØïÈõÜÁæ§">3.2.6 ÊµãËØïÈõÜÁæ§</a></li>
                  </ul>
                </li>
              </ul>
            </li>
            <li><a href="#4ÊÄªÁªì-1">4.ÊÄªÁªì</a></li>
          </ul>
        </li>
        <li><a href="#Áü•ËØÜÁÇπ-mongoËÅöÂêàÊü•ËØ¢">Áü•ËØÜÁÇπ-mongoËÅöÂêàÊü•ËØ¢</a>
          <ul>
            <li><a href="#1ÁõÆÊ†á-5">1.ÁõÆÊ†á</a></li>
            <li><a href="#2Ë∑ØÂæÑ-5">2.Ë∑ØÂæÑ</a></li>
            <li><a href="#3ËÆ≤Ëß£-5">3.ËÆ≤Ëß£</a>
              <ul>
                <li><a href="#31-ÁÆ°ÈÅìÊü•ËØ¢">3.1 ÁÆ°ÈÅìÊü•ËØ¢</a></li>
                <li><a href="#32-map-reduce">3.2 map-reduce</a></li>
              </ul>
            </li>
            <li><a href="#4ÊÄªÁªì-2">4.ÊÄªÁªì</a></li>
          </ul>
        </li>
        <li><a href="#Áü•ËØÜÁÇπ-mongodb-driver‰ΩøÁî®">Áü•ËØÜÁÇπ-mongodb-driver‰ΩøÁî®</a>
          <ul>
            <li><a href="#mongodb-driver">mongodb-driver</a>
              <ul>
                <li><a href="#32-Êü•ËØ¢ÊâÄÊúâ">3.2 Êü•ËØ¢ÊâÄÊúâ</a></li>
                <li><a href="#33Ê†πÊçÆ_idÊü•ËØ¢">3.3Ê†πÊçÆ_idÊü•ËØ¢</a></li>
                <li><a href="#34Êñ∞Â¢û">3.4Êñ∞Â¢û</a></li>
                <li><a href="#35‰øÆÊîπ">3.5‰øÆÊîπ</a></li>
                <li><a href="#36-Âà†Èô§">3.6 Âà†Èô§</a></li>
              </ul>
            </li>
            <li><a href="#4Â∞èÁªì-2">4.Â∞èÁªì</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#Á¨¨‰∫åÁ´†-springdatamongodb">Á¨¨‰∫åÁ´†-SpringDataMongoDB</a>
      <ul>
        <li><a href="#Áü•ËØÜÁÇπ-Âü∫Êú¨crudÂÆûÁé∞">Áü•ËØÜÁÇπ-Âü∫Êú¨crudÂÆûÁé∞</a>
          <ul>
            <li><a href="#1ÁõÆÊ†á-6">1.ÁõÆÊ†á</a></li>
            <li><a href="#2Ë∑ØÂæÑ-6">2.Ë∑ØÂæÑ</a></li>
            <li><a href="#3ËÆ≤Ëß£-6">3.ËÆ≤Ëß£</a>
              <ul>
                <li><a href="#31-ÂºÄÂèëÂáÜÂ§á">3.1 ÂºÄÂèëÂáÜÂ§á</a></li>
                <li><a href="#32Âü∫Êú¨crud">3.2Âü∫Êú¨CRUD</a>
                  <ul>
                    <li><a href="#321Êñ∞Â¢û">3.2.1Êñ∞Â¢û</a></li>
                    <li><a href="#322Âà†Èô§">3.2.2Âà†Èô§</a></li>
                    <li><a href="#323‰øÆÊîπ">3.2.3‰øÆÊîπ</a></li>
                    <li><a href="#324Êü•ËØ¢ÊâÄÊúâ">3.2.4Êü•ËØ¢ÊâÄÊúâ</a></li>
                    <li><a href="#325Ê†πÊçÆidÊü•ËØ¢">3.2.5Ê†πÊçÆidÊü•ËØ¢</a></li>
                    <li><a href="#326-Ëé∑ÂèñÂΩìÂâçÁÇπËµûÊï∞Â§ß‰∫é200Âπ∂ÁªüËÆ°Áî®Êà∑ÁöÑÊÄªÁÇπËµûÊï∞">3.2.6 Ëé∑ÂèñÂΩìÂâçÁÇπËµûÊï∞Â§ß‰∫é200Âπ∂ÁªüËÆ°Áî®Êà∑ÁöÑÊÄªÁÇπËµûÊï∞</a></li>
                    <li><a href="#327-ÊåâÁÖßÁÇπËµûÊï∞ÊéíÂ∫èÊü•ËØ¢Ââç3Êù°ËØÑËÆ∫">3.2.7 ÊåâÁÖßÁÇπËµûÊï∞ÊéíÂ∫èÔºåÊü•ËØ¢Ââç3Êù°ËØÑËÆ∫</a></li>
                  </ul>
                </li>
              </ul>
            </li>
            <li><a href="#4Â∞èÁªì-3">4.Â∞èÁªì</a></li>
          </ul>
        </li>
        <li><a href="#Áü•ËØÜÁÇπ-Ê°ÜÊû∂Â∞ÅË£Ö">Áü•ËØÜÁÇπ-Ê°ÜÊû∂Â∞ÅË£Ö</a>
          <ul>
            <li><a href="#1ÁõÆÊ†á-7">1.ÁõÆÊ†á</a></li>
            <li><a href="#2Ë∑ØÂæÑ-7">2.Ë∑ØÂæÑ</a></li>
            <li><a href="#3ËÆ≤Ëß£-7">3.ËÆ≤Ëß£</a>
              <ul>
                <li><a href="#31-Âú®ÂéüÊúâÁöÑspringdataÊ°ÜÊû∂‰∏äÂ∞ÅË£ÖËá™Â∑±ÁöÑÂäüËÉΩ">3.1 Âú®ÂéüÊúâÁöÑspringdataÊ°ÜÊû∂‰∏äÂ∞ÅË£ÖËá™Â∑±ÁöÑÂäüËÉΩ</a></li>
                <li><a href="#32-Â∞ÜÊàë‰ª¨Ëá™Â∑±ÂÆûÁé∞ÁöÑ‰øÆÊîπÂäüËÉΩÂ∞ÅË£ÖËøõÊ°ÜÊû∂">3.2 Â∞ÜÊàë‰ª¨Ëá™Â∑±ÂÆûÁé∞ÁöÑ‰øÆÊîπÂäüËÉΩÂ∞ÅË£ÖËøõÊ°ÜÊû∂</a></li>
                <li><a href="#33-Â∞ÅË£ÖÂàÜÈ°µÊü•ËØ¢ÂäüËÉΩ">3.3 Â∞ÅË£ÖÂàÜÈ°µÊü•ËØ¢ÂäüËÉΩ</a></li>
                <li><a href="#34-Â∞ÅË£ÖËÅöÂêàÊü•ËØ¢ÂäüËÉΩ">3.4 Â∞ÅË£ÖËÅöÂêàÊü•ËØ¢ÂäüËÉΩ</a>
                  <ul>
                    <li><a href="#341-ÁÆ°ÈÅìÊü•ËØ¢">3.4.1 ÁÆ°ÈÅìÊü•ËØ¢</a></li>
                  </ul>
                </li>
              </ul>
            </li>
            <li><a href="#4Â∞èÁªì-4">4.Â∞èÁªì</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#Á¨¨‰∏âÁ´†-ËÅöÂêàÊü•ËØ¢">Á¨¨‰∏âÁ´† ËÅöÂêàÊü•ËØ¢</a>
      <ul>
        <li><a href="#0-mysqlÁ±ªÊØî">0. mysqlÁ±ªÊØî</a></li>
        <li><a href="#1-ËÅöÂêàÁÆ°ÈÅìÊìç‰ΩúÁ¨¶">1. ËÅöÂêàÁÆ°ÈÅìÊìç‰ΩúÁ¨¶</a>
          <ul>
            <li><a href="#11-count">1.1 $count</a></li>
            <li><a href="#12--group">1.2  $group</a></li>
            <li><a href="#13-match">1.3 $match</a></li>
            <li><a href="#14-unwind">1.4 $unwind</a></li>
            <li><a href="#15-project">1.5 $project</a>
              <ul>
                <li><a href="#1-ËØ≠Ê≥ï">1. ËØ≠Ê≥ï</a></li>
                <li><a href="#2-‰æãÂ≠ê">2. ‰æãÂ≠ê</a></li>
              </ul>
            </li>
            <li><a href="#16-lookup">1.6 $lookup</a></li>
          </ul>
        </li>
        <li><a href="#2-findËØ¶Ëß£">2. findËØ¶Ëß£</a></li>
        <li><a href="#3-Ê∏∏Ê†á">3. Ê∏∏Ê†á</a></li>
        <li><a href="#4-Êï∞ÁªÑÊìç‰Ωú">4. Êï∞ÁªÑÊìç‰Ωú</a>
          <ul>
            <li><a href="#41-all">4.1 $all</a></li>
            <li><a href="#42-size">4.2 $size</a></li>
            <li><a href="#43-slice">4.3 $slice</a></li>
            <li><a href="#44-elemmatch">4.4 $elemMatch</a></li>
          </ul>
        </li>
        <li><a href="#50-mongodb-compass">5.0 mongodb compass</a></li>
        <li><a href="#60-ËÅöÂêàÊÄßËÉΩÂàÜÊûê">6.0 ËÅöÂêàÊÄßËÉΩÂàÜÊûê</a></li>
        <li><a href="#ÂÆûË∑µ">ÂÆûË∑µ</a></li>
      </ul>
    </li>
    <li><a href="#Á¨¨ÂõõÁ´†-ÊñáÊ°£ËÆæËÆ°">Á¨¨ÂõõÁ´† ÊñáÊ°£ËÆæËÆ°</a></li>
    <li><a href="#Ê∑±Êã∑Ë¥ù">Ê∑±Êã∑Ë¥ù</a></li>
  </ul>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/mongodb/" >
                MongoDb
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/mongodb/">MongoDb</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Jan 03, 2025</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    ÈòÖËØªÊó∂Èïø: 42 ÂàÜÈíü
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="mongodb">MongoDB
</h1><h1 id="ÁõÆÊ†á">ÁõÆÊ†á
</h1><ul>
<li><input disabled="" type="checkbox"> ‰∫ÜËß£‰ªÄ‰πàÊòØMongoDB</li>
<li><input disabled="" type="checkbox"> ÊéåÊè°MongoDBÁöÑÂÆâË£Ö</li>
<li><input disabled="" type="checkbox"> ÊéåÊè°MongoDBÁöÑÂ∏∏Áî®ÂëΩ‰ª§</li>
<li><input disabled="" type="checkbox"> ÊéåÊè°mongoÁöÑÁ¥¢Âºï</li>
<li><input disabled="" type="checkbox"> ‰∫ÜËß£mongoÈõÜÁæ§ÂéüÁêÜÔºåËÉΩÂ§üÊê≠Âª∫ÈõÜÁæ§</li>
<li><input disabled="" type="checkbox"> ÊéåÊè°mongodb-driverÁöÑÂü∫Êú¨‰ΩøÁî®</li>
<li><input disabled="" type="checkbox"> ÊéåÊè°SpringDataMongoDBÁöÑ‰ΩøÁî®</li>
<li><input disabled="" type="checkbox"> ‰∫ÜËß£Â¶Ç‰ΩïÂú®ÂéüÊúâÁöÑspring-dataÊ°ÜÊû∂‰∏≠Â∞ÅË£ÖÊñ∞ÁöÑÂäüËÉΩ</li>
</ul>
<h1 id="Á¨¨‰∏ÄÁ´†-mongodb">Á¨¨‰∏ÄÁ´†-MongoDB
</h1><h2 id="Áü•ËØÜÁÇπ-mongodbÁÆÄ‰ªã">Áü•ËØÜÁÇπ-MongoDBÁÆÄ‰ªã
</h2><h3 id="1ÁõÆÊ†á">1.ÁõÆÊ†á
</h3><ul>
<li><input disabled="" type="checkbox"> ‰∫ÜËß£‰ªÄ‰πàÊòØMongoDB</li>
</ul>
<h3 id="2Ë∑ØÂæÑ">2.Ë∑ØÂæÑ
</h3><ol>
<li>‰∏∫‰ªÄ‰πàË¶Å‰ΩøÁî®MongoDB</li>
<li>‰ªÄ‰πàÊòØMongoDB</li>
<li>MongoDBÁâπÁÇπ</li>
<li>MongoDB‰ΩìÁ≥ªÁªìÊûÑ</li>
<li>MongoDBÊï∞ÊçÆÁ±ªÂûã</li>
</ol>
<h3 id="3ËÆ≤Ëß£">3.ËÆ≤Ëß£
</h3><h4 id="31-‰∏∫‰ªÄ‰πàË¶Å‰ΩøÁî®mongodb">3.1 ‰∏∫‰ªÄ‰πàË¶Å‰ΩøÁî®MongoDB
</h4><p><img src="/p/mongodb/images/1564300991182-1592442209458.png"
	width="713"
	height="430"
	
	loading="lazy"
	
		alt="1564300991182"
	
	
		class="gallery-image" 
		data-flex-grow="165"
		data-flex-basis="397px"
	
></p>
<p>ÊñáÁ´†ËØÑËÆ∫ÂäüËÉΩÂ≠òÂú®‰ª•‰∏ãÁâπÁÇπÔºö</p>
<ol>
<li>Êï∞ÊçÆÈáèÂ§ß</li>
<li>ÂÜôÂÖ•Êìç‰ΩúÈ¢ëÁπÅ</li>
<li>‰ª∑ÂÄºËæÉ‰Ωé</li>
</ol>
<p>ÂØπ‰∫éËøôÊ†∑ÁöÑÊï∞ÊçÆÔºåÊàë‰ª¨Êõ¥ÈÄÇÂêà‰ΩøÁî®MongoDBÊù•ÂÆûÁé∞Êï∞ÊçÆÁöÑÂ≠òÂÇ®</p>
<h4 id="32-‰ªÄ‰πàÊòØmongodb">3.2 ‰ªÄ‰πàÊòØMongoDB
</h4><p>‚Äã	MongoDBÊòØ‰∏Ä‰∏™Âü∫‰∫éÂàÜÂ∏ÉÂºèÊñá‰ª∂Â≠òÂÇ®ÁöÑÊï∞ÊçÆÂ∫ì„ÄÇÁî±C++ËØ≠Ë®ÄÁºñÂÜô„ÄÇÊó®Âú®‰∏∫WEBÂ∫îÁî®Êèê‰æõ==ÂèØÊâ©Â±ïÁöÑÈ´òÊÄßËÉΩÊï∞ÊçÆÂ≠òÂÇ®Ëß£ÂÜ≥ÊñπÊ°à==„ÄÇ
‚Äã	MongoDBÊòØ‰∏Ä‰∏™‰ªã‰∫éÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ìÂíåÈùûÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ì‰πãÈó¥ÁöÑ‰∫ßÂìÅÔºåÊòØ<strong>ÈùûÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ì</strong>ÂΩì‰∏≠ÂäüËÉΩÊúÄ‰∏∞ÂØåÔºåÊúÄÂÉèÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ìÁöÑ„ÄÇÂÆÉÊîØÊåÅÁöÑÊï∞ÊçÆÁªìÊûÑÈùûÂ∏∏ÊùæÊï£ÔºåÊòØÁ±ª‰ººjsonÁöÑbson(Êï∞ÊçÆÁ±ªÂûã)Ê†ºÂºèÔºåÂõ†Ê≠§ÂèØ‰ª•Â≠òÂÇ®ÊØîËæÉÂ§çÊùÇÁöÑÊï∞ÊçÆÁ±ªÂûã„ÄÇ</p>
<h4 id="33-mongodbÁâπÁÇπ">3.3 MongoDBÁâπÁÇπ
</h4><p>‚Äã	MongoÊúÄÂ§ßÁöÑÁâπÁÇπÊòØÂÆÉÊîØÊåÅÁöÑ<strong>Êü•ËØ¢ËØ≠Ë®ÄÈùûÂ∏∏Âº∫Â§ß</strong>ÔºåÂÖ∂ËØ≠Ê≥ïÊúâÁÇπÁ±ª‰ºº‰∫é<strong>Èù¢ÂêëÂØπË±°ÁöÑÊü•ËØ¢ËØ≠Ë®Ä</strong>ÔºåÂá†‰πéÂèØ‰ª•ÂÆûÁé∞Á±ª‰ººÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ìÂçïË°®Êü•ËØ¢ÁöÑÁªùÂ§ßÈÉ®ÂàÜÂäüËÉΩÔºåËÄå‰∏îËøòÊîØÊåÅÂØπÊï∞ÊçÆÂª∫Á´ã<strong>Á¥¢Âºï</strong>„ÄÇ(Ê≠£ÂàôË°®ËææÂºèÊîØÊåÅÁ¥¢Âºï)</p>
<p>ÂÆÉÁöÑÁâπÁÇπÊòØÈ´òÊÄßËÉΩ„ÄÅÊòìÈÉ®ÁΩ≤„ÄÅÊòì‰ΩøÁî®ÔºåÂ≠òÂÇ®Êï∞ÊçÆÈùûÂ∏∏Êñπ‰æø„ÄÇ‰∏ªË¶ÅÂäüËÉΩÁâπÊÄßÊúâÔºö</p>
<ol>
<li>Èù¢ÂêëÈõÜÂêàÂ≠òÂÇ®ÔºåÊòìÂ≠òÂÇ®ÂØπË±°Á±ªÂûãÁöÑÊï∞ÊçÆ„ÄÇ(ÈõÜÂêàÁõ∏ÂΩì‰∫éË°®)</li>
<li>Ê®°ÂºèËá™Áî±„ÄÇ</li>
<li>ÊîØÊåÅÂä®ÊÄÅÊü•ËØ¢„ÄÇ</li>
<li>ÊîØÊåÅÂÆåÂÖ®Á¥¢ÂºïÔºåÂåÖÂê´ÂÜÖÈÉ®ÂØπË±°„ÄÇ</li>
<li>ÊîØÊåÅÊü•ËØ¢„ÄÇ</li>
<li>ÊîØÊåÅÂ§çÂà∂ÂíåÊïÖÈöúÊÅ¢Â§ç„ÄÇ(È´òÂèØÁî®)</li>
<li>‰ΩøÁî®È´òÊïàÁöÑ‰∫åËøõÂà∂Êï∞ÊçÆÂ≠òÂÇ®ÔºåÂåÖÊã¨Â§ßÂûãÂØπË±°ÔºàÂ¶ÇËßÜÈ¢ëÁ≠âÔºâ„ÄÇ</li>
<li>Ëá™Âä®Â§ÑÁêÜÁ¢éÁâáÔºå‰ª•ÊîØÊåÅ‰∫ëËÆ°ÁÆóÂ±ÇÊ¨°ÁöÑÊâ©Â±ïÊÄß„ÄÇÔºàmapreduceÔºâ</li>
<li>ÊîØÊåÅRUBYÔºåPYTHONÔºåJAVAÔºåC++ÔºåPHPÔºåC#Á≠âÂ§öÁßçËØ≠Ë®Ä„ÄÇ</li>
<li>Êñá‰ª∂Â≠òÂÇ®Ê†ºÂºè‰∏∫BSONÔºà‰∏ÄÁßçJSONÁöÑÊâ©Â±ïÔºâ„ÄÇ</li>
</ol>
<p>ÊîØÊåÅÂ∞Ümongodb bsonÊñá‰ª∂ËΩ¨Êç¢Êàêjson Êñá‰ª∂</p>
<p>ÂëΩ‰ª§</p>
<pre><code>bsondump collection.bson &gt; collection.json
</code></pre>
<h4 id="34-mongodb‰ΩìÁ≥ªÁªìÊûÑ">3.4 MongoDB‰ΩìÁ≥ªÁªìÊûÑ
</h4><p>‚Äã	MongoDB ÁöÑÈÄªËæëÁªìÊûÑÊòØ‰∏ÄÁßçÂ±ÇÊ¨°ÁªìÊûÑ„ÄÇ‰∏ªË¶ÅÁî±ÔºöÊñáÊ°£(document)„ÄÅÈõÜÂêà(collection)„ÄÅÊï∞ÊçÆÂ∫ì(database)Ëøô‰∏âÈÉ®ÂàÜÁªÑÊàêÁöÑ„ÄÇÈÄªËæëÁªìÊûÑÊòØÈù¢ÂêëÁî®Êà∑ÁöÑÔºåÁî®Êà∑‰ΩøÁî® MongoDB ÂºÄÂèëÂ∫îÁî®Á®ãÂ∫è‰ΩøÁî®ÁöÑÂ∞±ÊòØÈÄªËæëÁªìÊûÑ„ÄÇ</p>
<ol>
<li>MongoDB ÁöÑÊñáÊ°£ÔºàdocumentÔºâÔºåÁõ∏ÂΩì‰∫éÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑ‰∏ÄË°åËÆ∞ÂΩï„ÄÇ</li>
<li>Â§ö‰∏™ÊñáÊ°£ÁªÑÊàê‰∏Ä‰∏™ÈõÜÂêàÔºàcollectionÔºâÔºåÁõ∏ÂΩì‰∫éÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ìÁöÑË°®„ÄÇ</li>
<li>Â§ö‰∏™ÈõÜÂêàÔºàcollectionÔºâÔºåÈÄªËæë‰∏äÁªÑÁªáÂú®‰∏ÄËµ∑ÔºåÂ∞±ÊòØÊï∞ÊçÆÂ∫ìÔºàdatabaseÔºâ„ÄÇ</li>
<li>‰∏Ä‰∏™ MongoDB ÂÆû‰æãÊîØÊåÅÂ§ö‰∏™Êï∞ÊçÆÂ∫ìÔºàdatabaseÔºâ„ÄÇ</li>
</ol>
<p>ÊñáÊ°£(document)„ÄÅÈõÜÂêà(collection)„ÄÅÊï∞ÊçÆÂ∫ì(database)ÁöÑÂ±ÇÊ¨°ÁªìÊûÑÂ¶Ç‰∏ãÂõæ:</p>
<p><img src="/p/mongodb/images/1559303526465.png"
	width="332"
	height="340"
	
	loading="lazy"
	
		alt="1559303526465"
	
	
		class="gallery-image" 
		data-flex-grow="97"
		data-flex-basis="234px"
	
></p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>MongoDb</th>
          <th>ÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìMysql</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Êï∞ÊçÆÂ∫ì(databases)</td>
          <td>Êï∞ÊçÆÂ∫ì(databases)</td>
      </tr>
      <tr>
          <td>ÈõÜÂêà(collections)</td>
          <td>Ë°®(table)</td>
      </tr>
      <tr>
          <td>ÊñáÊ°£(document)</td>
          <td>Ë°å(row)</td>
      </tr>
  </tbody>
</table></div>
<h4 id="35-mongodbÊï∞ÊçÆÁ±ªÂûã">3.5 MongoDBÊï∞ÊçÆÁ±ªÂûã
</h4><div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>Êï∞ÊçÆÁ±ªÂûã</th>
          <th>ÊèèËø∞</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>String</td>
          <td>Â≠óÁ¨¶‰∏≤„ÄÇÂ≠òÂÇ®Êï∞ÊçÆÂ∏∏Áî®ÁöÑÊï∞ÊçÆÁ±ªÂûã„ÄÇÂú®  MongoDB ‰∏≠ÔºåUTF-8 ÁºñÁ†ÅÁöÑÂ≠óÁ¨¶‰∏≤ÊâçÊòØÂêàÊ≥ïÁöÑ„ÄÇ</td>
      </tr>
      <tr>
          <td>Integer</td>
          <td>Êï¥ÂûãÊï∞ÂÄº„ÄÇÁî®‰∫éÂ≠òÂÇ®Êï∞ÂÄº„ÄÇÊ†πÊçÆ‰Ω†ÊâÄÈááÁî®ÁöÑÊúçÂä°Âô®ÔºåÂèØÂàÜ‰∏∫  32 ‰ΩçÊàñ 64 ‰Ωç„ÄÇ</td>
      </tr>
      <tr>
          <td>Boolean</td>
          <td>Â∏ÉÂ∞îÂÄº„ÄÇÁî®‰∫éÂ≠òÂÇ®Â∏ÉÂ∞îÂÄºÔºàÁúü/ÂÅáÔºâ„ÄÇ</td>
      </tr>
      <tr>
          <td>Double</td>
          <td>ÂèåÁ≤æÂ∫¶ÊµÆÁÇπÂÄº„ÄÇÁî®‰∫éÂ≠òÂÇ®ÊµÆÁÇπÂÄº„ÄÇ</td>
      </tr>
      <tr>
          <td>Array</td>
          <td>Áî®‰∫éÂ∞ÜÊï∞ÁªÑÊàñÂàóË°®ÊàñÂ§ö‰∏™ÂÄºÂ≠òÂÇ®‰∏∫‰∏Ä‰∏™ÈîÆ„ÄÇ</td>
      </tr>
      <tr>
          <td>Timestamp</td>
          <td>Êó∂Èó¥Êà≥„ÄÇËÆ∞ÂΩïÊñáÊ°£‰øÆÊîπÊàñÊ∑ªÂä†ÁöÑÂÖ∑‰ΩìÊó∂Èó¥„ÄÇ</td>
      </tr>
      <tr>
          <td>Object</td>
          <td>Áî®‰∫éÂÜÖÂµåÊñáÊ°£„ÄÇ</td>
      </tr>
      <tr>
          <td>Null</td>
          <td>Áî®‰∫éÂàõÂª∫Á©∫ÂÄº„ÄÇ</td>
      </tr>
      <tr>
          <td>Date</td>
          <td>Êó•ÊúüÊó∂Èó¥„ÄÇÁî®  UNIX Êó∂Èó¥Ê†ºÂºèÊù•Â≠òÂÇ®ÂΩìÂâçÊó•ÊúüÊàñÊó∂Èó¥„ÄÇ‰Ω†ÂèØ‰ª•ÊåáÂÆöËá™Â∑±ÁöÑÊó•ÊúüÊó∂Èó¥ÔºöÂàõÂª∫ Date ÂØπË±°Ôºå‰º†ÂÖ•Âπ¥ÊúàÊó•‰ø°ÊÅØ„ÄÇ</td>
      </tr>
      <tr>
          <td>Object  ID</td>
          <td>ÂØπË±°  ID„ÄÇÁî®‰∫éÂàõÂª∫ÊñáÊ°£ÁöÑ ID„ÄÇ</td>
      </tr>
      <tr>
          <td>Binary  Data</td>
          <td>‰∫åËøõÂà∂Êï∞ÊçÆ„ÄÇÁî®‰∫éÂ≠òÂÇ®‰∫åËøõÂà∂Êï∞ÊçÆ„ÄÇ</td>
      </tr>
      <tr>
          <td>Code</td>
          <td>‰ª£Á†ÅÁ±ªÂûã„ÄÇÁî®‰∫éÂú®ÊñáÊ°£‰∏≠Â≠òÂÇ®  JavaScript ‰ª£Á†Å„ÄÇ</td>
      </tr>
      <tr>
          <td>Regular  expression</td>
          <td>Ê≠£ÂàôË°®ËææÂºèÁ±ªÂûã„ÄÇÁî®‰∫éÂ≠òÂÇ®Ê≠£ÂàôË°®ËææÂºè„ÄÇ</td>
      </tr>
  </tbody>
</table></div>
<p>ÁâπÊÆäËØ¥ÊòéÔºö</p>
<ol>
<li>
<p>ObjectId</p>
<p>ObjectId Á±ª‰ººÂîØ‰∏Ä‰∏ªÈîÆÔºåÂèØ‰ª•ÂæàÂø´ÁöÑÂéªÁîüÊàêÂíåÊéíÂ∫èÔºåÂåÖÂê´ 12 bytesÔºåÂê´‰πâÊòØÔºö</p>
<ul>
<li>Ââç 4 ‰∏™Â≠óËäÇË°®Á§∫ÂàõÂª∫ unix Êó∂Èó¥Êà≥ÔºåÊ†ºÊûóÂ∞ºÊ≤ªÊó∂Èó¥ UTC Êó∂Èó¥ÔºåÊØîÂåó‰∫¨Êó∂Èó¥Êôö‰∫Ü 8 ‰∏™Â∞èÊó∂</li>
<li>Êé•‰∏ãÊù•ÁöÑ 3 ‰∏™Â≠óËäÇÊòØÊú∫Âô®Ê†áËØÜÁ†Å</li>
<li>Á¥ßÊé•ÁöÑ‰∏§‰∏™Â≠óËäÇÁî±ËøõÁ®ã id ÁªÑÊàê PID</li>
<li>ÊúÄÂêé‰∏â‰∏™Â≠óËäÇÊòØÈöèÊú∫Êï∞</li>
</ul>
<p><img src="/p/mongodb/images/1559617643826.png"
	width="581"
	height="78"
	
	loading="lazy"
	
		alt="1559617643826"
	
	
		class="gallery-image" 
		data-flex-grow="744"
		data-flex-basis="1787px"
	
></p>
<p>MongoDB ‰∏≠Â≠òÂÇ®ÁöÑÊñáÊ°£ÂøÖÈ°ªÊúâ‰∏Ä‰∏™ _id ÈîÆ„ÄÇËøô‰∏™ÈîÆÁöÑÂÄºÂèØ‰ª•ÊòØ‰ªª‰ΩïÁ±ªÂûãÁöÑÔºåÈªòËÆ§ÊòØ‰∏™ ObjectId ÂØπË±°</p>
</li>
<li>
<p>Êó∂Èó¥Êà≥</p>
<p>BSON Êúâ‰∏Ä‰∏™ÁâπÊÆäÁöÑÊó∂Èó¥Êà≥Á±ªÂûãÔºå‰∏éÊôÆÈÄöÁöÑÊó•ÊúüÁ±ªÂûã‰∏çÁõ∏ÂÖ≥„ÄÇÊó∂Èó¥Êà≥ÂÄºÊòØ‰∏Ä‰∏™ 64 ‰ΩçÁöÑÂÄº„ÄÇÂÖ∂‰∏≠Ôºö</p>
<ul>
<li>Ââç32‰ΩçÊòØ‰∏Ä‰∏™ time_t ÂÄº„Äê‰∏éUnixÊñ∞Á∫™ÂÖÉÔºà1970Âπ¥1Êúà1Êó•ÔºâÁõ∏Â∑ÆÁöÑÁßíÊï∞„Äë</li>
<li>Âêé32‰ΩçÊòØÂú®ÊüêÁßí‰∏≠Êìç‰ΩúÁöÑ‰∏Ä‰∏™ÈÄíÂ¢ûÁöÑÂ∫èÊï∞</li>
</ul>
<p>Âú®Âçï‰∏™ mongod ÂÆû‰æã‰∏≠ÔºåÊó∂Èó¥Êà≥ÂÄºÈÄöÂ∏∏ÊòØÂîØ‰∏ÄÁöÑ„ÄÇ</p>
</li>
<li>
<p>Êó•Êúü</p>
<p>Ë°®Á§∫ÂΩìÂâçË∑ùÁ¶ª UnixÊñ∞Á∫™ÂÖÉÔºà1970Âπ¥1Êúà1Êó•ÔºâÁöÑÊØ´ÁßíÊï∞„ÄÇÊó•ÊúüÁ±ªÂûãÊòØÊúâÁ¨¶Âè∑ÁöÑ, Ë¥üÊï∞Ë°®Á§∫ 1970 Âπ¥‰πãÂâçÁöÑÊó•Êúü„ÄÇ</p>
</li>
</ol>
<h4 id="36-mongodbÂíåredisÊØîËæÉÈù¢ËØï">3.6 MongoDBÂíåRedisÊØîËæÉ„ÄêÈù¢ËØï„Äë
</h4><div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>ÊØîËæÉÊåáÊ†á</th>
          <th>MongoDB(Êµ∑ÈáèÊï∞ÊçÆ)</th>
          <th>RedisÔºàÁÉ≠ÁÇπÊï∞ÊçÆÔºâ</th>
          <th>ÊØîËæÉËØ¥Êòé</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>ÂÆûÁé∞ËØ≠Ë®Ä</td>
          <td>c++</td>
          <td>c/c++</td>
          <td>-</td>
      </tr>
      <tr>
          <td>ÂçèËÆÆ</td>
          <td>==BSON,Ëá™ÂÆö‰πâ‰∫åËøõÂà∂==</td>
          <td>==Á±ªtelnet(TCP/IP)==</td>
          <td>-</td>
      </tr>
      <tr>
          <td>ÊÄßËÉΩ</td>
          <td>==‰æùËµñÂÜÖÂ≠ò (ÂÜÖÂ≠òÊò†Â∞ÑÊñá‰ª∂ÊäÄÊúØ)==</td>
          <td>==‰æùËµñÂÜÖÂ≠ò==ÔºàÁ∫ØÂÜÖÂ≠òÔºâ</td>
          <td>Redis‰ºò‰∫éMongoDB</td>
      </tr>
      <tr>
          <td>ÂèØÊìç‰ΩúÊÄß</td>
          <td>‰∏∞ÂØåÁöÑÊï∞ÊçÆË°®Ëææ,Á¥¢Âºï;ÊúÄÁ±ª‰ºº‰∫éÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ì,ÊîØÊåÅ‰∏∞ÂØåÁöÑÊü•ËØ¢ËØ≠Âè•</td>
          <td>Êï∞ÊçÆÁ±ªÂûã‰∏∞ÂØå,ËæÉÂ∞ëÁöÑIO</td>
          <td>-</td>
      </tr>
      <tr>
          <td>ÂÜÖÂ≠òÂèäÂ≠òÂÇ®</td>
          <td>ÈÄÇÂêàÂ§ßÊï∞ÊçÆÈáèÂ≠òÂÇ®,‰æùËµñÁ≥ªÁªüËôöÊãüÂÜÖÂ≠ò,ÈááÁî®ÈïúÂÉèÊñá‰ª∂Â≠òÂÇ®;ÂÜÖÂ≠òÂç†Áî®ÁéáÊØîËæÉÈ´ò,ÂÆòÊñπÂª∫ËÆÆÁã¨Á´ãÈÉ®ÁΩ≤Âú®64‰ΩçÁ≥ªÁªü</td>
          <td>Redis2.0ÂêéÊîØÊåÅËôöÊãüÂÜÖÂ≠òÁâπÊÄß(VM) Á™ÅÁ†¥Áâ©ÁêÜÂÜÖÂ≠òÈôêÂà∂;Êï∞ÊçÆÂèØ‰ª•ËÆæÁΩÆÊó∂ÊïàÊÄß,Á±ª‰ºº‰∫émemcache</td>
          <td>‰∏çÂêåÁöÑÂ∫îÁî®Âú∫ÊôØ,ÂêÑÊúâÂçÉÁßã</td>
      </tr>
      <tr>
          <td>ÂèØÁî®ÊÄß</td>
          <td>ÊîØÊåÅmaster-slave,replicatset(ÂÜÖÈÉ®ÈááÁî®paxosÈÄâ‰∏æÁÆóÊ≥ï,Ëá™Âä®ÊïÖÈöúÊÅ¢Â§ç),auto shardingÊú∫Âà∂,ÂØπÂÆ¢Êà∑Á´ØÂ±èËîΩ‰∫ÜÊïÖÈöúËΩ¨ÁßªÂíåÂàáÁâáÊú∫Âà∂</td>
          <td>‰æùËµñÂÆ¢Êà∑Á´ØÊù•ÂÆûÁé∞ÂàÜÂ∏ÉÂºèËØªÂÜô;‰∏ª‰ªéÂ§çÂà∂Êó∂,ÊØèÊ¨°‰ªéËäÇÁÇπÈáçÊñ∞ËøûÊé•‰∏ªËäÇÁÇπÈÉΩË¶Å‰æùËµñÊï¥‰∏™Âø´ÁÖß,Êó†Â¢ûÈáèÂ§çÂà∂;‰∏çÊîØÊåÅauto sharding,ÈúÄË¶Å‰æùËµñÁ®ãÂ∫èËÆæÂÆö‰∏ÄËá¥ÊÄßhashÊú∫Âà∂</td>
          <td>MongoDB‰ºò‰∫éRedisÔºõÂçïÁÇπÈóÆÈ¢ò‰∏ä,MongoDBÂ∫îÁî®ÁÆÄÂçï,Áõ∏ÂØπÁî®Êà∑ÈÄèÊòé,RedisÊØîËæÉÂ§çÊùÇ,ÈúÄË¶ÅÂÆ¢Êà∑Á´Ø‰∏ªÂä®Ëß£ÂÜ≥.(MongoDB‰∏ÄËà¨‰ΩøÁî®replicasetsÂíåshardingÁõ∏ÁªìÂêà,replicasets‰æßÈáçÈ´òÂèØÁî®ÊÄß‰ª•ÂèäÈ´òÂèØÈù†,sharding‰æßÈáçÊÄßËÉΩ,Ê∞¥Âπ≥Êâ©Â±ï)</td>
      </tr>
      <tr>
          <td>ÂèØÈù†ÊÄß</td>
          <td>‰ªé1.8ÁâàÊú¨Âêé,ÈááÁî®binlogÊñπÂºè(Á±ª‰ººMysql) ÊîØÊåÅÊåÅ‰πÖÂåñ</td>
          <td>‰æùËµñÂø´ÁÖßËøõË°åÊåÅ‰πÖÂåñ;AOFÂ¢ûÂº∫ÂèØÈù†ÊÄß;Â¢ûÂº∫ÊÄßÁöÑÂêåÊó∂,ÂΩ±ÂìçËÆøÈóÆÊÄßËÉΩ</td>
          <td>mongodbÂú®ÂêØÂä®Êó∂Ôºå‰∏ìÈó®ÂàùÂßãÂåñ‰∏Ä‰∏™Á∫øÁ®ã‰∏çÊñ≠Âæ™ÁéØÔºàÈô§ÈùûÂ∫îÁî®crashÊéâÔºâÔºåÁî®‰∫éÂú®‰∏ÄÂÆöÊó∂Èó¥Âë®ÊúüÂÜÖÊù•‰ªédeferÈòüÂàó‰∏≠Ëé∑ÂèñË¶ÅÊåÅ‰πÖÂåñÁöÑÊï∞ÊçÆÂπ∂ÂÜôÂÖ•Âà∞Á£ÅÁõòÁöÑjournal(Êó•Âøó)Âíåmongofile(Êï∞ÊçÆ)Â§ÑÔºåÂΩìÁÑ∂ÂÆÉ‰∏çÊòØÂú®Áî®Êà∑Ê∑ªÂä†ËÆ∞ÂΩïÊó∂Â∞±ÂÜôÂà∞Á£ÅÁõò‰∏ä</td>
      </tr>
      <tr>
          <td>‰∏ÄËá¥ÊÄß</td>
          <td>==‰ª•ÂâçÈÉΩÁâàÊú¨‰∏çÊîØÊåÅ‰∫ãÂä°,Èù†ÂÆ¢Êà∑Á´Ø‰øùËØÅ==  ==ÊúÄÊñ∞4.xÁöÑÊîØÊåÅ‰∫ãÂä°==</td>
          <td>==ÊîØÊåÅ‰∫ãÂä°,ÊØîËæÉËÑÜ,‰ªÖËÉΩ‰øùËØÅ‰∫ãÂä°‰∏≠ÁöÑÊìç‰ΩúÊåâÈ°∫Â∫èÊâßË°å==</td>
          <td>-</td>
      </tr>
      <tr>
          <td>Êï∞ÊçÆÂàÜÊûê</td>
          <td>ÂÜÖÁΩÆÊï∞ÊçÆÂàÜÊûêÂäüËÉΩ(mapreduce)</td>
          <td>‰∏çÊîØÊåÅ</td>
          <td>MongoDB‰ºò‰∫éRedis</td>
      </tr>
      <tr>
          <td>Â∫îÁî®Âú∫ÊôØ</td>
          <td>==Êµ∑ÈáèÊï∞ÊçÆÂ≠òÂÇ®ÂíåËÆøÈóÆÊïàÁéáÊèêÂçá==</td>
          <td>==ÁÉ≠ÁÇπÊï∞ÊçÆÁöÑÂ≠òÂÇ®==</td>
          <td>-</td>
      </tr>
  </tbody>
</table></div>
<h2 id="Áü•ËØÜÁÇπ-mongodbÂÆâË£Ö">Áü•ËØÜÁÇπ-MongoDBÂÆâË£Ö
</h2><h3 id="1ÁõÆÊ†á-1">1.ÁõÆÊ†á
</h3><ul>
<li><input disabled="" type="checkbox"> ÊéåÊè°MongoDBÁöÑÂÆâË£Ö</li>
</ul>
<h3 id="2Ë∑ØÂæÑ-1">2.Ë∑ØÂæÑ
</h3><ol>
<li>Docker ÁéØÂ¢É‰∏ãMongoDBÂÆâË£Ö</li>
<li>ÂÆ¢Êà∑Á´ØÁöÑÂÆâË£Ö‰ΩøÁî®</li>
</ol>
<h3 id="3ËÆ≤Ëß£-1">3.ËÆ≤Ëß£
</h3><h4 id="31-docker-ÁéØÂ¢É‰∏ãmongodbÂÆâË£Ö">3.1 Docker ÁéØÂ¢É‰∏ãMongoDBÂÆâË£Ö
</h4><p>Âú®LinuxËôöÊãüÊú∫‰∏≠ÂàõÂª∫mongoÂÆπÂô®ÔºåÂëΩ‰ª§Â¶Ç‰∏ãÔºö</p>
<pre><code class="language-bash">docker run -di --name=tensquare_mongo -p 27017:27017 mongo
</code></pre>
<p>Âú®WindowÂëΩ‰ª§Ë°åÁ™óÂè£Âá∫ÂÖ•ÁôªÂΩïÂëΩ‰ª§Ôºö</p>
<pre><code class="language-bash">mongo 192.168.200.128
</code></pre>
<h4 id="32ÂÆ¢Êà∑Á´ØÁöÑÂÆâË£ÖÂíå‰ΩøÁî®">3.2ÂÆ¢Êà∑Á´ØÁöÑÂÆâË£ÖÂíå‰ΩøÁî®
</h4><p>MongodbÊúâÂæàÂ§öÂèØËßÜÂåñÂ∑•ÂÖ∑ÔºåËøôÈáåÊàë‰ª¨‰ΩøÁî®robomongoÔºåÂèØ‰ª•ËÆøÈóÆÂÆòÁΩëÔºö<a class="link" href="https://robomongo.org/"  target="_blank" rel="noopener"
    >https://robomongo.org/</a></p>
<p><img src="/p/mongodb/images/1559634897474.png"
	width="1322"
	height="549"
	
	loading="lazy"
	
		alt="1559634897474"
	
	
		class="gallery-image" 
		data-flex-grow="240"
		data-flex-basis="577px"
	
></p>
<p>Êàë‰ª¨ÂèØ‰ª•ÁúãÂà∞Êúâ‰∏§‰∏™ÁâàÊú¨Studio 3TÂíåRobo 3T</p>
<p>Studio 3TÊòØ‰∏Ä‰∏™ÂäüËÉΩÂæàÂº∫Â§ßÁöÑÊî∂Ë¥πÁâà„ÄÇ„ÄÇ„ÄÇ</p>
<p>Robo 3TÂâçË∫´Â∞±ÊòØRobomongoÔºåÊòØ‰∏Ä‰∏™ÂÖçË¥πÁöÑÂèØËßÜÂåñÂ∑•ÂÖ∑ÔºåÊàë‰ª¨‰ΩøÁî®‰ªñÂèØ‰ª•ÂæàËΩªÊùæÁöÑËøõË°åMongodbÁöÑÁÆ°ÁêÜ„ÄÇ</p>
<p>Âú®ËµÑÊñô‰∏≠ÊâæÂà∞robo3t-1.3.1-windows-x86_64-7419c406.exeÂπ∂ÂèåÂáªÂÆâË£Ö„ÄÇÊâìÂºÄÂêéÁúãÂà∞‰ª•‰∏ãÁïåÈù¢Ôºö</p>
<p><img src="/p/mongodb/images/1559635108010.png"
	width="677"
	height="411"
	
	loading="lazy"
	
		alt="1559635108010"
	
	
		class="gallery-image" 
		data-flex-grow="164"
		data-flex-basis="395px"
	
></p>
<p>ÁÇπÂáª<code>Create</code>ÂàõÂª∫ËøûÊé•ÔºåËøõË°åÂ¶Ç‰∏ãÈÖçÁΩÆÂç≥ÂèØÔºö</p>
<p><img src="/p/mongodb/images/1559635267915.png"
	width="480"
	height="340"
	
	loading="lazy"
	
		alt="1559635267915"
	
	
		class="gallery-image" 
		data-flex-grow="141"
		data-flex-basis="338px"
	
></p>
<h3 id="4Â∞èÁªì">4.Â∞èÁªì
</h3><ol>
<li>dockerÁéØÂ¢É
<ul>
<li>‰∏ãËΩΩÈïúÂÉè(Â∑≤Áªè‰∏ãËΩΩ‰∫Ü)</li>
<li>ÂêØÂä®ÂÆπÂô®</li>
</ul>
</li>
<li>ÂÆ¢Êà∑Á´Ø</li>
</ol>
<blockquote>
<p>ÈªòËÆ§Á´ØÂè£: 27017</p>
</blockquote>
<h2 id="Áü•ËØÜÁÇπ-Â∏∏Áî®ÂëΩ‰ª§">Áü•ËØÜÁÇπ-Â∏∏Áî®ÂëΩ‰ª§
</h2><h3 id="1ÁõÆÊ†á-2">1.ÁõÆÊ†á
</h3><ul>
<li><input disabled="" type="checkbox"> ÊéåÊè°MongoDBÁöÑÂ∏∏Áî®ÂëΩ‰ª§</li>
</ul>
<h3 id="2Ë∑ØÂæÑ-2">2.Ë∑ØÂæÑ
</h3><ol>
<li>Êï∞ÊçÆÂ∫ì</li>
<li>ÈõÜÂêà</li>
<li>ÊñáÊ°£</li>
</ol>
<h3 id="3ËÆ≤Ëß£-2">3.ËÆ≤Ëß£
</h3><h4 id="31-ÈÄâÊã©ÂíåÂàõÂª∫Êï∞ÊçÆÂ∫ì">3.1 ÈÄâÊã©ÂíåÂàõÂª∫Êï∞ÊçÆÂ∫ì
</h4><p>ÈÄâÊã©ÂíåÂàõÂª∫Êï∞ÊçÆÂ∫ìÁöÑËØ≠Ê≥ïÊ†ºÂºèÔºö</p>
<pre><code class="language-bash">use¬†Êï∞ÊçÆÂ∫ìÂêçÁß∞
</code></pre>
<p>Â¶ÇÊûúÊï∞ÊçÆÂ∫ìÂ≠òÂú®ÂàôÈÄâÊã©ËØ•Êï∞ÊçÆÂ∫ìÔºåÂ¶ÇÊûúÊï∞ÊçÆÂ∫ì‰∏çÂ≠òÂú®ÂàôËá™Âä®ÂàõÂª∫„ÄÇ‰ª•‰∏ãËØ≠Âè•ÂàõÂª∫commentdbÊï∞ÊçÆÂ∫ìÔºö</p>
<pre><code class="language-bash">use commentdb
</code></pre>
<p>Êü•ÁúãÊï∞ÊçÆÂ∫ìÔºö</p>
<pre><code class="language-bash">show dbs
</code></pre>
<p>Êü•ÁúãÈõÜÂêà,ÈúÄË¶ÅÂÖàÈÄâÊã©Êï∞ÊçÆÂ∫ì‰πãÂêéÔºåÊâçËÉΩÊü•ÁúãËØ•Êï∞ÊçÆÂ∫ìÁöÑÈõÜÂêàÔºö</p>
<pre><code class="language-bash">show collections

</code></pre>
<h4 id="32-ÊèíÂÖ•‰∏éÊü•ËØ¢ÊñáÊ°£">3.2 ÊèíÂÖ•‰∏éÊü•ËØ¢ÊñáÊ°£
</h4><p>ÈÄâÊã©Êï∞ÊçÆÂ∫ìÂêéÔºå‰ΩøÁî®ÈõÜÂêàÊù•ÂØπÊñáÊ°£ËøõË°åÊìç‰ΩúÔºåÊèíÂÖ•ÊñáÊ°£ËØ≠Ê≥ïÊ†ºÂºèÔºö</p>
<pre><code class="language-bash">db.ÈõÜÂêàÂêçÁß∞.insert(Êï∞ÊçÆ);

</code></pre>
<p>ÊèíÂÖ•‰ª•‰∏ãÊµãËØïÊï∞ÊçÆÔºö</p>
<pre><code class="language-bash">db.comment.insert({content:&quot;ÂçÅÊ¨°ÊñπËØæÁ®ã&quot;,userid:&quot;1011&quot;})

</code></pre>
<p>Êü•ËØ¢ÈõÜÂêàÁöÑËØ≠Ê≥ïÊ†ºÂºèÔºö</p>
<pre><code class="language-bash">db.ÈõÜÂêàÂêçÁß∞.find()

db.collection.find(query, projection);

projection ‰πü‰∏∫ÂèØÈÄâÈ°πÔºåË°®Á§∫‰ΩøÁî®ÊäïÂΩ±Êìç‰ΩúÁ¨¶ÊåáÂÆöËøîÂõûÁöÑÂ≠óÊÆµÔºåÂ¶ÇÊûúÂøΩÁï•Ê≠§ÈÄâÈ°πÂàôËøîÂõûÊâÄÊúâÂ≠óÊÆµ„ÄÇ
</code></pre>
<p>Êü•ËØ¢spitÈõÜÂêàÁöÑÊâÄÊúâÊñáÊ°£ÔºåËæìÂÖ•‰ª•‰∏ãÂëΩ‰ª§Ôºö</p>
<pre><code class="language-bash">db.comment.find()

</code></pre>
<p>‚Äã	ÂèëÁé∞ÊñáÊ°£‰ºöÊúâ‰∏Ä‰∏™Âè´_idÁöÑÂ≠óÊÆµÔºå==Ëøô‰∏™Áõ∏ÂΩì‰∫éÊàë‰ª¨ÂéüÊù•ÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ì‰∏≠Ë°®ÁöÑ‰∏ªÈîÆÔºåÂΩì‰Ω†Âú®ÊèíÂÖ•ÊñáÊ°£ËÆ∞ÂΩïÊó∂Ê≤°ÊúâÊåáÂÆöËØ•Â≠óÊÆµÔºåMongoDB‰ºöËá™Âä®ÂàõÂª∫ÔºåÂÖ∂Á±ªÂûãÊòØObjectIDÁ±ªÂûã==„ÄÇÂ¶ÇÊûúÊàë‰ª¨Âú®ÊèíÂÖ•ÊñáÊ°£ËÆ∞ÂΩïÊó∂ÊåáÂÆöËØ•Â≠óÊÆµ‰πüÂèØ‰ª•ÔºåÂÖ∂Á±ªÂûãÂèØ‰ª•ÊòØObjectIDÁ±ªÂûãÔºå‰πüÂèØ‰ª•ÊòØMongoDBÊîØÊåÅÁöÑ‰ªªÊÑèÁ±ªÂûã„ÄÇ</p>
<p>ËæìÂÖ•‰ª•‰∏ãÊµãËØïËØ≠Âè•:</p>
<pre><code class="language-js">db.comment.insert({_id:&quot;1&quot;,content:&quot;Âà∞Â∫ï‰∏∫Âï• Âá∫Èîô&quot;,username:&quot;Âº†‰∏â&quot;,userid:&quot;1012&quot;,thumbup:2020,tags:[&quot;ÂæàÂ•Ω&quot;,&quot;ÂçÅÂàÜËÆ§Âêå&quot;],tupuser:[{name:&quot;ÊùéÂ§ß&quot;,sex:&quot;Â•≥&quot;,age:10},{name:&quot;Êùé‰∫å&quot;,sex:&quot;Áî∑&quot;,age:42}],lastModifiedDate:new Date()});

db.comment.insert({_id:&quot;2&quot;,content:&quot;Âä†Áè≠Âà∞ÂçäÂ§ú&quot;,username:&quot;Êùé  Âõõ&quot;,userid:&quot;1013&quot;,thumbup:1023,tags:[&quot;‰∏ÄËà¨&quot;,&quot;‰∏çÁªôÂäõ&quot;],tupuser:[{name:&quot;Êùé‰∫å&quot;,sex:&quot;Áî∑&quot;,age:42},{name:&quot;Êùé‰∏â&quot;,sex:&quot;Â•≥&quot;,age:12}],lastModifiedDate:new Date()});

db.comment.insert({_id:&quot;3&quot;,content:&quot;ÊâãÊú∫ÊµÅÈáèË∂Ö‰∫ÜÂíãÂäû&quot;,username:&quot;Áéã‰∫î&quot;,userid:&quot;1013&quot;,thumbup:111,tags:[&quot;ÂæàÂ•Ω&quot;,&quot;ÁªôÂäõ&quot;],tupuser:[{name:&quot;Êùé‰∏â&quot;,sex:&quot;Â•≥&quot;,age:12},{name:&quot;ÊùéÂõõ&quot;,sex:&quot;Áî∑&quot;,age:17}],lastModifiedDate:new Date()});

db.comment.insert({_id:&quot;4&quot;,content:&quot;ÂùöÊåÅÂ∞±ÊòØËÉúÂà©&quot;,username:&quot;ËµµÂÖ≠&quot;,userid:&quot;1014&quot;,thumbup:1223,tags:[&quot;‰∏çÂ•Ω&quot;,&quot;ËØ¥ÁöÑ‰∏çÂØπ&quot;],tupuser:[{name:&quot;ÊùéÂõõ&quot;,sex:&quot;Áî∑&quot;,age:17},{name:&quot;Êùé‰∫î&quot;,sex:&quot;Â•≥&quot;,age:26}],lastModifiedDate:new Date()});

db.comment.insert({_id:&quot;5&quot;,content:&quot;ÊâãÊú∫Ê≤°Áîµ‰∫ÜÂïä&quot;,username:&quot;Êùé‰∫ëÈæô&quot;,userid:&quot;1014&quot;,thumbup:923,tags:[&quot;ÂæàÂ•Ω&quot;,&quot;ÂçÅÂàÜËÆ§Âêå&quot;],tupuser:[{name:&quot;Êùé‰∫î&quot;,sex:&quot;Â•≥&quot;,age:26},{name:&quot;ÊùéÂÖ≠&quot;,sex:&quot;Áî∑&quot;,age:39}],lastModifiedDate:new Date()});

db.comment.insert({_id:&quot;6&quot;,content:&quot;Ëøô‰∏™ÊâãÊú∫Â•Ω&quot;,username:&quot;È£éÊ∏ÖÊâ¨&quot;,userid:&quot;1014&quot;,thumbup:123,tags:[&quot;ÂæàÂ•Ω&quot;,&quot;ÂçÅÂàÜËÆ§Âêå&quot;],tupuser:[{name:&quot;ÊùéÂÖ≠&quot;,sex:&quot;Áî∑&quot;,age:39},{name:&quot;Êùé‰∏É&quot;,sex:&quot;Áî∑&quot;,age:62}],lastModifiedDate:new Date()});
</code></pre>
<p>Êåâ‰∏ÄÂÆöÊù°‰ª∂Êù•Êü•ËØ¢ÔºåÊØîÂ¶ÇÊü•ËØ¢userid‰∏∫1013ÁöÑËÆ∞ÂΩïÔºåÂè™Ë¶ÅÂú®find()‰∏≠Ê∑ªÂä†ÂèÇÊï∞Âç≥ÂèØÔºåÂèÇÊï∞‰πüÊòØjsonÊ†ºÂºèÔºåÂ¶Ç‰∏ãÔºö</p>
<pre><code class="language-bash">db.comment.find({userid:'1013'})

</code></pre>
<p>Âè™ÈúÄË¶ÅËøîÂõûÁ¨¶ÂêàÊù°‰ª∂ÁöÑÁ¨¨‰∏ÄÊù°Êï∞ÊçÆÔºåÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®findOneÂëΩ‰ª§Êù•ÂÆûÁé∞Ôºö</p>
<pre><code class="language-bash">db.comment.findOne({userid:'1013'})

</code></pre>
<p>ËøîÂõûÊåáÂÆöÊù°Êï∞ÁöÑËÆ∞ÂΩïÔºåÂèØ‰ª•Âú®findÊñπÊ≥ïÂêéË∞ÉÁî®limitÊù•ËøîÂõûÁªìÊûúÔºå‰æãÂ¶ÇÔºö</p>
<pre><code class="language-bash">db.comment.find().limit(2)

</code></pre>
<h4 id="33-‰øÆÊîπ‰∏éÂà†Èô§ÊñáÊ°£">3.3 ‰øÆÊîπ‰∏éÂà†Èô§ÊñáÊ°£
</h4><p>‰øÆÊîπÊñáÊ°£ÁöÑËØ≠Ê≥ïÁªìÊûÑÔºö</p>
<pre><code class="language-java">db.ÈõÜÂêàÂêçÁß∞.update(Êù°‰ª∂,‰øÆÊîπÂêéÁöÑÊï∞ÊçÆ)

</code></pre>
<p>‰øÆÊîπ_id‰∏∫1ÁöÑËÆ∞ÂΩïÔºåÁÇπËµûÊï∞‰∏∫1000ÔºåËæìÂÖ•‰ª•‰∏ãËØ≠Âè•Ôºö</p>
<pre><code class="language-bash">db.comment.update({_id:&quot;1&quot;},{thumbup:1000})

</code></pre>
<p>ÊâßË°åÂêéÂèëÁé∞ÔºåËøôÊù°ÊñáÊ°£Èô§‰∫ÜthumbupÂ≠óÊÆµÂÖ∂ÂÆÉÂ≠óÊÆµÈÉΩ‰∏çËßÅ‰∫Ü„ÄÇ</p>
<p>‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºåÊàë‰ª¨ÈúÄË¶Å‰ΩøÁî®‰øÆÊîπÂô®$setÊù•ÂÆûÁé∞ÔºåÂëΩ‰ª§Â¶Ç‰∏ãÔºö</p>
<pre><code class="language-java">db.comment.update({_id:&quot;2&quot;},{$set:{thumbup:2000}})

</code></pre>
<p>Âà†Èô§ÊñáÊ°£ÁöÑËØ≠Ê≥ïÁªìÊûÑÔºö</p>
<pre><code class="language-bash">db.ÈõÜÂêàÂêçÁß∞.remove(Êù°‰ª∂)

</code></pre>
<p>‰ª•‰∏ãËØ≠Âè•ÂèØ‰ª•Â∞ÜÊï∞ÊçÆÂÖ®ÈÉ®Âà†Èô§ÔºåÊÖéÁî®~</p>
<pre><code class="language-bash">db.comment.remove({})

</code></pre>
<p>Âà†Èô§Êù°‰ª∂ÂèØ‰ª•ÊîæÂà∞Â§ßÊã¨Âè∑‰∏≠Ôºå‰æãÂ¶ÇÂà†Èô§thumbup‰∏∫1000ÁöÑÊï∞ÊçÆÔºåËæìÂÖ•‰ª•‰∏ãËØ≠Âè•Ôºö</p>
<pre><code class="language-bash">db.comment.remove({thumbup:1000})

</code></pre>
<p>update Êõ¥Êñ∞ÂáΩÊï∞</p>
<ul>
<li>$push : Â¢ûÂä†‰∏Ä‰∏™ÂØπË±°Âà∞Êï∞ÁªÑÂ∫ïÈÉ®</li>
<li>$pushAll: Â¢ûÂä†Â§ö‰∏™ÂØπË±°Âà∞Êï∞ÁªÑÂ∫ïÈÉ®</li>
<li>$pop: ‰ªéÊï∞ÁªÑÂ∫ïÈÉ®Âà†Èô§‰∏Ä‰∏™ÂØπË±°</li>
<li>$pull: Â¶ÇÊûúÂåπÈÖçÊåáÂÆöÁöÑÂÄº, ‰ªéÊï∞ÁªÑ‰∏≠Âà†Èô§ÂØπÂ∫îÁöÑÂØπË±°</li>
<li>$pullAll: Â¶ÇÊûúÂåπÈÖç‰ªªÊÑèÁöÑÂÄº, ‰ªéÊï∞ÊçÆ‰∏≠Âà†Èô§Áõ∏Â∫îÁöÑÂØπË±°</li>
<li>$addToSet: Â¶ÇÊûú‰∏çÂ≠òÂú®ÂàôÂ¢ûÂä†‰∏Ä‰∏™ÂÄºÂà∞Êï∞ÁªÑ</li>
</ul>
<h4 id="34-ÁªüËÆ°Êù°Êï∞">3.4 ÁªüËÆ°Êù°Êï∞
</h4><p>ÁªüËÆ°ËÆ∞ÂΩïÊù°‰ª∂‰ΩøÁî®count()ÊñπÊ≥ï„ÄÇ‰ª•‰∏ãËØ≠Âè•ÁªüËÆ°spitÈõÜÂêàÁöÑËÆ∞ÂΩïÊï∞Ôºö</p>
<pre><code class="language-bash">db.comment.count()

</code></pre>
<p>ÊåâÊù°‰ª∂ÁªüËÆ° Ôºå‰æãÂ¶ÇÁªüËÆ°userid‰∏∫1013ÁöÑËÆ∞ÂΩïÊù°Êï∞Ôºö</p>
<pre><code class="language-bash">db.comment.count({userid:&quot;1013&quot;})

</code></pre>
<h4 id="35-Ê®°Á≥äÊü•ËØ¢">3.5 Ê®°Á≥äÊü•ËØ¢
</h4><p>MongoDBÁöÑÊ®°Á≥äÊü•ËØ¢ÊòØÈÄöËøáÊ≠£ÂàôË°®ËææÂºèÁöÑÊñπÂºèÂÆûÁé∞ÁöÑ„ÄÇÊ†ºÂºè‰∏∫Ôºö</p>
<pre><code class="language-bash">/Ê®°Á≥äÊü•ËØ¢Â≠óÁ¨¶‰∏≤/

</code></pre>
<p>Êü•ËØ¢ËØÑËÆ∫ÂÜÖÂÆπÂåÖÂê´‚ÄúÊµÅÈáè‚ÄùÁöÑÊâÄÊúâÊñáÊ°£Ôºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<pre><code class="language-bash">db.comment.find({content:/ÊµÅÈáè/})


</code></pre>
<p>Êü•ËØ¢ËØÑËÆ∫ÂÜÖÂÆπ‰∏≠‰ª•‚ÄúÂä†Áè≠‚ÄùÂºÄÂ§¥ÁöÑÔºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<pre><code class="language-BASH">db.comment.find({content:/^Âä†Áè≠/})


</code></pre>
<h4 id="36-Â§ß‰∫é-Â∞è‰∫é-‰∏çÁ≠â‰∫é">3.6 Â§ß‰∫é Â∞è‰∫é ‰∏çÁ≠â‰∫é
</h4><p>&lt;, &lt;=, &gt;, &gt;= Ëøô‰∏™Êìç‰ΩúÁ¨¶‰πüÊòØÂæàÂ∏∏Áî®ÁöÑÔºåÊ†ºÂºèÂ¶Ç‰∏ã:</p>
<pre><code class="language-bash">db.ÈõÜÂêàÂêçÁß∞.find({¬†&quot;field&quot;¬†:¬†{¬†$gt:¬†value¬†}})¬†//¬†Â§ß‰∫é:¬†field¬†&gt;¬†value
db.ÈõÜÂêàÂêçÁß∞.find({¬†&quot;field&quot;¬†:¬†{¬†$lt:¬†value¬†}})¬†//¬†Â∞è‰∫é:¬†field¬†&lt;¬†value
db.ÈõÜÂêàÂêçÁß∞.find({¬†&quot;field&quot;¬†:¬†{¬†$gte:¬†value¬†}})¬†//¬†Â§ß‰∫éÁ≠â‰∫é:¬†field¬†&gt;=¬†value
db.ÈõÜÂêàÂêçÁß∞.find({¬†&quot;field&quot;¬†:¬†{¬†$lte:¬†value¬†}})¬†//¬†Â∞è‰∫éÁ≠â‰∫é:¬†field¬†&lt;=¬†value
db.ÈõÜÂêàÂêçÁß∞.find({¬†&quot;field&quot;¬†:¬†{¬†$ne:¬†value¬†}})¬†//¬†‰∏çÁ≠â‰∫é:¬†field¬†!=¬†value


</code></pre>
<p>Êü•ËØ¢ËØÑËÆ∫ÁÇπËµûÊï∞Â§ß‰∫é1000ÁöÑËÆ∞ÂΩïÔºö</p>
<pre><code class="language-bash">db.comment.find({thumbup:{$gt:1000}})


</code></pre>
<h4 id="37-ÂåÖÂê´‰∏é‰∏çÂåÖÂê´">3.7 ÂåÖÂê´‰∏é‰∏çÂåÖÂê´
</h4><p>ÂåÖÂê´‰ΩøÁî®$inÊìç‰ΩúÁ¨¶</p>
<p>Êü•ËØ¢ËØÑËÆ∫ÈõÜÂêà‰∏≠useridÂ≠óÊÆµÂåÖÂê´1013Âíå1014ÁöÑÊñáÊ°£Ôºö(select * from comment where userid in(1013,1014))</p>
<pre><code class="language-bash">db.comment.find({userid:{$in:[&quot;1013&quot;,&quot;1014&quot;]}})


</code></pre>
<p>‰∏çÂåÖÂê´‰ΩøÁî®$ninÊìç‰ΩúÁ¨¶</p>
<p>Êü•ËØ¢ËØÑËÆ∫ÈõÜÂêà‰∏≠useridÂ≠óÊÆµ‰∏çÂåÖÂê´1013Âíå1014ÁöÑÊñáÊ°£Ôºö</p>
<pre><code class="language-bash">db.comment.find({userid:{$nin:[&quot;1013&quot;,&quot;1014&quot;]}})


</code></pre>
<h4 id="38-Êù°‰ª∂ËøûÊé•">3.8 Êù°‰ª∂ËøûÊé•
</h4><p>Êàë‰ª¨Â¶ÇÊûúÈúÄË¶ÅÊü•ËØ¢ÂêåÊó∂Êª°Ë∂≥‰∏§‰∏™‰ª•‰∏äÊù°‰ª∂ÔºåÈúÄË¶Å‰ΩøÁî®$andÊìç‰ΩúÁ¨¶Â∞ÜÊù°‰ª∂ËøõË°åÂÖ≥ËÅîÔºàÁõ∏ÂΩì‰∫éSQLÁöÑandÔºâ„ÄÇÊ†ºÂºè‰∏∫Ôºö</p>
<pre><code class="language-bash">$and:[¬†{Êù°‰ª∂},{Êù°‰ª∂},{Êù°‰ª∂}¬†]


</code></pre>
<p>Êü•ËØ¢ËØÑËÆ∫ÈõÜÂêà‰∏≠thumbupÂ§ß‰∫éÁ≠â‰∫é1000 Âπ∂‰∏îÂ∞è‰∫é2000ÁöÑÊñáÊ°£Ôºö</p>
<pre><code class="language-bash">db.comment.find({$and:[¬†{thumbup:{$gte:1000}}¬†,{thumbup:{$lt:2000}¬†}]})


</code></pre>
<p>Â¶ÇÊûú‰∏§‰∏™‰ª•‰∏äÊù°‰ª∂‰πãÈó¥ÊòØÊàñËÄÖÁöÑÂÖ≥Á≥ªÔºåÊàë‰ª¨‰ΩøÁî®Êìç‰ΩúÁ¨¶ËøõË°åÂÖ≥ËÅîÔºå‰∏éÂâçÈù¢andÁöÑ‰ΩøÁî®ÊñπÂºèÁõ∏ÂêåÔºåÊ†ºÂºè‰∏∫Ôºö</p>
<pre><code class="language-bash">$or:[¬†{Êù°‰ª∂},{Êù°‰ª∂},{Êù°‰ª∂}¬†]


</code></pre>
<p>Êü•ËØ¢ËØÑËÆ∫ÈõÜÂêà‰∏≠userid‰∏∫1013ÔºåÊàñËÄÖÁÇπËµûÊï∞Â∞è‰∫é2000ÁöÑÊñáÊ°£ËÆ∞ÂΩïÔºö</p>
<pre><code class="language-bash">db.comment.find({$or:[¬†{userid:&quot;1013&quot;}¬†,{thumbup:{$lt:2000}¬†}]})


</code></pre>
<h4 id="39-ÂàóÂÄºÂ¢ûÈïø">3.9 ÂàóÂÄºÂ¢ûÈïø
</h4><p>ÂØπÊüêÂàóÂÄºÂú®ÂéüÊúâÂÄºÁöÑÂü∫Á°Ä‰∏äËøõË°åÂ¢ûÂä†ÊàñÂáèÂ∞ëÔºåÂèØ‰ª•‰ΩøÁî®$incËøêÁÆóÁ¨¶Ôºö</p>
<pre><code class="language-bash">db.comment.update({_id:&quot;2&quot;},{$inc:{thumbup:1}})


</code></pre>
<h3 id="4Â∞èÁªì-1">4.Â∞èÁªì
</h3><ol>
<li>ËØ≠Ê≥ï‰∏ãÂéªËøá‰∏ÄÈÅçÂ∞±Ë°å</li>
</ol>
<h2 id="Áü•ËØÜÁÇπ-Á¥¢ÂºïÁöÑ‰ΩøÁî®">Áü•ËØÜÁÇπ-Á¥¢ÂºïÁöÑ‰ΩøÁî®
</h2><h3 id="1ÁõÆÊ†á-3">1.ÁõÆÊ†á
</h3><ul>
<li>ÊéåÊè°Á¥¢ÂºïÁöÑ‰ΩøÁî®</li>
</ul>
<h3 id="2Ë∑ØÂæÑ-3">2.Ë∑ØÂæÑ
</h3><ul>
<li>Á¥¢ÂºïÁÆÄ‰ªã</li>
<li>Á¥¢ÂºïÂü∫Êú¨Êìç‰Ωú</li>
<li>Á¥¢ÂºïÁ±ªÂûã</li>
<li>Á¥¢ÂºïÂ±ûÊÄß</li>
<li>Á¥¢ÂºïÂàÜÊûê</li>
</ul>
<h3 id="3ËÆ≤Ëß£-3">3.ËÆ≤Ëß£
</h3><h4 id="31-Á¥¢ÂºïÁÆÄ‰ªã">3.1 Á¥¢ÂºïÁÆÄ‰ªã
</h4><p>‚Äã	   Á¥¢ÂºïÊîØÊåÅÂú®MongoDB‰∏≠È´òÊïàÊâßË°åÊü•ËØ¢„ÄÇÊ≤°ÊúâÁ¥¢ÂºïÔºåMongoDBÂøÖÈ°ªÊâßË°åÈõÜÂêàÊâ´ÊèèÔºåÂç≥Êâ´ÊèèÈõÜÂêà‰∏≠ÁöÑÊØè‰∏™ÊñáÊ°£Ôºå‰ª•ÈÄâÊã©‰∏éÊü•ËØ¢ËØ≠Âè•ÂåπÈÖçÁöÑÈÇ£‰∫õÊñáÊ°£„ÄÇÂ¶ÇÊûúÊü•ËØ¢Â≠òÂú®ÈÄÇÂΩìÁöÑÁ¥¢ÂºïÔºåÂàôMongoDBÂèØ‰ª•‰ΩøÁî®ËØ•Á¥¢ÂºïÊù•ÈôêÂà∂ÂÆÉÂøÖÈ°ªÊ£ÄÊü•ÁöÑÊñáÊ°£Êï∞„ÄÇÁ¥¢ÂºïÊòØÁâπÊÆäÁöÑ<a class="link" href="https://docs.mongodb.com/manual/indexes/#b-tree"  target="_blank" rel="noopener"
    >Êï∞ÊçÆÁªìÊûÑ</a>ÔºåÂÆÉ‰ª•Êòì‰∫éÈÅçÂéÜÁöÑÂΩ¢ÂºèÂ≠òÂÇ®ÈõÜÂêàÊï∞ÊçÆÈõÜÁöÑ‰∏ÄÂ∞èÈÉ®ÂàÜ„ÄÇÁ¥¢ÂºïÂ≠òÂÇ®‰∏Ä‰∏™ÁâπÂÆöÂ≠óÊÆµÊàñ‰∏ÄÁªÑÂ≠óÊÆµÁöÑÂÄºÔºåÊåâËØ•Â≠óÊÆµÁöÑÂÄºÊéíÂ∫è„ÄÇÁ¥¢ÂºïÊù°ÁõÆÁöÑÊéíÂ∫èÊîØÊåÅÊúâÊïàÁöÑÁõ∏Á≠âÂåπÈÖçÂíåÂü∫‰∫éËåÉÂõ¥ÁöÑÊü•ËØ¢Êìç‰Ωú„ÄÇÂè¶Â§ñÔºåMongoDBÂèØ‰ª•‰ΩøÁî®Á¥¢Âºï‰∏≠ÁöÑÈ°∫Â∫èËøîÂõûÊéíÂ∫èÁöÑÁªìÊûú„ÄÇ</p>
<p>‰∏ãÂõæËØ¥Êòé‰∫Ü‰ΩøÁî®==Á¥¢ÂºïÈÄâÊã©ÂíåÊéíÂ∫èÂåπÈÖçÊñáÊ°£ÁöÑÊü•ËØ¢==Ôºö</p>
<p>‚Äã	<img src="/p/mongodb/images/index-for-sort.bakedsvg.svg"
	
	
	
	loading="lazy"
	
	
></p>
<p>‰ªéÊ†πÊú¨‰∏äËÆ≤ÔºåMongoDB‰∏≠ÁöÑÁ¥¢ÂºïÁ±ª‰ºº‰∫éÂÖ∂‰ªñÊï∞ÊçÆÂ∫ìÁ≥ªÁªü‰∏≠ÁöÑÁ¥¢Âºï„ÄÇMongoDBÂú®<a class="link" href="https://docs.mongodb.com/manual/reference/glossary/#term-collection"  target="_blank" rel="noopener"
    >ÈõÜÂêà</a> Á∫ßÂà´ÂÆö‰πâÁ¥¢ÂºïÔºåÂπ∂ÊîØÊåÅMongoDBÈõÜÂêà‰∏≠ÊñáÊ°£ÁöÑ‰ªª‰ΩïÂ≠óÊÆµÊàñÂ≠êÂ≠óÊÆµÁöÑÁ¥¢Âºï„ÄÇ</p>
<h4 id="32-Á¥¢ÂºïÂü∫Êú¨Êìç‰Ωú">3.2 Á¥¢ÂºïÂü∫Êú¨Êìç‰Ωú
</h4><h5 id="321-ÂàõÂª∫Á¥¢Âºï">3.2.1 ÂàõÂª∫Á¥¢Âºï
</h5><p><strong>Âü∫Êú¨ËØ≠Ê≥ï</strong></p>
<pre><code class="language-js">db.collection.createIndex(keys, options)

</code></pre>
<p>‚Äã	<strong>keys</strong>ÂèØÂÜô‰∏∫Ë¶ÅÈÖçÁΩÆÁ¥¢ÂºïÁöÑÂ≠óÊÆµÂ¶Ç{&ldquo;articleid&rdquo;:1},ÂÖ∂‰∏≠Ôºå1 ‰∏∫ÊåáÂÆöÊåâÂçáÂ∫èÂàõÂª∫Á¥¢ÂºïÔºåÂ¶ÇÊûú‰Ω†ÊÉ≥ÊåâÈôçÂ∫èÊù•ÂàõÂª∫Á¥¢ÂºïÊåáÂÆö‰∏∫ -1 Âç≥ÂèØ„ÄÇ‰ΩÜÊòØÂ≠óÊÆµ‰∏çËÉΩÊåáÂÆö‰∏∫_idÔºåÂõ†‰∏∫ËØ•Â≠óÊÆµÈªòËÆ§‰ºöÂàõÂª∫Á¥¢Âºï„ÄÇ</p>
<p>‚Äã	<strong>Ê≥®ÊÑè:</strong> <em>Ê≥®ÊÑèÂú® 3.0.0 ÁâàÊú¨ÂâçÂàõÂª∫Á¥¢ÂºïÊñπÊ≥ï‰∏∫ db.collection.ensureIndex()Ôºå‰πãÂêéÁöÑÁâàÊú¨‰ΩøÁî®‰∫Ü db.collection.createIndex() ÊñπÊ≥ïÔºåensureIndex() ËøòËÉΩÁî®Ôºå‰ΩÜÂè™ÊòØ createIndex() ÁöÑÂà´Âêç„ÄÇ</em></p>
<p>‚Äã	<strong>options</strong>Ë°®Á§∫ÂàõÂª∫Á¥¢ÂºïÊó∂ÁöÑËÆæÁΩÆÔºåËøô‰∏™Âú®Á¥¢ÂºïÂ±ûÊÄß‰∏≠ÂçïÁã¨ËØ¥ÊòéÔºö</p>
<p><strong>ex:</strong></p>
<pre><code class="language-js">//‰∏∫articleidÂ≠óÊÆµÂàõÂª∫ÂçáÂ∫èÁ¥¢Âºï
db.comment.createIndex({&quot;articleid&quot;:1})

</code></pre>
<p><strong>‰πüÂèØ‰ª•ÂàõÂª∫Â§ö‰∏™Â≠óÊÆµÁöÑËÅîÂêàÁ¥¢ÂºïÔºåÊØîÂ¶ÇÔºö</strong></p>
<pre><code class="language-js">//ÂàõÂª∫articleÂçáÂ∫èÂ≠óÊÆµÂíåuseridÈôçÂ∫èÂ≠óÊÆµÁöÑËÅîÂêàÁ¥¢Âºï
db.comment.createIndex({&quot;articleid&quot;:1,&quot;userid&quot;:-1})

</code></pre>
<p><strong>ËøôÁßçÁ¥¢ÂºïÂè™ÊîØÊåÅÔºö</strong></p>
<p>‚Äã	db.comment.find().sort({&ldquo;articleid&rdquo;:1,&ldquo;userid&rdquo;:-1})ÊàñËÄÖb.comment.find().sort({&ldquo;articleid&rdquo;:-1,&ldquo;userid&rdquo;:1})ÁöÑÊü•ËØ¢‰ΩøÁî®ËØ•Á¥¢ÂºïÔºåÂÖ∂‰ªñÊÉÖÂÜµÂ¶Çdb.comment.find().sort({&ldquo;articleid&rdquo;:1,&ldquo;userid&rdquo;:1})Âàô‰∏çËÉΩ‰ΩøÁî®ÔºåËøôÁßçÊÉÖÊôØÂíåÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑËÅîÂêàÁ¥¢ÂºïË°®Áé∞ÊòØ‰∏ÄËá¥ÁöÑ„ÄÇ ÊúâÂÖ≥ÊéíÂ∫èÈ°∫Â∫èÂíåÂ§çÂêàÁ¥¢ÂºïÁöÑÊõ¥Â§ö‰ø°ÊÅØÔºåËØ∑ÂèÇËßÅ <a class="link" href="https://docs.mongodb.com/manual/tutorial/sort-results-with-indexes/"  target="_blank" rel="noopener"
    >‰ΩøÁî®Á¥¢ÂºïÂØπÊü•ËØ¢ÁªìÊûúËøõË°åÊéíÂ∫è</a>„ÄÇ</p>
<h5 id="322-Êü•ÁúãÁ¥¢Âºï">3.2.2 Êü•ÁúãÁ¥¢Âºï
</h5><p>Êü•ÁúãÂΩìÂâçÊï∞ÊçÆÂ∫ì‰∏≠ËØ•ÈõÜÂêàÁöÑÊâÄÊúâÁ¥¢Âºï</p>
<pre><code class="language-js">db.comment.getIndexes()

</code></pre>
<p>ÊàñËÄÖ</p>
<pre><code class="language-js">db.comment.aggregate( [ { $indexStats: { } } ] )

</code></pre>
<h5 id="323-Âà†Èô§Á¥¢Âºï">3.2.3 Âà†Èô§Á¥¢Âºï
</h5><p>Âà†Èô§ÊâÄÊúâÁ¥¢Âºï</p>
<pre><code class="language-js">db.comment.dropIndexes() 

</code></pre>
<p>Âà†Èô§ÊåáÂÆöÁ¥¢Âºï</p>
<pre><code class="language-js">db.comment.dropIndex(Á¥¢ÂºïÂêçÁß∞)

</code></pre>
<h5 id="324-‰øÆÊîπÁ¥¢Âºï">3.2.4 ‰øÆÊîπÁ¥¢Âºï
</h5><p>Ë¶Å‰øÆÊîπÁé∞ÊúâÁ¥¢ÂºïÔºåÊÇ®ÈúÄË¶ÅÂà†Èô§Âπ∂ÈáçÊñ∞ÂàõÂª∫Á¥¢Âºï„ÄÇ<a class="link" href="https://docs.mongodb.com/manual/core/index-ttl/"  target="_blank" rel="noopener"
    >TTLÁ¥¢Âºï</a>ÊòØÊ≠§ËßÑÂàôÁöÑ‰æãÂ§ñ ÔºåÂèØ‰ª•ÈÄöËøá<a class="link" href="https://docs.mongodb.com/manual/reference/command/collMod/#dbcmd.collMod"  target="_blank" rel="noopener"
    ><code>collMod</code></a>ÂëΩ‰ª§‰∏é<a class="link" href="https://docs.mongodb.com/manual/reference/command/collMod/#index"  target="_blank" rel="noopener"
    ><code>index</code></a>Êî∂ÈõÜÊ†áÂøó‰∏ÄËµ∑ ‰øÆÊîπ<a class="link" href="https://docs.mongodb.com/manual/core/index-ttl/"  target="_blank" rel="noopener"
    >TTLÁ¥¢Âºï</a>„ÄÇ</p>
<h4 id="33-Á¥¢ÂºïÁ±ªÂûã">3.3 Á¥¢ÂºïÁ±ªÂûã
</h4><h5 id="ÊôÆÈÄöÁ¥¢Âºï-ËÅîÂêàÁ¥¢Âºï">ÊôÆÈÄöÁ¥¢Âºï, ËÅîÂêàÁ¥¢Âºï
</h5><p>Èô§‰∫Ü‰∏äÈù¢ËÆ≤Âà∞ÁöÑ<strong>ÊôÆÈÄöÁ¥¢Âºï</strong>‰ª•Âèä<strong>ËÅîÂêàÁ¥¢Âºï</strong>Â§ñËøòÊúâ‰ª•‰∏ãÁ±ªÂûãÔºö</p>
<h5 id="Â§öÈîÆÁ¥¢ÂºïÊï∞ÁªÑÁ¥¢Âºï">Â§öÈîÆÁ¥¢ÂºïÔºàÊï∞ÁªÑÁ¥¢ÂºïÔºâ
</h5><p>‚Äã	 MongoDB‰ΩøÁî®<a class="link" href="https://docs.mongodb.com/manual/core/index-multikey/"  target="_blank" rel="noopener"
    >Â§öÈîÆÁ¥¢Âºï</a>Êù•Á¥¢ÂºïÂ≠òÂÇ®Âú®Êï∞ÁªÑ‰∏≠ÁöÑÂÜÖÂÆπ„ÄÇÂ¶ÇÊûúÊÇ®ÂØπ‰øùÂ≠òÊï∞ÁªÑÂÄºÁöÑÂ≠óÊÆµÂª∫Á´ãÁ¥¢ÂºïÔºåÂàôMongoDBÂ∞Ü‰∏∫Êï∞ÁªÑÁöÑ<em>ÊØè‰∏™</em>ÂÖÉÁ¥†ÂàõÂª∫ÂçïÁã¨ÁöÑÁ¥¢ÂºïkeyÈîÆ„ÄÇËøô‰∫õ<a class="link" href="https://docs.mongodb.com/manual/core/index-multikey/"  target="_blank" rel="noopener"
    >Â§öÈîÆÁ¥¢Âºï</a>ÂÖÅËÆ∏Êü•ËØ¢ÈÄöËøáÂåπÈÖçÊï∞ÁªÑÁöÑ‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂÖÉÁ¥†Êù•ÈÄâÊã©ÂåÖÂê´Êï∞ÁªÑÁöÑÊñáÊ°£„ÄÇÂ¶ÇÊûúÁ¥¢ÂºïÂ≠óÊÆµÂåÖÂê´Êï∞ÁªÑÂÄºÔºåMongoDB‰ºöËá™Âä®Á°ÆÂÆöÊòØÂê¶ÂàõÂª∫Â§öÈîÆÁ¥¢Âºï„ÄÇÊÇ®Êó†ÈúÄÊòæÂºèÊåáÂÆöÂ§öÈîÆÁ±ªÂûã„ÄÇ</p>
<p>exÔºöÂèØ‰ª•ÁúãÂà∞tagsÂ≠óÊÆµÊòØ‰∏Ä‰∏™Êï∞ÁªÑÔºåÂèØ‰ª•Âª∫Á´ãÊï∞ÁªÑÁ¥¢Âºï</p>
<pre><code class="language-js">//ÊâÄÊúâÊñáÊ°£‰∏≠ÁöÑÊâÄÊúâÂÖÉÁ¥†Â≠óÊÆµÈÉΩ‰Ωú‰∏∫ËØ•Á¥¢ÂºïÁöÑkey
db.comment.createIndex({&quot;tags&quot;:1})

</code></pre>
<p>‚Äã	Â¶ÇÊûúËØ•Â≠óÊÆµÊòØ‰∏Ä‰∏™ÂØπË±°Êï∞ÁªÑÔºåÂèØ‰ª•Âª∫Á´ã</p>
<pre><code class="language-js">//ÂØπÊñáÊ°£‰∏≠ÁöÑtupuserÂ≠óÊÆµÁöÑageÂ±ûÊÄßÂª∫Á´ãÁ¥¢Âºï
db.comment.createIndex({&quot;tupuser.age&quot;:1})

</code></pre>
<p>‚Äã	Êü•ËØ¢ÁÇπËµûÁî®Êà∑Âπ¥ÈæÑË∂ÖËøá30Â≤ÅÁöÑËØÑËÆ∫</p>
<pre><code class="language-js">db.comment.find({&quot;tupuser.age&quot;:{$gt:30}}).explain()

</code></pre>
<p>‚Äã	ÂèëÁé∞ËØ•Á¥¢ÂºïÂ∑≤ÁªèÁîüÊïà‰∫Ü</p>
<h5 id="ÊñáÊú¨Á¥¢Âºï">ÊñáÊú¨Á¥¢Âºï
</h5><p>‚Äã	MongoDBÊèê‰æõ‰∫Ü‰∏ÄÁßç<code>text</code>Á¥¢ÂºïÁ±ªÂûãÔºåËØ•Á±ªÂûãÊîØÊåÅÂú®ÈõÜÂêà‰∏≠ÊêúÁ¥¢Â≠óÁ¨¶‰∏≤ÂÜÖÂÆπ„ÄÇËøô‰∫õÊñáÊú¨Á¥¢Âºï‰∏çÂ≠òÂÇ®ÁâπÂÆö‰∫éËØ≠Ë®ÄÁöÑ<em>ÂÅúÁî®</em>ËØçÔºà‰æãÂ¶Ç‚Äú the‚ÄùÔºå‚Äú a‚ÄùÔºå‚Äú or‚ÄùÔºâÔºåÂπ∂‰∏îÂú®ÈõÜÂêà‰∏≠<em>ËØçÂπ≤</em>‰ªÖÂ≠òÂÇ®Ê†πËØç„ÄÇÊúâÂÖ≥<a class="link" href="https://docs.mongodb.com/manual/core/index-text/"  target="_blank" rel="noopener"
    >ÊñáÊú¨</a>Á¥¢ÂºïÂíåÊêúÁ¥¢ÁöÑÊõ¥Â§ö‰ø°ÊÅØÔºåËØ∑ÂèÇËßÅ<a class="link" href="https://docs.mongodb.com/manual/core/index-text/"  target="_blank" rel="noopener"
    >ÊñáÊú¨Á¥¢Âºï</a>„ÄÇ <strong>‰∏Ä‰∏™ÈõÜÂêàÊúÄÂ§öÂèØ‰ª•Êúâ‰∏Ä‰∏™ÊñáÊú¨Á¥¢Âºï</strong></p>
<pre><code class="language-js">//‰∏∫usernameÂíåcontentÂ≠óÊÆµÂàõÂª∫ÊñáÊú¨Á¥¢Âºï
db.comment.createIndex(
   {
     username: &quot;text&quot;,
     content: &quot;text&quot;
   }
 )
//ÊñáÊú¨Êü•ËØ¢Âçï‰∏™ËØçÊù°
db.comment.find({$text:{$search:&quot;Âá∫Èîô&quot;}})
//ÊñáÊú¨Êü•ËØ¢Â§ö‰∏™ËØçÊù°
db.comment.find({$text:{$search:&quot;Âá∫Èîô Êùé&quot;}})

</code></pre>
<p>‚Äã	ÂèØ‰ª•ÁúãÂà∞mongoÁöÑÂÖ®ÊñáÁ¥¢ÂºïÂª∫Á´ãÊñπÂºè‰∏éËã±ÊñáÁöÑÊñπÂºèÂü∫Êú¨‰∏ÄÊ†∑ÔºåÊòØÊ†πÊçÆËØçÔºàËã±ÊñáÂçïËØçÔºâÁöÑÊñπÂºèÂª∫Á´ãÁöÑÔºå Â¶ÇÊûú‰∏Ä‰∏™ÊñáÊú¨ÈáåÈù¢ÊúâÂ§ö‰∏™ËØçÊù°Ôºå ÂàôÈúÄË¶ÅÊåâÁ©∫Ê†ºÊñπÂºèÈöîÂºÄÔºåÊâÄ‰ª•Á¥¢ÂºïÊïàÁéáÊØîËæÉ‰ΩéÔºåÊÉ≥Ë¶ÅÂÆûÁé∞‰∏≠ÊñáÊ®°Á≥äÊêúÁ¥†ÔºåÂèØ‰ª•Áî®elasticsearchÊàñËÄÖSphinxÔºåÊàñËÄÖlucene „ÄÇ</p>
<h5 id="ÂìàÂ∏åÁ¥¢Âºï">ÂìàÂ∏åÁ¥¢Âºï
</h5><p>‰∏∫‰∫ÜÊîØÊåÅ<a class="link" href="https://docs.mongodb.com/manual/core/hashed-sharding/#sharding-hashed-sharding"  target="_blank" rel="noopener"
    >Âü∫‰∫éÊï£ÂàóÁöÑÂàÜÁâá</a>ÔºåMongoDBÊèê‰æõ‰∫Ü‰∏ÄÁßç<a class="link" href="https://docs.mongodb.com/manual/core/index-hashed/"  target="_blank" rel="noopener"
    >Êï£ÂàóÁ¥¢Âºï</a>Á±ªÂûãÔºåËØ•Á¥¢ÂºïÁ±ªÂûãÂØπÂ≠óÊÆµÂÄºÁöÑÊï£ÂàóËøõË°åÁ¥¢Âºï„ÄÇËøô‰∫õÁ¥¢ÂºïÂú®ÂÖ∂ËåÉÂõ¥ÂÜÖÂÖ∑ÊúâÊõ¥ÈöèÊú∫ÁöÑÂÄºÂàÜÂ∏ÉÔºå‰ΩÜ<em>‰ªÖ</em> ÊîØÊåÅÁõ∏Á≠âÂåπÈÖçÔºåËÄå‰∏çËÉΩÊîØÊåÅÂü∫‰∫éËåÉÂõ¥ÁöÑÊü•ËØ¢„ÄÇ</p>
<pre><code class="language-js">//‰∏∫articleidÂ≠óÊÆµÂàõÂª∫hashÁ¥¢Âºï
db.comment.createIndex({&quot;userid&quot;:&quot;hashed&quot;})

</code></pre>
<h4 id="34-Á¥¢ÂºïÂ±ûÊÄß">3.4 Á¥¢ÂºïÂ±ûÊÄß
</h4><p>‚Äã	 Á¥¢ÂºïÂ±ûÊÄßÂèÇÊï∞ÂàóË°®Ôºö</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">Parameter</th>
          <th style="text-align: left">Type</th>
          <th style="text-align: left">Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">background</td>
          <td style="text-align: left">Boolean</td>
          <td style="text-align: left">Âª∫Á¥¢ÂºïËøáÁ®ã‰ºöÈòªÂ°ûÂÖ∂ÂÆÉÊï∞ÊçÆÂ∫ìÊìç‰ΩúÔºåbackgroundÂèØÊåáÂÆö‰ª•ÂêéÂè∞ÊñπÂºèÂàõÂª∫Á¥¢ÂºïÔºåÂç≥Â¢ûÂä† &ldquo;background&rdquo; ÂèØÈÄâÂèÇÊï∞„ÄÇ &ldquo;background&rdquo; ÈªòËÆ§ÂÄº‰∏∫<strong>false</strong>„ÄÇ</td>
      </tr>
      <tr>
          <td style="text-align: left">unique</td>
          <td style="text-align: left">Boolean</td>
          <td style="text-align: left">Âª∫Á´ãÁöÑÁ¥¢ÂºïÊòØÂê¶ÂîØ‰∏Ä„ÄÇÊåáÂÆö‰∏∫trueÂàõÂª∫ÂîØ‰∏ÄÁ¥¢Âºï„ÄÇÈªòËÆ§ÂÄº‰∏∫<strong>false</strong>.</td>
      </tr>
      <tr>
          <td style="text-align: left">name</td>
          <td style="text-align: left">string</td>
          <td style="text-align: left">Á¥¢ÂºïÁöÑÂêçÁß∞„ÄÇÂ¶ÇÊûúÊú™ÊåáÂÆöÔºåMongoDBÁöÑÈÄöËøáËøûÊé•Á¥¢ÂºïÁöÑÂ≠óÊÆµÂêçÂíåÊéíÂ∫èÈ°∫Â∫èÁîüÊàê‰∏Ä‰∏™Á¥¢ÂºïÂêçÁß∞„ÄÇ</td>
      </tr>
      <tr>
          <td style="text-align: left">dropDups</td>
          <td style="text-align: left">Boolean</td>
          <td style="text-align: left">**3.0+ÁâàÊú¨Â∑≤Â∫üÂºÉ„ÄÇ**Âú®Âª∫Á´ãÂîØ‰∏ÄÁ¥¢ÂºïÊó∂ÊòØÂê¶Âà†Èô§ÈáçÂ§çËÆ∞ÂΩï,ÊåáÂÆö true ÂàõÂª∫ÂîØ‰∏ÄÁ¥¢Âºï„ÄÇÈªòËÆ§ÂÄº‰∏∫ <strong>false</strong>.</td>
      </tr>
      <tr>
          <td style="text-align: left">sparse</td>
          <td style="text-align: left">Boolean</td>
          <td style="text-align: left">ÂØπÊñáÊ°£‰∏≠‰∏çÂ≠òÂú®ÁöÑÂ≠óÊÆµÊï∞ÊçÆ‰∏çÂêØÁî®Á¥¢ÂºïÔºõËøô‰∏™ÂèÇÊï∞ÈúÄË¶ÅÁâπÂà´Ê≥®ÊÑèÔºåÂ¶ÇÊûúËÆæÁΩÆ‰∏∫trueÁöÑËØùÔºåÂú®Á¥¢ÂºïÂ≠óÊÆµ‰∏≠‰∏ç‰ºöÊü•ËØ¢Âá∫‰∏çÂåÖÂê´ÂØπÂ∫îÂ≠óÊÆµÁöÑÊñáÊ°£.„ÄÇÈªòËÆ§ÂÄº‰∏∫ <strong>false</strong>.</td>
      </tr>
      <tr>
          <td style="text-align: left">expireAfterSeconds</td>
          <td style="text-align: left">integer</td>
          <td style="text-align: left">ÊåáÂÆö‰∏Ä‰∏™‰ª•Áßí‰∏∫Âçï‰ΩçÁöÑÊï∞ÂÄºÔºåÂÆåÊàê TTLËÆæÂÆöÔºåËÆæÂÆöÈõÜÂêàÁöÑÁîüÂ≠òÊó∂Èó¥„ÄÇ</td>
      </tr>
      <tr>
          <td style="text-align: left">v</td>
          <td style="text-align: left">index version</td>
          <td style="text-align: left">Á¥¢ÂºïÁöÑÁâàÊú¨Âè∑„ÄÇÈªòËÆ§ÁöÑÁ¥¢ÂºïÁâàÊú¨ÂèñÂÜ≥‰∫émongodÂàõÂª∫Á¥¢ÂºïÊó∂ËøêË°åÁöÑÁâàÊú¨„ÄÇ</td>
      </tr>
      <tr>
          <td style="text-align: left">weights</td>
          <td style="text-align: left">document</td>
          <td style="text-align: left">Á¥¢ÂºïÊùÉÈáçÂÄºÔºåÊï∞ÂÄºÂú® 1 Âà∞ 99,999 ‰πãÈó¥ÔºåË°®Á§∫ËØ•Á¥¢ÂºïÁõ∏ÂØπ‰∫éÂÖ∂‰ªñÁ¥¢ÂºïÂ≠óÊÆµÁöÑÂæóÂàÜÊùÉÈáç„ÄÇ</td>
      </tr>
      <tr>
          <td style="text-align: left">default_language</td>
          <td style="text-align: left">string</td>
          <td style="text-align: left">ÂØπ‰∫éÊñáÊú¨Á¥¢ÂºïÔºåËØ•ÂèÇÊï∞ÂÜ≥ÂÆö‰∫ÜÂÅúÁî®ËØçÂèäËØçÂπ≤ÂíåËØçÂô®ÁöÑËßÑÂàôÁöÑÂàóË°®„ÄÇ ÈªòËÆ§‰∏∫Ëã±ËØ≠</td>
      </tr>
      <tr>
          <td style="text-align: left">language_override</td>
          <td style="text-align: left">string</td>
          <td style="text-align: left">ÂØπ‰∫éÊñáÊú¨Á¥¢ÂºïÔºåËØ•ÂèÇÊï∞ÊåáÂÆö‰∫ÜÂåÖÂê´Âú®ÊñáÊ°£‰∏≠ÁöÑÂ≠óÊÆµÂêçÔºåËØ≠Ë®ÄË¶ÜÁõñÈªòËÆ§ÁöÑlanguageÔºåÈªòËÆ§ÂÄº‰∏∫ language.</td>
      </tr>
  </tbody>
</table></div>
<h5 id="ÂîØ‰∏ÄÁ¥¢Âºï">ÂîØ‰∏ÄÁ¥¢Âºï
</h5><p>ÂîØ‰∏ÄÁ¥¢ÂºïÂèØÁ°Æ‰øùÁ¥¢ÂºïÂ≠óÊÆµ‰∏ç‰ºöÂ≠òÂÇ®ÈáçÂ§çÂÄºÔºõÂç≥ÂØπÁ¥¢ÂºïÂ≠óÊÆµÂÆûÊñΩÂîØ‰∏ÄÊÄß„ÄÇÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºå Âú®ÂàõÂª∫ÈõÜÂêàÊúüÈó¥ÔºåMongoDBÂú®<a class="link" href="https://docs.mongodb.com/manual/core/document/#document-id-field"  target="_blank" rel="noopener"
    >_id</a>Â≠óÊÆµ‰∏äÂàõÂª∫ÂîØ‰∏ÄÁ¥¢Âºï„ÄÇ</p>
<pre><code class="language-js">//ÂàõÂª∫articleidÂ≠óÊÆµÁöÑÂîØ‰∏ÄÁ¥¢Âºï
db.comment.createIndex({&quot;articleid&quot;:1},{ unique: true })

</code></pre>
<p>Âíåmysql‰∏ÄÊ†∑ÔºåÂ§çÂêàÁ¥¢Âºï‰πüÂèØÂàõÂª∫‰∏∫ÂîØ‰∏ÄÁ¥¢Âºï</p>
<h5 id="ÈÉ®ÂàÜÁ¥¢Âºï">ÈÉ®ÂàÜÁ¥¢Âºï
</h5><p><em>3.2Áâà‰∏≠ÁöÑÊñ∞ÂäüËÉΩ„ÄÇ</em></p>
<p><a class="link" href="https://docs.mongodb.com/manual/core/index-partial/"  target="_blank" rel="noopener"
    >ÈÉ®ÂàÜÁ¥¢Âºï</a>‰ªÖÁ¥¢ÂºïÈõÜÂêà‰∏≠Á¨¶ÂêàÊåáÂÆöËøáÊª§Âô®Ë°®ËææÂºèÁöÑÊñáÊ°£„ÄÇÈÄöËøáÁ¥¢ÂºïÈõÜÂêà‰∏≠ÊñáÊ°£ÁöÑÂ≠êÈõÜÔºåÈÉ®ÂàÜÁ¥¢ÂºïÂÖ∑ÊúâËæÉ‰ΩéÁöÑÂ≠òÂÇ®ÈúÄÊ±ÇÔºåÂπ∂Èôç‰Ωé‰∫ÜÁ¥¢ÂºïÂàõÂª∫ÂíåÁª¥Êä§ÁöÑÊÄßËÉΩÊàêÊú¨„ÄÇ</p>
<p>Ë¶ÅÂàõÂª∫ÈÉ®ÂàÜÁ¥¢ÂºïÔºåËØ∑Â∞ÜËØ• <a class="link" href="https://docs.mongodb.com/manual/reference/method/db.collection.createIndex/#db.collection.createIndex"  target="_blank" rel="noopener"
    ><code>db.collection.createIndex()</code></a>ÊñπÊ≥ï‰∏é <code>partialFilterExpression</code>ÈÄâÈ°π‰∏ÄËµ∑‰ΩøÁî®„ÄÇËØ•<code>partialFilterExpression</code> ÈÄâÈ°πÊé•Âèó‰ΩøÁî®‰ª•‰∏ãÂëΩ‰ª§ÊåáÂÆöËøáÊª§Êù°‰ª∂ÁöÑÊñáÊ°£</p>
<ul>
<li>Á≠âÂºèË°®ËææÂºèÔºàÂç≥Êàñ‰ΩøÁî® ËøêÁÆóÁ¨¶ÔºâÔºå<code>field: value</code><a class="link" href="https://docs.mongodb.com/manual/reference/operator/query/eq/#op._S_eq"  target="_blank" rel="noopener"
    ><code>$eq</code></a></li>
<li><a class="link" href="https://docs.mongodb.com/manual/reference/operator/query/exists/#op._S_exists"  target="_blank" rel="noopener"
    ><code>$exists: true</code></a> Ë°®ËææÔºå</li>
<li><a class="link" href="https://docs.mongodb.com/manual/reference/operator/query/gt/#op._S_gt"  target="_blank" rel="noopener"
    ><code>$gt</code></a>Ôºå<a class="link" href="https://docs.mongodb.com/manual/reference/operator/query/gte/#op._S_gte"  target="_blank" rel="noopener"
    ><code>$gte</code></a>Ôºå<a class="link" href="https://docs.mongodb.com/manual/reference/operator/query/lt/#op._S_lt"  target="_blank" rel="noopener"
    ><code>$lt</code></a>Ôºå<a class="link" href="https://docs.mongodb.com/manual/reference/operator/query/lte/#op._S_lte"  target="_blank" rel="noopener"
    ><code>$lte</code></a>Ë°®ÊÉÖÔºå</li>
<li><a class="link" href="https://docs.mongodb.com/manual/reference/operator/query/type/#op._S_type"  target="_blank" rel="noopener"
    ><code>$type</code></a> Ë°®ËææÂºèÔºå</li>
<li><a class="link" href="https://docs.mongodb.com/manual/reference/operator/query/and/#op._S_and"  target="_blank" rel="noopener"
    ><code>$and</code></a> ‰ªÖÈôêÈ°∂Á∫ßËøêËê•ÂïÜ</li>
</ul>
<p>ex:Âè™ÁªôËØ•ÈõÜÂêàÁÇπËµûÊï∞Â§ß‰∫é900ÁöÑËØÑËÆ∫ÁöÑthumbupÂ≠óÊÆµÂàõÂª∫Á¥¢Âºï</p>
<pre><code class="language-js">db.comment.createIndex(
   { thumbup: 1},
   { partialFilterExpression: { thumbup: { $gt: 900 } } }
) 

</code></pre>
<p>ÈÉ®ÂàÜÁ¥¢ÂºïÊèê‰æõ‰∫ÜÁ®ÄÁñèÁ¥¢ÂºïÂäüËÉΩÁöÑË∂ÖÈõÜÔºåÂ∫î‰ºòÂÖà‰∫éÁ®ÄÁñèÁ¥¢Âºï„ÄÇ</p>
<h5 id="Á®ÄÁñèÁ¥¢Âºï">Á®ÄÁñèÁ¥¢Âºï
</h5><p>Á®ÄÁñèÁ¥¢Âºï‰ªÖÂåÖÂê´ÂÖ∑ÊúâÁ¥¢ÂºïÂ≠óÊÆµÁöÑÊñáÊ°£Êù°ÁõÆÔºåÂç≥‰ΩøÁ¥¢ÂºïÂ≠óÊÆµÂåÖÂê´Á©∫ÂÄº‰πüÊòØÂ¶ÇÊ≠§„ÄÇÁ¥¢Âºï‰ºöË∑≥ËøáÁº∫Â∞ëÁ¥¢ÂºïÂ≠óÊÆµÁöÑÊâÄÊúâÊñáÊ°£„ÄÇÁ¥¢ÂºïÊòØ‚ÄúÁ®ÄÁñèÁöÑ‚ÄùÔºåÂõ†‰∏∫ÂÆÉ‰∏çÂåÖÊã¨ÈõÜÂêàÁöÑÊâÄÊúâÊñáÊ°£„ÄÇÁõ∏ÊØî‰πã‰∏ãÔºåÈùûÁ®ÄÁñèÁ¥¢ÂºïÂåÖÂê´ÈõÜÂêà‰∏≠ÁöÑÊâÄÊúâÊñáÊ°£Ôºå‰∏∫ÈÇ£‰∫õ‰∏çÂåÖÂê´Á¥¢ÂºïÂ≠óÊÆµÁöÑÊñáÊ°£Â≠òÂÇ®Á©∫ÂÄº„ÄÇ Â∞ÜsparseÂ±ûÊÄßËÆæÁΩÆ‰∏∫trueÂç≥‰∏∫Á®ÄÁñèÁ¥¢Âºï</p>
<pre><code class="language-js">//ÊèíÂÖ•‰∏ÄÊù°Ê≤°ÊúâtagsÂ≠óÊÆµÁöÑÁ¥¢Âºï
db.comment.insert({_id:&quot;6&quot;,content:&quot;Ëøô‰∏™ÊâãÊú∫Â•Ω&quot;,username:&quot;È£éÊ∏ÖÊâ¨&quot;,userid:&quot;1014&quot;,thumbup:123,tupuser:[{name:&quot;ÊùéÂÖ≠&quot;,sex:&quot;Áî∑&quot;,age:39},{name:&quot;Êùé‰∏É&quot;,sex:&quot;Áî∑&quot;,age:62}],lastModifiedDate:new Date()});
//Âà†Èô§ÂéütagsÁ¥¢Âºï
db.comment.dropIndex(&quot;tags_1&quot;)
//ÂàõÂª∫tagsÂ≠óÊÆµÁöÑÁ®ÄÁñèÁ¥¢Âºï
db.comment.createIndex({tags: 1},{ sparse: true })

</code></pre>
<h5 id="ttlÊåáÊï∞">TTLÊåáÊï∞
</h5><p>TTLÁ¥¢ÂºïÊòØÁâπÊÆäÁöÑÂçïÂ≠óÊÆµÁ¥¢ÂºïÔºåMongoDBÂèØ‰ª•‰ΩøÁî®ÂÆÉ‰ª¨Âú®‰∏ÄÂÆöÊó∂Èó¥ÂêéÊàñÂú®ÁâπÂÆöÊó∂ÈíüÊó∂Èó¥Ëá™Âä®‰ªéÈõÜÂêà‰∏≠Âà†Èô§ÊñáÊ°£„ÄÇÊï∞ÊçÆÂà∞ÊúüÂØπ‰∫éÊüê‰∫õÁ±ªÂûãÁöÑ‰ø°ÊÅØÂæàÊúâÁî®Ôºå‰æãÂ¶ÇÊú∫Âô®ÁîüÊàêÁöÑ‰∫ã‰ª∂Êï∞ÊçÆÔºåÊó•ÂøóÂíå‰ºöËØù‰ø°ÊÅØÔºåÂÆÉ‰ª¨‰ªÖÈúÄË¶ÅÂú®Êï∞ÊçÆÂ∫ì‰∏≠‰øùÁïôÊúâÈôêÁöÑÊó∂Èó¥„ÄÇ</p>
<p>Ë¶ÅÂàõÂª∫TTLÁ¥¢ÂºïÔºåËØ∑Â∞ÜËØ•<a class="link" href="https://docs.mongodb.com/manual/reference/method/db.collection.createIndex/#db.collection.createIndex"  target="_blank" rel="noopener"
    ><code>db.collection.createIndex()</code></a> ÊñπÊ≥ï‰∏é<code>expireAfterSeconds</code>ÈÄâÈ°πÁªìÂêà‰ΩøÁî®ÔºåËØ•ÊñπÊ≥ïÁöÑÂÄºÔºàÁ¥¢ÂºïÂ≠óÊÆµÁ±ªÂûãÔºâÊòØ<a class="link" href="https://docs.mongodb.com/manual/reference/bson-types/#document-bson-type-date"  target="_blank" rel="noopener"
    >Êó•Êúü</a>ÊàñÂåÖÂê´<a class="link" href="https://docs.mongodb.com/manual/reference/bson-types/#document-bson-type-date"  target="_blank" rel="noopener"
    >Êó•ÊúüÂÄº</a>ÁöÑÊï∞ÁªÑ„ÄÇex:</p>
<pre><code class="language-js">//ÂΩìÂâçÊó∂Èó¥Â¶ÇÊûúÂú®lastModifiedDateÁöÑ10s‰πãÂêéÔºåÂàôÊ†áËÆ∞ËØ•ÊñáÊ°£ËøáÊúü
db.comment.createIndex({&quot;lastModifiedDate&quot;:1},{expireAfterSeconds:10})

</code></pre>
<p>mongoÂêéÂè∞ÁöÑTTLÁ∫øÁ®ã‰ºöÊØèÈöî60sÂà†Èô§‰∏ÄÊ¨°Ë¢´ttlÁ¥¢ÂºïÊ†áËÆ∞‰∏∫ËøáÊúüÁöÑÊñáÊ°£</p>
<h4 id="35-Á¥¢ÂºïÂàÜÊûê">3.5 Á¥¢ÂºïÂàÜÊûê
</h4><pre><code class="language-js">//ÂØπÊü•ËØ¢ËøõË°åÂàÜÊûê
db.comment.find().explain()

</code></pre>
<ul>
<li>
<p>‰ΩúÁî®ÂíåmysqlÁöÑexplainÂÖ≥ÈîÆÂ≠ó‰∏ÄÊ†∑ÈÉΩÊòØÁî®Êù•ÂàÜÊûêÊâßË°åËÆ°ÂàíÁöÑ</p>
</li>
<li>
<p>queryPlannerÔºöÊâßË°åËÆ°Âàí</p>
<ul>
<li>winningPlanÔºöÁ´û‰∫âÊàêÂäüÁöÑËÆ°Âàí
<ul>
<li>Â¶ÇÊûúËØ•ËÆ°Âàí‰ΩøÁî®‰∫ÜÁ¥¢ÂºïÔºå‰ºöÊúâ‰ª•‰∏ãÂèÇÊï∞
<ul>
<li>indexNameÔºöÁ¥¢ÂºïÂêçÁß∞</li>
<li>isMultiKeyÔºöÊòØÂê¶‰∏∫Â§öÈîÆÁ¥¢Âºï</li>
<li>isUniqueÔºöÊòØÂê¶ÂîØ‰∏ÄÁ¥¢Âºï</li>
<li>isSparseÔºöÊòØÂê¶ÊòØÁ®ÄÁñèÁ¥¢Âºï</li>
<li>isPartialÔºöÊòØÂê¶ÊòØÈÉ®ÂàÜÁ¥¢Âºï</li>
</ul>
</li>
<li>Â¶ÇÊûúÊ≤°Êúâ‰ª•‰∏äÂèÇÊï∞ÔºåË°®Á§∫Ê≤°Êúâ‰ΩøÁî®Á¥¢Âºï</li>
</ul>
</li>
<li>rejectedPlansÔºöÁ´û‰∫âÂ§±Ë¥•ÁöÑËÆ°Âàí</li>
</ul>
</li>
</ul>
<h3 id="4ÊÄªÁªì">4.ÊÄªÁªì
</h3><h2 id="Áü•ËØÜÁÇπ-mongoÈõÜÁæ§Êê≠Âª∫">Áü•ËØÜÁÇπ-mongoÈõÜÁæ§Êê≠Âª∫	
</h2><h3 id="1ÁõÆÊ†á-4">1.ÁõÆÊ†á
</h3><ul>
<li>‰∫ÜËß£ÈõÜÁæ§ÂéüÁêÜÔºåËÉΩÂ§üÊê≠Âª∫Âá∫ÂàÜÁâáÈõÜÁæ§</li>
</ul>
<p>Êü•ÁúãÈõÜÁæ§Áä∂ÊÄÅ</p>
<pre><code>db.stats()

</code></pre>
<h3 id="2Ë∑ØÂæÑ-4">2.Ë∑ØÂæÑ
</h3><h3 id="3ËÆ≤Ëß£-4">3.ËÆ≤Ëß£
</h3><h4 id="31-ÈõÜÁæ§ÁÆÄ‰ªã">3.1 ÈõÜÁæ§ÁÆÄ‰ªã
</h4><p>‚Äã		mongodbÈõÜÁæ§Êê≠Âª∫ÊñπÂºèÊúâ‰∏âÁßçÔºå1„ÄÅ‰∏ª‰ªé(ÂÆòÊñπÂ∑≤Áªè‰∏çÊé®Ëçê)Ôºå2„ÄÅÂâØÊú¨ÈõÜÔºå3„ÄÅÂàÜÁâá„ÄÇËøôÈáå‰ªãÁªçÂ¶Ç‰ΩïÈÄöËøáÂàÜÁâáshardingÊñπÂºèÊê≠Âª∫mongodbÈõÜÁæ§„ÄÇshardingÈõÜÁæ§ÊñπÂºè‰πüÂü∫‰∫éÂâØÊú¨ÈõÜÔºåÂú®Êê≠Âª∫ËøáÁ®ã‰∏≠ÔºåÈúÄË¶ÅÂØπÂàÜÁâáÂíåÈÖçÁΩÆËäÇÁÇπÂÅöÂâØÊú¨ÈõÜ„ÄÇÊúÄÂêéÂ∞ÜÂÅöÂ•ΩÁöÑÂâØÊú¨ÈõÜÁöÑÂàÜÁâáÂä†ÂÖ•Âà∞Ë∑ØÁî±ËäÇÁÇπÔºåÊûÑÊàêÈõÜÁæ§„ÄÇ</p>
<h4 id="32-ÂâØÊú¨ÈõÜ">3.2 ÂâØÊú¨ÈõÜ
</h4><h5 id="321ÂâØÊú¨ÈõÜËßíËâ≤">3.2.1ÂâØÊú¨ÈõÜËßíËâ≤
</h5><ol>
<li>‰∏ªËäÇÁÇπÔºàPrimaryÔºâ
Êé•Êî∂ÊâÄÊúâÁöÑÂÜôËØ∑Ê±ÇÔºåÁÑ∂ÂêéÊää‰øÆÊîπÂêåÊ≠•Âà∞ÊâÄÊúâSecondary„ÄÇ‰∏Ä‰∏™Replica SetÂè™ËÉΩÊúâ‰∏Ä‰∏™PrimaryËäÇÁÇπÔºåÂΩìPrimaryÊåÇÊéâÂêéÔºåÂÖ∂‰ªñSecondaryÊàñËÄÖArbiterËäÇÁÇπ‰ºöÈáçÊñ∞ÈÄâ‰∏æÂá∫Êù•‰∏Ä‰∏™‰∏ªËäÇÁÇπ„ÄÇ
ÈªòËÆ§ËØªËØ∑Ê±Ç‰πüÊòØÂèëÂà∞PrimaryËäÇÁÇπÂ§ÑÁêÜÁöÑÔºåÂèØ‰ª•ÈÄöËøá‰øÆÊîπÂÆ¢Êà∑Á´ØËøûÊé•ÈÖçÁΩÆ‰ª•ÊîØÊåÅËØªÂèñSecondaryËäÇÁÇπ„ÄÇ</li>
<li>ÂâØÊú¨ËäÇÁÇπÔºàSecondaryÔºâ
‰∏é‰∏ªËäÇÁÇπ‰øùÊåÅÂêåÊ†∑ÁöÑÊï∞ÊçÆÈõÜ„ÄÇÂΩì‰∏ªËäÇÁÇπÊåÇÊéâÁöÑÊó∂ÂÄôÔºåÂèÇ‰∏éÈÄâ‰∏ª„ÄÇ</li>
<li>‰ª≤Ë£ÅËÄÖÔºàArbiterÔºâ
‰∏ç‰øùÊúâÊï∞ÊçÆÔºå‰∏çÂèÇ‰∏éÈÄâ‰∏ªÔºåÂè™ËøõË°åÈÄâ‰∏ªÊäïÁ•®„ÄÇ‰ΩøÁî®ArbiterÂèØ‰ª•ÂáèËΩªÊï∞ÊçÆÂ≠òÂÇ®ÁöÑÁ°¨‰ª∂ÈúÄÊ±ÇÔºåArbiterÂá†‰πéÊ≤°‰ªÄ‰πàÂ§ßÁöÑÁ°¨‰ª∂ËµÑÊ∫êÈúÄÊ±ÇÔºå‰ΩÜÈáçË¶ÅÁöÑ‰∏ÄÁÇπÊòØÔºåÂú®Áîü‰∫ßÁéØÂ¢É‰∏ãÂÆÉÂíåÂÖ∂‰ªñÊï∞ÊçÆËäÇÁÇπ‰∏çË¶ÅÈÉ®ÁΩ≤Âú®Âêå‰∏ÄÂè∞Êú∫Âô®‰∏ä„ÄÇ</li>
</ol>
<h5 id="322-‰∏§ÁßçÊû∂ÊûÑÊ®°Âºè">3.2.2 ‰∏§ÁßçÊû∂ÊûÑÊ®°Âºè
</h5><ol>
<li>PSS
Primary + Secondary + SecondaryÊ®°ÂºèÔºåÈÄöËøáPrimaryÂíåSecondaryÊê≠Âª∫ÁöÑReplica Set
Diagram of a 3 member replica set that consists of a primary and two secondaries.</li>
</ol>
<p><img src="/p/mongodb/images/242916-20180313214807697-1361550290.png"
	width="740"
	height="280"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="264"
		data-flex-basis="634px"
	
></p>
<p>ËØ•Ê®°Âºè‰∏ã Replica SetËäÇÁÇπÊï∞ÂøÖÈ°ª‰∏∫Â•áÊï∞ÔºåÁõÆÁöÑÊòØÈÄâ‰∏ªÊäïÁ•®ÁöÑÊó∂ÂÄôË¶ÅÂá∫Áé∞<strong>Â§ßÂ§öÊï∞</strong>ÊâçËÉΩËøõË°åÈÄâ‰∏ªÂÜ≥Á≠ñ„ÄÇ</p>
<ol>
<li>PSA
Primary + Secondary + ArbiterÊ®°ÂºèÔºå‰ΩøÁî®ArbiterÊê≠Âª∫Replica Set</li>
</ol>
<p><img src="/p/mongodb/images/242916-20180313214821963-1134366100.png"
	width="700"
	height="265"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="264"
		data-flex-basis="633px"
	
></p>
<p>ÂÅ∂Êï∞‰∏™Êï∞ÊçÆËäÇÁÇπÔºåÂä†‰∏Ä‰∏™ArbiterÊûÑÊàêÁöÑReplica Set</p>
<h4 id="33-ÂàÜÁâá">3.3 ÂàÜÁâá
</h4><p>shardingÊñπÂºèÁöÑÈõÜÁæ§‰∏≠ÔºåÊúâ‰∏âÁ±ªËßíËâ≤ÔºåÂàÜÂà´ÊòØshardÔºå config serversÔºårouterÔºàmongosÔºâ„ÄÇÂ¶Ç‰∏ãÂõæÊâÄÁ§∫„ÄÇ</p>
<p>‚Äã	<img src="/p/mongodb/images/sharded-cluster-production-architecture.bakedsvg.svg"
	
	
	
	loading="lazy"
	
	
></p>
<ul>
<li><a class="link" href="https://docs.mongodb.com/manual/core/sharded-cluster-shards/"  target="_blank" rel="noopener"
    >shard</a>Ôºö ÂàÜÁâáËäÇÁÇπÔºåÂ≠òÂÇ®Êï∞ÊçÆ„ÄÇÊØè‰∏™ÂàÜÁâáÈÉΩÂèØ‰ª•ÈÉ®ÁΩ≤‰∏∫<a class="link" href="https://docs.mongodb.com/manual/reference/glossary/#term-replica-set"  target="_blank" rel="noopener"
    >ÂâØÊú¨ÈõÜ</a>„ÄÇ</li>
<li><a class="link" href="https://docs.mongodb.com/manual/core/sharded-cluster-query-router/"  target="_blank" rel="noopener"
    >router</a>Ôºö Ë∑ØÁî±ËäÇÁÇπÔºåÊòØmongoÈõÜÁæ§‰∏éÂ§ñÈÉ®ÂÆ¢Êà∑Á´ØËøûÊé•ÁöÑÂÖ•Âè£Ôºå‰ªñÊèê‰æõmongosÂÆ¢Êà∑Á´ØÔºåÂØπÂÆ¢Êà∑Á´ØÈÄèÊòéÔºåËÆ©ÂÆ¢Êà∑Á´ØÊÑüËßâ‰ΩøÁî®ÂçïËäÇÁÇπÊï∞ÊçÆÂ∫ì„ÄÇ</li>
<li><a class="link" href="https://docs.mongodb.com/manual/core/sharded-cluster-config-servers/"  target="_blank" rel="noopener"
    >config servers</a> Ôºö ÈÖçÁΩÆËäÇÁÇπÔºå‰∏ç‰ºöÂ≠òÂÇ®Êï∞ÊçÆÔºå‰ºöÂ≠òÂÇ®ÂÖÉÊï∞ÊçÆ‰ø°ÊÅØÔºåÊØîÂ¶ÇÁâáÈîÆÁöÑËåÉÂõ¥„ÄÇ ‰ªéMongoDB 3.4ÂºÄÂßãÔºåÂøÖÈ°ªÂ∞ÜÈÖçÁΩÆÊúçÂä°Âô®ÈÉ®ÁΩ≤‰∏∫<a class="link" href="https://docs.mongodb.com/manual/reference/glossary/#term-replica-set"  target="_blank" rel="noopener"
    >ÂâØÊú¨ÈõÜ</a>„ÄÇ</li>
</ul>
<h4 id="32-Êê≠Âª∫ÈõÜÁæ§">3.2 Êê≠Âª∫ÈõÜÁæ§
</h4><h5 id="321-ÂàõÂª∫ÈÖçÁΩÆÊúçÂä°Â§çÊú¨ÈõÜ">3.2.1 ÂàõÂª∫ÈÖçÁΩÆÊúçÂä°Â§çÊú¨ÈõÜ
</h5><pre><code class="language-sh">docker run --name configsvr0 -d mongo --configsvr --replSet &quot;rs_configsvr&quot;  --bind_ip_all
docker run --name configsvr1 -d mongo --configsvr --replSet &quot;rs_configsvr&quot;  --bind_ip_all
docker run --name configsvr2 -d mongo --configsvr --replSet &quot;rs_configsvr&quot;  --bind_ip_all

</code></pre>
<h5 id="322-ÂàõÂª∫ÂàÜÁâáÂ§çÊú¨ÈõÜ">3.2.2 ÂàõÂª∫ÂàÜÁâáÂ§çÊú¨ÈõÜ
</h5><p><strong>ÂàõÂª∫ÂàÜÁâá0Â§çÂà∂ÈõÜ</strong></p>
<pre><code class="language-sh">docker run --name shardsvr00 -d mongo --shardsvr --replSet &quot;rs_shardsvr0&quot;  --bind_ip_all
docker run --name shardsvr01 -d mongo --shardsvr --replSet &quot;rs_shardsvr0&quot;  --bind_ip_all
docker run --name shardsvr02 -d mongo --shardsvr --replSet &quot;rs_shardsvr0&quot;  --bind_ip_all

</code></pre>
<p><strong>ÂàõÂª∫ÂàÜÁâá1Â§çÂà∂ÈõÜ</strong></p>
<pre><code class="language-sh">docker run --name shardsvr10 -d mongo --shardsvr --replSet &quot;rs_shardsvr1&quot;  --bind_ip_all
docker run --name shardsvr11 -d mongo --shardsvr --replSet &quot;rs_shardsvr1&quot;  --bind_ip_all
docker run --name shardsvr12 -d mongo --shardsvr --replSet &quot;rs_shardsvr1&quot;  --bind_ip_all

</code></pre>
<p>ÊâßË°å docker inspect -f &lsquo;{{.Name}} - {{.NetworkSettings.IPAddress }}&rsquo; $(docker ps -aq) ÂæóÂà∞Êàë‰ª¨ÂàöÂàöÂêØÂä®ÁöÑÂÆπÂô®ÁöÑÂêçÁß∞ÂíåipÂàóË°®</p>
<pre><code class="language-sh">/shardsvr12 - 172.17.0.11
/shardsvr11 - 172.17.0.10
/shardsvr10 - 172.17.0.9

/shardsvr02 - 172.17.0.8
/shardsvr01 - 172.17.0.7
/shardsvr00 - 172.17.0.6

/configsvr2 - 172.17.0.5
/configsvr1 - 172.17.0.4
/configsvr0 - 172.17.0.3
/tensquare_mongo - 172.17.0.2

</code></pre>
<h5 id="323-ÂàùÂßãÂåñÈÖçÁΩÆÂâØÊú¨ÈõÜÂíåÂàÜÁâáÂâØÊú¨ÈõÜ"><strong>3.2.3 ÂàùÂßãÂåñÈÖçÁΩÆÂâØÊú¨ÈõÜ</strong>ÂíåÂàÜÁâáÂâØÊú¨ÈõÜ
</h5><p>ps:‰ΩøÁî®<code>--configsvr</code>ÊûÑÂª∫ÁöÑÈÖçÁΩÆÂÆπÂô®ÈªòËÆ§ÁöÑÁ´ØÂè£ÊòØ<strong>27019</strong></p>
<pre><code class="language-sh">#ËøõÂÖ•ÂÆπÂô®
docker exec -it configsvr0 bash
#ËøûÊé•configsvr0
mongo --host 172.17.0.3 --port 27019
#ÂêØÂä®ÈÖçÁΩÆÂâØÊú¨ÈõÜ
rs.initiate(
  {
    _id: &quot;rs_configsvr&quot;,
    configsvr: true,
    members: [
      { _id : 0, host : &quot;172.17.0.3:27019&quot; },
      { _id : 1, host : &quot;172.17.0.4:27019&quot; },
      { _id : 2, host : &quot;172.17.0.5:27019&quot; }
    ]
  }
)
#exitÈÄÄÂá∫

</code></pre>
<p><strong>ÂêåÁêÜÔºå‰ª•Áõ∏ÂêåÁöÑÊñπÂºèÂàùÂßãÂåñÂàÜÁâáÂâØÊú¨ÈõÜ</strong></p>
<p>ps:‰ΩøÁî®<code>--shardsvr</code>ÊûÑÂª∫ÁöÑÂàÜÁâáÂÆπÂô®ÈªòËÆ§ÁöÑÁ´ØÂè£ÊòØ<strong>27018</strong></p>
<p>ÂàùÂßãÂåñÂàÜÁâáÂâØÊú¨ÈõÜ0Ôºö</p>
<pre><code class="language-sh">#ËøûÊé•shardsvr00
mongo --host 172.17.0.6 --port 27018
#ÂàùÂßãÂåñÂàÜÁâáÂâØÊú¨ÈõÜ0
rs.initiate(
  {
    _id : &quot;rs_shardsvr0&quot;,
    members: [
      { _id : 0, host : &quot;172.17.0.6:27018&quot; },
      { _id : 1, host : &quot;172.17.0.7:27018&quot; },
      { _id : 2, host : &quot;172.17.0.8:27018&quot; }
    ]
  }
)
#exitÈÄÄÂá∫

</code></pre>
<p>ÂàùÂßãÂåñÂàÜÁâáÂâØÊú¨ÈõÜ1:</p>
<pre><code class="language-sh">#ËøûÊé•shardsvr10
mongo --host 172.17.0.9 --port 27018
#ÂàùÂßãÂåñÂàÜÁâáÂâØÊú¨ÈõÜ1
rs.initiate(
  {
    _id : &quot;rs_shardsvr1&quot;,
    members: [
      { _id : 0, host : &quot;172.17.0.9:27018&quot; },
      { _id : 1, host : &quot;172.17.0.10:27018&quot; },
      { _id : 2, host : &quot;172.17.0.11:27018&quot; }
    ]
  }
)
#exitÈÄÄÂá∫

</code></pre>
<h5 id="324-ÂàõÂª∫ÈõÜÁæ§ÂÖ•Âè£Âπ∂ÂÖ≥ËÅîÈÖçÁΩÆÈõÜ">3.2.4 ÂàõÂª∫ÈõÜÁæ§ÂÖ•Âè£Âπ∂ÂÖ≥ËÅîÈÖçÁΩÆÈõÜ
</h5><p>ps:ÈªòËÆ§ÊòØmongod(ÂàÜÁâáÂ§ÑÁêÜÊ®°Âºè),Êàë‰ª¨ÈúÄË¶ÅÂ∞ÜËµ∑‰øÆÊîπ‰∏∫mongos(Ë∑ØÁî±Ê®°Âºè),Ë¥üË¥£Ë∑ØÁî±ÂíåÂçèË∞ÉÊìç‰ΩúÔºå‰ΩøÂæóÈõÜÁæ§ÂÉè‰∏Ä‰∏™Êï¥‰ΩìÁöÑÁ≥ªÁªü</p>
<pre><code class="language-sh">#exitÈÄÄÂá∫Âà∞rootÁõÆÂΩï
#ÂàõÂª∫Ë∑ØÁî±ÂÆû‰æã
docker run --name mongos0 -p 27027:27017 -d --entrypoint &quot;mongos&quot; mongo --configdb rs_configsvr/172.17.0.3:27019,172.17.0.4:27019,172.17.0.5:27019 --bind_ip_all

</code></pre>
<p>ÂêåÊ†∑ÊâßË°å docker inspect -f &lsquo;{{.Name}} - {{.NetworkSettings.IPAddress }}&rsquo; $(docker ps -aq) ÂæóÂà∞ÂÆπÂô®ÁöÑÂêçÁß∞ÂíåipÁöÑÂØπÂ∫îÂàóË°®ÔºåÂπ∂Ëé∑Âæómongo0ÂÆπÂô®ÁöÑip‰∏∫<code>172.17.0.12</code></p>
<h5 id="325-Âú®ÈõÜÁæ§ÂÖ•Âè£Ë∑ØÁî±‰∏äÊåÇËΩΩÂàÜÁâáÈõÜ">3.2.5 Âú®ÈõÜÁæ§ÂÖ•Âè£(Ë∑ØÁî±)‰∏äÊåÇËΩΩÂàÜÁâáÈõÜ
</h5><p>ps:ÂÆπÂô®ÈªòËÆ§ÁöÑÁ´ØÂè£ÊòØ27017</p>
<pre><code class="language-sh">#ËøõÂÖ•ÂÆπÂô®
docker exec -it mongos0 bash
#ËøûÊé•mongos0
mongo --host 172.17.0.12 --port 27017
sh.addShard(&quot;rs_shardsvr0/172.17.0.6:27018,172.17.0.7:27018,172.17.0.8:27018&quot;)
sh.addShard(&quot;rs_shardsvr1/172.17.0.9:27018,172.17.0.10:27018,172.17.0.11:27018&quot;)

</code></pre>
<h5 id="326-ÊµãËØïÈõÜÁæ§">3.2.6 ÊµãËØïÈõÜÁæ§
</h5><p>ËøõÂÖ•Ë∑ØÁî±ÂÆπÂô®ÂàõÂª∫commentdbÊï∞ÊçÆÂ∫ìÂπ∂ÂêØÁî®ÂàÜÁâá</p>
<pre><code class="language-sh">sh.enableSharding(&quot;commentdb&quot;)

</code></pre>
<p>ÂàÜÁâáÊñπÂºèÊúâ‰∏§ÁßçËøúÁ®ãÂàÜÁâáÂíåhashÂàÜÁâáÔºåÊàë‰ª¨ÈááÁî®hashÂàÜÁâá</p>
<pre><code class="language-sh">#ÂØπ commentdb.comment ÁöÑ _id Â≠óÊÆµËøõË°åÂìàÂ∏åÂàÜÁâá
sh.shardCollection(&quot;commentdb.comment&quot;, {&quot;_id&quot;: &quot;hashed&quot; })

</code></pre>
<p>ÊèíÂÖ•Êï∞ÊçÆÊµãËØï‰∏ã</p>
<pre><code class="language-sh">#‰ΩøÁî®Êï∞ÊçÆÂ∫ì
use commentdb
#ÊèíÂÖ•Êï∞ÊçÆ
db.comment.insert({_id:&quot;1&quot;,content:&quot;Âà∞Â∫ï‰∏∫Âï• Âá∫Èîô&quot;,username:&quot;Âº†‰∏â&quot;,userid:&quot;1012&quot;,thumbup:2020,tags:[&quot;ÂæàÂ•Ω&quot;,&quot;ÂçÅÂàÜËÆ§Âêå&quot;],tupuser:[{name:&quot;ÊùéÂ§ß&quot;,sex:&quot;Â•≥&quot;,age:10},{name:&quot;Êùé‰∫å&quot;,sex:&quot;Áî∑&quot;,age:42}],lastModifiedDate:new Date()});
db.comment.insert({_id:&quot;2&quot;,content:&quot;Âä†Áè≠Âà∞ÂçäÂ§ú&quot;,username:&quot;Êùé  Âõõ&quot;,userid:&quot;1013&quot;,thumbup:1023,tags:[&quot;‰∏ÄËà¨&quot;,&quot;‰∏çÁªôÂäõ&quot;],tupuser:[{name:&quot;Êùé‰∫å&quot;,sex:&quot;Áî∑&quot;,age:42},{name:&quot;Êùé‰∏â&quot;,sex:&quot;Â•≥&quot;,age:12}],lastModifiedDate:new Date()});
db.comment.insert({_id:&quot;3&quot;,content:&quot;ÊâãÊú∫ÊµÅÈáèË∂Ö‰∫ÜÂíãÂäû&quot;,username:&quot;Áéã‰∫î&quot;,userid:&quot;1013&quot;,thumbup:111,tags:[&quot;ÂæàÂ•Ω&quot;,&quot;ÁªôÂäõ&quot;],tupuser:[{name:&quot;Êùé‰∏â&quot;,sex:&quot;Â•≥&quot;,age:12},{name:&quot;ÊùéÂõõ&quot;,sex:&quot;Áî∑&quot;,age:17}],lastModifiedDate:new Date()});
db.comment.insert({_id:&quot;4&quot;,content:&quot;ÂùöÊåÅÂ∞±ÊòØËÉúÂà©&quot;,username:&quot;ËµµÂÖ≠&quot;,userid:&quot;1014&quot;,thumbup:1223,tags:[&quot;‰∏çÂ•Ω&quot;,&quot;ËØ¥ÁöÑ‰∏çÂØπ&quot;],tupuser:[{name:&quot;ÊùéÂõõ&quot;,sex:&quot;Áî∑&quot;,age:17},{name:&quot;Êùé‰∫î&quot;,sex:&quot;Â•≥&quot;,age:26}],lastModifiedDate:new Date()});
db.comment.insert({_id:&quot;5&quot;,content:&quot;ÊâãÊú∫Ê≤°Áîµ‰∫ÜÂïä&quot;,username:&quot;Êùé‰∫ëÈæô&quot;,userid:&quot;1014&quot;,thumbup:923,tags:[&quot;ÂæàÂ•Ω&quot;,&quot;ÂçÅÂàÜËÆ§Âêå&quot;],tupuser:[{name:&quot;Êùé‰∫î&quot;,sex:&quot;Â•≥&quot;,age:26},{name:&quot;ÊùéÂÖ≠&quot;,sex:&quot;Áî∑&quot;,age:39}],lastModifiedDate:new Date()});
db.comment.insert({_id:&quot;6&quot;,content:&quot;Ëøô‰∏™ÊâãÊú∫Â•Ω&quot;,username:&quot;È£éÊ∏ÖÊâ¨&quot;,userid:&quot;1014&quot;,thumbup:123,tags:[&quot;ÂæàÂ•Ω&quot;,&quot;ÂçÅÂàÜËÆ§Âêå&quot;],tupuser:[{name:&quot;ÊùéÂÖ≠&quot;,sex:&quot;Áî∑&quot;,age:39},{name:&quot;Êùé‰∏É&quot;,sex:&quot;Áî∑&quot;,age:62}],lastModifiedDate:new Date()});

</code></pre>
<p>Âà∞ÂàÜÁâáÊï∞ÊçÆÂ∫ìÁúã‰∏ãÊï∞ÊçÆÊÉÖÂÜµ</p>
<pre><code class="language-sh">#ËøûÊé•mongo
mongo --host 172.17.0.9 --port 27018
#ÈÄâÊã©Êï∞ÊçÆÂ∫ì
use commentdb
#Êü•ÁúãÊï∞Èáè
db.comment.count()

</code></pre>
<p>ÂèØ‰ª•ÁúãÂà∞Â∑≤ÁªèÂæóÂà∞È¢ÑÊúüÊïàÊûú
ÈÇ£‰πàÂ§á‰ªΩÂë¢?(Â§á‰ªΩÈªòËÆ§ÊÉÖÂÜµ‰∏ã‰∏çÂÖÅËÆ∏ËØªÂèñ,ÈúÄË¶ÅÊâßË°å<code>db.getMongo().setSlaveOk()</code>Êù•ÂÖÅËÆ∏ËØªÂèñ)</p>
<pre><code class="language-sh">mongo --host 172.17.0.7 --port 27018
db.getMongo().setSlaveOk()
db.comment.count()

</code></pre>
<h3 id="4ÊÄªÁªì-1">4.ÊÄªÁªì
</h3><h2 id="Áü•ËØÜÁÇπ-mongoËÅöÂêàÊü•ËØ¢">Áü•ËØÜÁÇπ-mongoËÅöÂêàÊü•ËØ¢
</h2><h3 id="1ÁõÆÊ†á-5">1.ÁõÆÊ†á
</h3><ul>
<li>ÁÆ°ÈÅìÊü•ËØ¢</li>
<li>map-reduce</li>
</ul>
<h3 id="2Ë∑ØÂæÑ-5">2.Ë∑ØÂæÑ
</h3><h3 id="3ËÆ≤Ëß£-5">3.ËÆ≤Ëß£
</h3><h4 id="31-ÁÆ°ÈÅìÊü•ËØ¢">3.1 ÁÆ°ÈÅìÊü•ËØ¢
</h4><p>MongoDBÁöÑ<a class="link" href="https://docs.mongodb.com/manual/core/aggregation-pipeline/"  target="_blank" rel="noopener"
    >ËÅöÂêàÊ°ÜÊû∂</a>‰ª•Êï∞ÊçÆÂ§ÑÁêÜÁÆ°ÈÅìÁöÑÊ¶ÇÂøµ‰∏∫Ê®°Âûã„ÄÇÊñáÊ°£ËøõÂÖ•Â§öÈò∂ÊÆµÊµÅÊ∞¥Á∫øÔºåËØ•ÊµÅÊ∞¥Á∫øÂ∞ÜÊñáÊ°£ËΩ¨Êç¢ÊàêÊ±áÊÄªÁªìÊûú„ÄÇ‰æãÂ¶ÇÔºö</p>
<p><img src="/p/mongodb/images/r1043-v93gf.gif"
	width="1920"
	height="1080"
	
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="177"
		data-flex-basis="426px"
	
></p>
<p>Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠</p>
<pre><code class="language-js">db.orders.aggregate([
   { $match: { status: &quot;A&quot; } },
   { $group: { _id: &quot;$cust_id&quot;, total: { $sum: &quot;$amount&quot; } } }
])

</code></pre>
<p><strong>Á¨¨‰∏ÄÈò∂ÊÆµ</strong>Ôºö<a class="link" href="https://docs.mongodb.com/manual/reference/operator/aggregation/match/#pipe._S_match"  target="_blank" rel="noopener"
    ><code>$match</code></a>Èò∂ÊÆµÊåâ<code>status</code>Â≠óÊÆµËøáÊª§ÊñáÊ°£ÔºåÂπ∂Â∞Ü<code>status</code>Á≠â‰∫éÁöÑÊñáÊ°£‰º†ÈÄíÂà∞‰∏ã‰∏ÄÈò∂ÊÆµ<code>&quot;A&quot;</code>„ÄÇ</p>
<p><strong>Á¨¨‰∫åÈò∂ÊÆµ</strong>ÔºöËØ•<a class="link" href="https://docs.mongodb.com/manual/reference/operator/aggregation/group/#pipe._S_group"  target="_blank" rel="noopener"
    ><code>$group</code></a>Èò∂ÊÆµÊåâ<code>cust_id</code>Â≠óÊÆµÂ∞ÜÊñáÊ°£ÂàÜÁªÑÔºå‰ª•ËÆ°ÁÆóÊØè‰∏™ÂîØ‰∏ÄÂÄºÁöÑÊÄªÂíå<code>cust_id</code>„ÄÇ</p>
<p>ÊúÄÂü∫Êú¨ÁöÑÁÆ°ÈÅìÈò∂ÊÆµÊèê‰æõ<em>ËøáÊª§Âô®</em>ÔºåÂÖ∂Êìç‰ΩúÁ±ª‰ºº‰∫éÊü•ËØ¢Âíå‰øÆÊîπËæìÂá∫ÊñáÊ°£ÂΩ¢ÂºèÁöÑ<em>ÊñáÊ°£ËΩ¨Êç¢</em>„ÄÇ</p>
<p>ÂÖ∂‰ªñÁÆ°ÈÅìÊìç‰ΩúÊèê‰æõ‰∫ÜÁî®‰∫éÊåâÁâπÂÆöÂ≠óÊÆµÂØπÊñáÊ°£ËøõË°åÂàÜÁªÑÂíåÊéíÂ∫èÁöÑÂ∑•ÂÖ∑Ôºå‰ª•ÂèäÁî®‰∫éËÅöÂêàÂåÖÊã¨ÊñáÊ°£Êï∞ÁªÑÂú®ÂÜÖÁöÑÊï∞ÁªÑÂÜÖÂÆπÁöÑÂ∑•ÂÖ∑„ÄÇÂè¶Â§ñÔºåÁÆ°ÈÅìÈò∂ÊÆµÂèØ‰ª•Â∞Ü<a class="link" href="https://docs.mongodb.com/manual/reference/operator/aggregation/#aggregation-expression-operators"  target="_blank" rel="noopener"
    >ËøêÁÆóÁ¨¶</a>Áî®‰∫éËØ∏Â¶ÇËÆ°ÁÆóÂπ≥ÂùáÂÄºÊàñËøûÊé•Â≠óÁ¨¶‰∏≤‰πãÁ±ªÁöÑ‰ªªÂä°„ÄÇ</p>
<p>ÁÆ°ÈÅì‰ΩøÁî®MongoDB‰∏≠ÁöÑÊú¨Êú∫Êìç‰ΩúÊèê‰æõÊúâÊïàÁöÑÊï∞ÊçÆËÅöÂêàÔºåÂπ∂‰∏îÊòØMongoDB‰∏≠Êï∞ÊçÆËÅöÂêàÁöÑÈ¶ñÈÄâÊñπÊ≥ï„ÄÇ</p>
<p>ËÅöÂêàÁÆ°ÈÅìÂèØ‰ª•Êìç‰Ωú <a class="link" href="https://docs.mongodb.com/manual/sharding/"  target="_blank" rel="noopener"
    >ÂàÜÁâáÈõÜÂêà</a>„ÄÇ</p>
<p>ËÅöÂêàÁÆ°ÈÅìÂèØ‰ª•Âú®Êüê‰∫õÈò∂ÊÆµ‰ΩøÁî®Á¥¢ÂºïÊù•ÊèêÈ´òÂÖ∂ÊÄßËÉΩ„ÄÇÂè¶Â§ñÔºåËÅöÂêàÁÆ°ÈÅìÂÖ∑ÊúâÂÜÖÈÉ®‰ºòÂåñÈò∂ÊÆµ„ÄÇÊúâÂÖ≥ËØ¶ÁªÜ‰ø°ÊÅØÔºåËØ∑ÂèÇËßÅ<a class="link" href="https://docs.mongodb.com/manual/core/aggregation-pipeline/#aggregation-pipeline-operators-and-performance"  target="_blank" rel="noopener"
    >ÁÆ°ÈÅìËøêÁÆóÁ¨¶ÂíåÁ¥¢Âºï</a>‰ª•Âèä <a class="link" href="https://docs.mongodb.com/manual/core/aggregation-pipeline-optimization/"  target="_blank" rel="noopener"
    >ËÅöÂêàÁÆ°ÈÅì‰ºòÂåñ</a>„ÄÇ</p>
<p>ex:Ëé∑ÂèñÂΩìÂâçÁÇπËµûÊï∞Â§ß‰∫é200Âπ∂ÁªüËÆ°Áî®Êà∑ÁöÑÊÄªÁÇπËµûÊï∞</p>
<pre><code class="language-js">db.comment.aggregate([
   { $match: { thumbup: {$gt:200} } },
   { $group: { _id: &quot;$userid&quot;, total: { $sum: &quot;$thumbup&quot; } } }
])

</code></pre>
<h4 id="32-map-reduce">3.2 map-reduce
</h4><p>MongoDBËøòÊèê‰æõ‰∫Ü<a class="link" href="https://docs.mongodb.com/manual/core/map-reduce/"  target="_blank" rel="noopener"
    >map-reduce</a>Êìç‰ΩúÊù•ÊâßË°åËÅöÂêà„ÄÇÈÄöÂ∏∏Ôºåmap-reduceÊìç‰ΩúÊúâ‰∏§‰∏™Èò∂ÊÆµÔºö</p>
<ol>
<li><em>map</em>Èò∂ÊÆµ: Â§ÑÁêÜÊØè‰∏™ÊñáÊ°£Âπ∂‰∏∫ÊØè‰∏™ËæìÂÖ•ÊñáÊ°£<em>ÂèëÂá∫</em>‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂØπË±°ÁöÑÔºå</li>
<li><em>reduce</em>Èò∂ÊÆµ: ‰ª•ÂèäÂ∞ÜmapÊìç‰ΩúÁöÑËæìÂá∫ÁªÑÂêàÂú®‰∏ÄËµ∑ÁöÑ„ÄÇ</li>
</ol>
<blockquote>
<p>ÂèØÈÄâÂú∞Ôºåmap-reduceÂèØ‰ª•ÂÖ∑Êúâ‰∏Ä‰∏™ <em>finalize</em>Èò∂ÊÆµÊù•ÂØπÁªìÊûúËøõË°åÊúÄÁªà‰øÆÊîπ„ÄÇ‰∏éÂÖ∂‰ªñËÅöÂêàÊìç‰Ωú‰∏ÄÊ†∑Ôºåmap-reduceÂèØ‰ª•ÊåáÂÆöÊü•ËØ¢Êù°‰ª∂‰ª•ÈÄâÊã©ËæìÂÖ•ÊñáÊ°£‰ª•ÂèäÂØπÁªìÊûúËøõË°åÊéíÂ∫èÂíåÈôêÂà∂„ÄÇ</p>
</blockquote>
<p>Map-reduce‰ΩøÁî®Ëá™ÂÆö‰πâJavaScriptÂáΩÊï∞Êù•ÊâßË°åÊò†Â∞ÑÂíåÂΩíÁ∫¶Êìç‰Ωú‰ª•ÂèäÂèØÈÄâÁöÑ<em>finalize</em>Êìç‰Ωú„ÄÇÂ∞ΩÁÆ°Ëá™ÂÆö‰πâJavaScript‰∏éËÅöÂêàÁÆ°ÈÅìÁõ∏ÊØîÊèê‰æõ‰∫ÜÊûÅÂ§ßÁöÑÁÅµÊ¥ªÊÄßÔºå‰ΩÜÊÄªÁöÑÊù•ËØ¥Ôºåmap-reduceÊØîËÅöÂêàÁÆ°ÈÅìÊïàÁéá‰Ωé‰∏ãÔºåÂπ∂‰∏îÂ§çÊùÇÊÄßÊõ¥È´ò„ÄÇ</p>
<p>Map-reduceÂèØ‰ª•ÂØπÂàÜÁâá <a class="link" href="https://docs.mongodb.com/manual/sharding/"  target="_blank" rel="noopener"
    >ÈõÜÂêàËøõË°åÊìç‰Ωú</a>„ÄÇÊò†Â∞ÑÂáèÂ∞ëÊìç‰Ωú‰πüÂèØ‰ª•ËæìÂá∫Âà∞ÂàÜÁâáÈõÜÂêà„ÄÇÊúâÂÖ≥ËØ¶ÁªÜ‰ø°ÊÅØÔºåËØ∑ÂèÇËßÅ <a class="link" href="https://docs.mongodb.com/manual/core/map-reduce-sharded-collections/"  target="_blank" rel="noopener"
    >Map-ReduceÂíåÂàÜÁâáÈõÜÂêà</a>„ÄÇ</p>
<p><img src="/p/mongodb/images/map-reduce.bakedsvg.svg"
	
	
	
	loading="lazy"
	
	
></p>
<p>ex:Ëé∑ÂèñÂΩìÂâçÁÇπËµûÊï∞Â§ß‰∫é200Âπ∂ÁªüËÆ°Áî®Êà∑ÁöÑÊÄªÁÇπËµûÊï∞</p>
<p><img src="/p/mongodb/images/image-20200618070608408.png"
	width="1081"
	height="399"
	
	loading="lazy"
	
		alt="image-20200618070608408"
	
	
		class="gallery-image" 
		data-flex-grow="270"
		data-flex-basis="650px"
	
></p>
<pre><code class="language-js">var mapFunction1 = function() {
  emit(this.userid, this.thumbup);
};
var reduceFunction1 = function(keyUid, thumbupArr) {
 return Array.sum(thumbupArr);
};
db.comment.mapReduce(
  mapFunction1,
  reduceFunction1,
  { 
    query: {thumbup:{$gt:200}},
    out: &quot;thumbup_sum&quot; 
    	}
)
db.thumbup_sum.find().sort({value:-1});

</code></pre>
<p>‰øÆÊîπÊàêÊàë‰ª¨ÊÉ≥Ë¶ÅÁöÑÊ†∑Â≠ê</p>
<h3 id="4ÊÄªÁªì-2">4.ÊÄªÁªì
</h3><h2 id="Áü•ËØÜÁÇπ-mongodb-driver‰ΩøÁî®">Áü•ËØÜÁÇπ-mongodb-driver‰ΩøÁî®
</h2><h3 id="mongodb-driver">mongodb-driver
</h3><p>‚Äã	mongodb-driverÊòØmongoÂÆòÊñπÊé®Âá∫ÁöÑjavaËøûÊé•mongoDBÁöÑÈ©±Âä®ÂåÖÔºåÁõ∏ÂΩì‰∫éJDBCÈ©±Âä®„ÄÇÊàë‰ª¨Áé∞Âú®Êù•‰ΩøÁî®mongodb-driverÂÆåÊàêÂØπMongodbÁöÑÊìç‰Ωú„ÄÇ</p>
<p>Ê∑ªÂä†‰ª•‰∏ã‰æùËµñÔºö</p>
<pre><code class="language-xml"> &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.mongodb&lt;/groupId&gt;
            &lt;artifactId&gt;mongodb-driver&lt;/artifactId&gt;
            &lt;version&gt;3.10.1&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;junit&lt;/groupId&gt;
            &lt;artifactId&gt;junit&lt;/artifactId&gt;
            &lt;version&gt;4.12&lt;/version&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

</code></pre>
<p>‰ΩøÁî®Ê≠•È™§:</p>
<ol>
<li>ÂàõÂª∫ÂÆ¢Êà∑Á´ØËøûÊé• mongoclient</li>
<li>Ëé∑ÂèñÊï∞ÊçÆÂ∫ì</li>
<li>Ëé∑ÂèñÈõÜÂêà</li>
<li>Êìç‰ΩúÈõÜÂêà</li>
</ol>
<h4 id="32-Êü•ËØ¢ÊâÄÊúâ">3.2 Êü•ËØ¢ÊâÄÊúâ
</h4><pre><code class="language-java"> @Test
    public void test1() {
        //ÂàõÂª∫ËøûÊé•
        MongoClient client = new MongoClient(&quot;192.168.184.136&quot;,27027);
        //ÊâìÂºÄÊï∞ÊçÆÂ∫ì
        MongoDatabase commentdb = client.getDatabase(&quot;commentdb&quot;);
        //Ëé∑ÂèñÈõÜÂêà
        MongoCollection&lt;Document&gt; comment = commentdb.getCollection(&quot;comment&quot;);

        //Êü•ËØ¢
        FindIterable&lt;Document&gt; documents = comment.find();

        //Êü•ËØ¢ËÆ∞ÂΩïËé∑ÂèñÊñáÊ°£ÈõÜÂêà
        for (Document document : documents) {
            System.out.println(&quot;_idÔºö&quot; + document.get(&quot;_id&quot;));
            System.out.println(&quot;ÂÜÖÂÆπÔºö&quot; + document.get(&quot;content&quot;));
            System.out.println(&quot;Áî®Êà∑ID:&quot; + document.get(&quot;userid&quot;));
            System.out.println(&quot;ÁÇπËµûÊï∞Ôºö&quot; + document.get(&quot;thumbup&quot;));
        }
        //ÂÖ≥Èó≠ËøûÊé•
        client.close();
    }


</code></pre>
<h4 id="33Ê†πÊçÆ_idÊü•ËØ¢">3.3Ê†πÊçÆ_idÊü•ËØ¢
</h4><p>ÊØèÊ¨°‰ΩøÁî®ÈÉΩË¶ÅÁî®Âà∞MongoCollectionÔºåËøõË°åÊäΩÂèñÔºö</p>
<pre><code class="language-java">private MongoClient client;
private MongoCollection&lt;Document&gt; comment;

@Before
public void init() {
    //ÂàõÂª∫ËøûÊé•
    client =new MongoClient(&quot;192.168.184.136&quot;,27027);
    //ÊâìÂºÄÊï∞ÊçÆÂ∫ì
    MongoDatabase commentdb = client.getDatabase(&quot;commentdb&quot;);
    //Ëé∑ÂèñÈõÜÂêà
    comment = commentdb.getCollection(&quot;comment&quot;);
}

@After
public void after() {
    client.close();
}


</code></pre>
<p>ÊµãËØïÊ†πÊçÆ_idÊü•ËØ¢Ôºö</p>
<pre><code class="language-java">@Test
public void test2() {
    //Êü•ËØ¢
    FindIterable&lt;Document&gt; documents = comment.find(new BasicDBObject(&quot;_id&quot;, &quot;1&quot;));

    //Êü•ËØ¢ËÆ∞ÂΩïËé∑ÂèñÊñáÊ°£ÈõÜÂêà
    for (Document document : documents) {
        System.out.println(&quot;_idÔºö&quot; + document.get(&quot;_id&quot;));
        System.out.println(&quot;ÂÜÖÂÆπÔºö&quot; + document.get(&quot;content&quot;));
        System.out.println(&quot;Áî®Êà∑ID:&quot; + document.get(&quot;userid&quot;));
        System.out.println(&quot;ÁÇπËµûÊï∞Ôºö&quot; + document.get(&quot;thumbup&quot;));
    }
}


</code></pre>
<h4 id="34Êñ∞Â¢û">3.4Êñ∞Â¢û
</h4><pre><code class="language-java">@Test
public void test3() {
    Map&lt;String, Object&gt; map = new HashMap();
    map.put(&quot;_id&quot;, &quot;6&quot;);
    map.put(&quot;content&quot;, &quot;ÂæàÊ£íÔºÅ&quot;);
    map.put(&quot;userid&quot;, &quot;9999&quot;);
    map.put(&quot;thumbup&quot;, 123);

    Document document = new Document(map);

    comment.insertOne(document);
}


</code></pre>
<h4 id="35‰øÆÊîπ">3.5‰øÆÊîπ
</h4><pre><code class="language-java">@Test
public void test4() {
    //‰øÆÊîπÁöÑÊù°‰ª∂
    Bson filter = new BasicDBObject(&quot;_id&quot;, &quot;6&quot;);
    //‰øÆÊîπÁöÑÊï∞ÊçÆ
    Bson update = new BasicDBObject(&quot;$set&quot;, new Document(&quot;userid&quot;, &quot;8888&quot;));

    comment.updateOne(filter, update);
}


</code></pre>
<h4 id="36-Âà†Èô§">3.6 Âà†Èô§
</h4><pre><code class="language-java">@Test
public void test5() {
    //Âà†Èô§ÁöÑÊù°‰ª∂
    Bson filter = new BasicDBObject(&quot;_id&quot;, &quot;6&quot;);

    comment.deleteOne(filter);
}


</code></pre>
<h3 id="4Â∞èÁªì-2">4.Â∞èÁªì
</h3><ol>
<li>mongodb-driver: mongoÂÆòÊñπÊèê‰æõÁöÑ‰∏Ä‰∏™JavaÊìç‰ΩúMongoÂÆ¢Êà∑Á´Ø Á±ª‰ººjdbcÈ©±Âä®</li>
<li>Â¶ÇÊûúÊúâÊù°‰ª∂, Êàë‰ª¨‰ΩøÁî® new BasicDbObject()
<ul>
<li>‰∏Ä‰∏™BasicDbObjectÂ∞±Áõ∏ÂΩì‰∫éËØ≠Ê≥ïÈáåÈù¢ÁöÑ‰∏ÄÁªÑ{}</li>
<li>Êìç‰ΩúËøáÁ®ã
<ul>
<li>ÂàõÂª∫ËøûÊé•</li>
<li>Ëé∑ÂèñÊï∞ÊçÆÂ∫ìÂØπË±°</li>
<li>Ëé∑ÂèñÈõÜÂêàÂØπË±°</li>
<li>Êìç‰ΩúÈõÜÂêà</li>
<li>ÂÖ≥Èó≠ËøûÊé•</li>
</ul>
</li>
</ul>
</li>
<li>Êàë‰ª¨‰ΩøÁî®mongodb-driverÊúâ‰∫õÁπÅÁêê, È°πÁõÆÈáåÈù¢‰ΩøÁî®Spring-Data-mongo, ÂÜÖÈÉ®Â∞±ÊòØÂ∞ÅË£Ö‰∫Ümongodb-driver</li>
</ol>
<h1 id="Á¨¨‰∫åÁ´†-springdatamongodb">Á¨¨‰∫åÁ´†-SpringDataMongoDB
</h1><h2 id="Áü•ËØÜÁÇπ-Âü∫Êú¨crudÂÆûÁé∞">Áü•ËØÜÁÇπ-Âü∫Êú¨crudÂÆûÁé∞
</h2><h3 id="1ÁõÆÊ†á-6">1.ÁõÆÊ†á
</h3><ul>
<li><input disabled="" type="checkbox"> ÊéåÊè°ÊñáÁ´†ËØÑËÆ∫ÁéØÂ¢ÉÂáÜÂ§á</li>
</ul>
<h3 id="2Ë∑ØÂæÑ-6">2.Ë∑ØÂæÑ
</h3><ol start="2">
<li>ÂºÄÂèëÂáÜÂ§áÁéØÂ¢ÉÂáÜÂ§á</li>
<li>Âü∫Êú¨CRUD</li>
</ol>
<h3 id="3ËÆ≤Ëß£-6">3.ËÆ≤Ëß£
</h3><h4 id="31-ÂºÄÂèëÂáÜÂ§á">3.1 ÂºÄÂèëÂáÜÂ§á
</h4><p>‚Äã	SpringDataMongoDBÊòØSpringDataÂÆ∂ÊóèÊàêÂëò‰πã‰∏ÄÔºåÁî®‰∫éÊìç‰ΩúMongoDbÁöÑÊåÅ‰πÖÂ±ÇÊ°ÜÊû∂ÔºåÂ∞ÅË£Ö‰∫ÜÂ∫ïÂ±ÇÁöÑ==mongodb-driver==„ÄÇÊú¨ÂäüËÉΩ‰ΩøÁî®SpringDataMongoDBËøõË°åÂºÄÂèë</p>
<p>Ê≠•È™§:</p>
<ol>
<li>
<p>ÂàõÂª∫mavenÈ°πÁõÆ</p>
</li>
<li>
<p>Ê∑ªÂä†SpringDataMongoDBËµ∑Ê≠•‰æùËµñ</p>
</li>
<li>
<p>Âú®application.ymlÈáåÈù¢ÈÖçÁΩÆMongoDB</p>
</li>
<li>
<p>ÂàõÂª∫pojo(ÂíåÈõÜÂêàÂØπÂ∫î)</p>
<ol>
<li>@Document(collection=&ldquo;ÈõÜÂêàÂêçÁß∞&rdquo;)</li>
<li>@IdÊ†áËÆ∞‰∏ªÈîÆ</li>
<li>@CompoundIndexes({@CompoundIndex(),@CompoundIndex()})Ê∑ªÂä†Á¥¢Âºï</li>
</ol>
</li>
<li>
<p>ÂàõÂª∫‰∏Ä‰∏™DaoÊé•Âè£ÁªßÊâøMongoRepository</p>
</li>
</ol>
<ul>
<li>Ê∑ªÂä†‰æùËµñÔºö</li>
</ul>
<pre><code class="language-xml"> &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;2.1.4.RELEASE&lt;/version&gt;
        &lt;relativePath/&gt;
    &lt;/parent&gt;

    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
            &lt;artifactId&gt;lombok&lt;/artifactId&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;


</code></pre>
<ul>
<li>Ê∑ªÂä†ÈÖçÁΩÆÊñá‰ª∂Ôºö</li>
</ul>
<pre><code class="language-yaml">spring:
  data:
    mongodb:
      host: 192.168.184.136
      port: 27027
      database: commentdb

</code></pre>
<ul>
<li>ÂàõÂª∫ÂÆû‰ΩìÁ±ª</li>
</ul>
<pre><code class="language-java">@Document(collection = &quot;comment&quot;)
@CompoundIndexes({
        @CompoundIndex(name = &quot;idx_userid&quot;, def = &quot;{'userid': 'hashed'}&quot;, background = true)
})
public class Comment implements Serializable {
    @Id
    private String _id;
    private String articleid;
    private String content;
    private String userid;
    private String parentid;
    private Date publishdate;
    private Integer thumbup;
}


</code></pre>
<h4 id="32Âü∫Êú¨crud">3.2Âü∫Êú¨CRUD
</h4><h5 id="321Êñ∞Â¢û">3.2.1Êñ∞Â¢û
</h5><ul>
<li>CommentService</li>
</ul>
<pre><code class="language-java">@Service
public class CommentService {
    @Autowired
    private IdWorker idWorker;
    @Autowired
    private CommentRepository commentRepository;

    public void add(Comment comment) {
        String id = idWorker.nextId() + &quot;&quot;;
        comment.set_id(id);
        //ÂàùÂßãÂåñÊï∞ÊçÆ
        comment.setPublishdate(new Date());
        comment.setThumbup(0);
        commentRepository.save(comment);
    }
}    


</code></pre>
<ul>
<li>CommentRepository</li>
</ul>
<pre><code class="language-java">public interface CommentRepository extends MongoRepository&lt;Comment,String&gt;{

}


</code></pre>
<blockquote>
<p>Âú®com.tensquare.article.repositoryÂåÖ‰∏ãÂàõÂª∫</p>
</blockquote>
<h5 id="322Âà†Èô§">3.2.2Âà†Èô§
</h5><p>‰∏öÂä°:</p>
<ol>
<li>ÊääÊâÄÊúâÁöÑÂ≠êËØÑËÆ∫‰πüÂà†Èô§</li>
<li>‰∏çÂà†Â≠êËØÑËÆ∫, Âè™Âà†Ëá™Â∑±</li>
</ol>
<ul>
<li>CommentService</li>
</ul>
<pre><code class="language-java">public void deleteById(String id) {
    commentRepository.deleteById(id);
}


</code></pre>
<ul>
<li>ÈÄíÂΩíÂà†Èô§</li>
</ul>
<pre><code class="language-java">//1.Êü•ËØ¢Âá∫Áà∂id‰∏∫commentidÁöÑÊï∞ÊçÆÂÅö‰∏∫ÈõÜÂêàA
List&lt;Comment&gt; childList = commentDao.findByParentid(commentid);
//2.Âà†Èô§id‰∏∫commentidÁöÑÊï∞ÊçÆ
commentDao.deleteById(commentid);
//3.ÈÅçÂéÜÈõÜÂêàAÔºåÈÄíÂΩíË∞ÉÁî®deleteById(A[i]._id)
for (Comment comment : childList) {
    deleteById(comment.get_id());
}


</code></pre>
<h5 id="323‰øÆÊîπ">3.2.3‰øÆÊîπ
</h5><ul>
<li>CommentService</li>
</ul>
<pre><code class="language-java">public void update(Comment comment) {
    commentRepository.save(comment);
}


</code></pre>
<p>ËøôÁßçÊñπÂºèÁöÑÁº∫Èô∑Â∞±ÊòØ‰ºöË¶ÜÁõñÂéüÊú¨ÁöÑÊï∞ÊçÆÔºåÂ∫îËØ•Âè™‰øÆÊîπË¶Å‰øÆÊîπÁöÑÊï∞ÊçÆ</p>
<pre><code class="language-java">//1.Êü•ËØ¢Êù°‰ª∂
Query query = new Query();
query.addCriteria(new Criteria(&quot;_id&quot;).is(comment.get_id()));
//2.‰øÆÊîπÂÜÖÂÆπ
/*Update update = new Update();
update.inc(&quot;thumbup&quot;,1).set(&quot;content&quot;,&quot;aaaaaa&quot;);*/
Update update = MongoUpdateUtils.attrUpdateByBean(comment);
//3.ÈõÜÂêàÂêçÁß∞
mongoTemplate.updateFirst(query,update,&quot;comment&quot;);


</code></pre>
<p>ÂàõÂª∫‰∏Ä‰∏™Â∑•ÂÖ∑Á±ªÈÄöËøáÂèçÂ∞ÑÂ∞ÅË£ÖUpdate</p>
<pre><code class="language-java">public class MongoUpdateUtils {
    public static Update attrUpdateByBean(Object object) {
        Update update = new Update();
        //1.ÈÄöËøáÂèçÂ∞ÑÊãøÂà∞Â±ûÊÄß
        Field[] declaredFields = object.getClass().getDeclaredFields();
        for (Field declaredField : declaredFields) {
            try {
                declaredField.setAccessible(true);//ÂÖÅËÆ∏‰∏çÈÄöËøágetÊñπÊ≥ïÁõ¥Êé•Ëé∑ÂèñÁßÅÊúâÂ±ûÊÄßÂÄº
                Object value = declaredField.get(object);
                //2.ÈÄöËøágetËé∑ÂèñÂÄºÂ¶ÇÊûú‰∏ç‰∏∫Á©∫ÁöÑËØù‰Ωú‰∏∫UpdateË¶Å‰øÆÊîπÂ±ûÊÄß
                if(value!=null){
                    update = update.set(declaredField.getName(),value);
                }
            } catch (IllegalAccessException e) {
                e.printStackTrace();
            }
        }
        return update;
    }
}


</code></pre>
<h5 id="324Êü•ËØ¢ÊâÄÊúâ">3.2.4Êü•ËØ¢ÊâÄÊúâ
</h5><ul>
<li>CommentService</li>
</ul>
<pre><code class="language-java">public List&lt;Comment&gt; findAll() {
    return commentRepository.findAll();
}


</code></pre>
<h5 id="325Ê†πÊçÆidÊü•ËØ¢">3.2.5Ê†πÊçÆidÊü•ËØ¢
</h5><ul>
<li>CommentService</li>
</ul>
<pre><code class="language-java">    public Comment findById(String id) {
        return commentRepository.findById(id).get();
    }


</code></pre>
<h5 id="326-Ëé∑ÂèñÂΩìÂâçÁÇπËµûÊï∞Â§ß‰∫é200Âπ∂ÁªüËÆ°Áî®Êà∑ÁöÑÊÄªÁÇπËµûÊï∞">3.2.6 Ëé∑ÂèñÂΩìÂâçÁÇπËµûÊï∞Â§ß‰∫é200Âπ∂ÁªüËÆ°Áî®Êà∑ÁöÑÊÄªÁÇπËµûÊï∞
</h5><pre><code class="language-java"> public List&lt;Map&gt; findTotalThumbupByUserId(){
        TypedAggregation&lt;Comment&gt; commentTypedAggregation = Aggregation.newAggregation(Comment.class,
                Aggregation.match(Criteria.where(&quot;thumbup&quot;).gt(1000)),
                Aggregation.group(&quot;userid&quot;).sum(&quot;thumbup&quot;).as(&quot;sum&quot;)
        );
        AggregationResults&lt;Map&gt; aggregate = mongoTemplate.aggregate(commentTypedAggregation, mongoTemplate.getCollectionName(Comment.class), Map.class);
        return aggregate.getMappedResults();
    }

</code></pre>
<h5 id="327-ÊåâÁÖßÁÇπËµûÊï∞ÊéíÂ∫èÊü•ËØ¢Ââç3Êù°ËØÑËÆ∫">3.2.7 ÊåâÁÖßÁÇπËµûÊï∞ÊéíÂ∫èÔºåÊü•ËØ¢Ââç3Êù°ËØÑËÆ∫
</h5><pre><code class="language-java">public PageResult&lt;Comment&gt; findByPage(int current, int size){
        Sort sort = Sort.by(Sort.Direction.DESC,&quot;thumbup&quot;);
        Query query = new Query();
        long total = mongoTemplate.count(query, Comment.class);
        int offset = (current- 1)*size;
        List&lt;Comment&gt; list = mongoTemplate.find(query.with(sort).limit(size).skip(offset), Comment.class, mongoTemplate.getCollectionName(Comment.class));
        PageResult&lt;Comment&gt; pageResult = new PageResult();
        pageResult.setCurrent(current);
        pageResult.setData(list);
        pageResult.setPages((int) ((total/size)+1));
        return pageResult;
    }

</code></pre>
<h3 id="4Â∞èÁªì-3">4.Â∞èÁªì
</h3><h2 id="Áü•ËØÜÁÇπ-Ê°ÜÊû∂Â∞ÅË£Ö">Áü•ËØÜÁÇπ-Ê°ÜÊû∂Â∞ÅË£Ö
</h2><h3 id="1ÁõÆÊ†á-7">1.ÁõÆÊ†á
</h3><ul>
<li><input disabled="" type="checkbox"> ‰∫ÜËß£Â¶Ç‰ΩïÂú®ÂéüÊúâÁöÑspringdataÊ°ÜÊû∂‰∏äÂ∞ÅË£ÖËá™Â∑±ÁöÑÂäüËÉΩ</li>
<li><input disabled="" type="checkbox"> Â∞ÜÊàë‰ª¨Ëá™Â∑±ÂÆûÁé∞ÁöÑ‰øÆÊîπÂäüËÉΩÂ∞ÅË£ÖËøõÊ°ÜÊû∂</li>
<li><input disabled="" type="checkbox"> Â∞ÅË£ÖÂàÜÈ°µÊü•ËØ¢ÂäüËÉΩ</li>
<li><input disabled="" type="checkbox"> Â∞ÅË£ÖËÅöÂêàÊü•ËØ¢ÂäüËÉΩ</li>
</ul>
<h3 id="2Ë∑ØÂæÑ-7">2.Ë∑ØÂæÑ
</h3><ul>
<li><input disabled="" type="checkbox"> ËÆ≤Ëß£Â¶Ç‰ΩïÂú®ÂéüÊúâÁöÑspringdataÊ°ÜÊû∂‰∏äÂ∞ÅË£ÖËá™Â∑±ÁöÑÂäüËÉΩ</li>
<li><input disabled="" type="checkbox"> ËÆ≤Ëß£Â¶Ç‰ΩïÂ∞ÜÊàë‰ª¨Ëá™Â∑±ÂÆûÁé∞ÁöÑ‰øÆÊîπÂäüËÉΩÂ∞ÅË£ÖËøõÊ°ÜÊû∂</li>
<li><input disabled="" type="checkbox"> ËÆ≤Ëß£Â¶Ç‰ΩïÂ∞ÅË£ÖÂàÜÈ°µÊü•ËØ¢ÂäüËÉΩ</li>
<li><input disabled="" type="checkbox"> ËÆ≤Ëß£Â¶Ç‰ΩïÂ∞ÅË£ÖËÅöÂêàÊü•ËØ¢ÂäüËÉΩ</li>
</ul>
<h3 id="3ËÆ≤Ëß£-7">3.ËÆ≤Ëß£
</h3><h4 id="31-Âú®ÂéüÊúâÁöÑspringdataÊ°ÜÊû∂‰∏äÂ∞ÅË£ÖËá™Â∑±ÁöÑÂäüËÉΩ">3.1 Âú®ÂéüÊúâÁöÑspringdataÊ°ÜÊû∂‰∏äÂ∞ÅË£ÖËá™Â∑±ÁöÑÂäüËÉΩ
</h4><p>‚Äã	MongoRepositoryËôΩÁÑ∂Â∑≤ÁªèÂ∞ÅË£Ö‰∫Ü‰∏Ä‰∫õÂü∫Êú¨ÂäüËÉΩÔºå‰ΩÜÊòØÂú®Êàë‰ª¨Êó•Â∏∏ÂºÄÂèëÁöÑËøáÁ®ã‰∏≠‰ºöÂèëÁé∞‰ªçÁÑ∂‰∏çÂ§üÁî®ÔºåÊØîÂ¶ÇÂàÜÈ°µÔºåËÅöÂêàÊü•ËØ¢ÈÉΩÈúÄË¶Å‰ΩøÁî®mongoTepmlateÔºåÂ¶ÇÊûú‰Ω†ÊòØÊû∂ÊûÑÂ∏àÔºå‰∏∫‰∫Ü‰øùËØÅÂºÄÂèë‰∫∫ÂëòÂú®ÂºÄÂèëËøáÁ®ã‰∏≠ËÉΩÂ§üÊõ¥Âä†ËßÑËåÉÁöÑ‰ΩøÁî®Ê°ÜÊû∂ÔºåÊàë‰ª¨ÈúÄË¶ÅÂØπÊ°ÜÊû∂Ëøõ‰∏ÄÊ≠•ËøõË°åÂ∞ÅË£ÖÔºåÊâÄ‰ª•Êàë‰ª¨ÈúÄË¶ÅÂØπSpringDataMongoDBÊ°ÜÊû∂ËøõË°åÁ†îÁ©∂Ôºå‰∫ÜËß£MongoRepositoryÊòØÂ¶Ç‰ΩïÂÆûÁé∞Êé•Âè£ÁöÑÂäüËÉΩÔºåÊàë‰ª¨ÂèàËØ•Â¶Ç‰ΩïÂêàÁêÜÁöÑÂ∞ÅË£Ö‰∏Ä‰∫õÊñ∞ÁöÑÂäüËÉΩËøõÊù•„ÄÇ<strong>Ëøô‰∏™ËøáÁ®ãÂíåÂÖ∂‰ªñÁöÑspringdataÊ°ÜÊû∂ÈÉΩÊòØÁ±ª‰ººÁöÑ</strong>„ÄÇ</p>
<p>‚Äã	È¶ñÂÖàÊâæÂà∞Ëøô‰∏™Á±ª</p>
<p><img src="/p/mongodb/images/image-20200602051144739.png"
	width="1522"
	height="691"
	
	loading="lazy"
	
		alt="image-20200602051144739"
	
	
		class="gallery-image" 
		data-flex-grow="220"
		data-flex-basis="528px"
	
></p>
<p>‚Äã	Èöè‰æøÊâæ‰∏™ÊñπÊ≥ïÔºåÊâæÂà∞ÂÆûÁé∞Á±ª</p>
<p><img src="/p/mongodb/images/image-20200602051235179.png"
	width="1260"
	height="540"
	
	loading="lazy"
	
		alt="image-20200602051235179"
	
	
		class="gallery-image" 
		data-flex-grow="233"
		data-flex-basis="560px"
	
></p>
<p>‚Äã		Ê≠£ÊòØËøô‰∏™SimpleMongoRepository</p>
<p><img src="/p/mongodb/images/image-20200602051323421.png"
	width="1276"
	height="684"
	
	loading="lazy"
	
		alt="image-20200602051323421"
	
	
		class="gallery-image" 
		data-flex-grow="186"
		data-flex-basis="447px"
	
></p>
<p>‚Äã		ÈÇ£‰πàËøô‰∏™ÂÆûÁé∞Á±ªÂèàÊòØÂ¶Ç‰ΩïÊ≥®ÂÜåÂà∞iocÂÆπÂô®ÁöÑÂë¢</p>
<p><img src="/p/mongodb/images/image-20200602051424984.png"
	width="1900"
	height="753"
	
	loading="lazy"
	
		alt="image-20200602051424984"
	
	
		class="gallery-image" 
		data-flex-grow="252"
		data-flex-basis="605px"
	
></p>
<p>‚Äã			ÈÄâÊã©Á¨¨‰∏Ä‰∏™ÔºåÊòØ‰∏™Â∑•ÂéÇÁ±ª</p>
<p><img src="/p/mongodb/images/image-20200602053416216.png"
	width="1314"
	height="686"
	
	loading="lazy"
	
		alt="image-20200602053416216"
	
	
		class="gallery-image" 
		data-flex-grow="191"
		data-flex-basis="459px"
	
></p>
<p>‚Äã			ÈÇ£‰πàËøô‰∏™Â∑•ÂéÇÁ±ªÂèàÊòØÂ¶Ç‰ΩïÂ∑•‰ΩúÁöÑÂë¢ÔºåÊàë‰ª¨ctrl+Â∑¶ÈîÆÁÇπÂáªÁ±ªÊü•Áúã</p>
<p><img src="/p/mongodb/images/image-20200602053520826.png"
	width="1886"
	height="212"
	
	loading="lazy"
	
		alt="image-20200602053520826"
	
	
		class="gallery-image" 
		data-flex-grow="889"
		data-flex-basis="2135px"
	
></p>
<p><img src="/p/mongodb/images/image-20200602053548030.png"
	width="1677"
	height="86"
	
	loading="lazy"
	
		alt="image-20200602053548030"
	
	
		class="gallery-image" 
		data-flex-grow="1950"
		data-flex-basis="4680px"
	
></p>
<p>‚Äã			ÂèëÁé∞ÈÖçÁΩÆÂà∞‰∫ÜÈÖçÁΩÆÊñá‰ª∂‰∏≠ÔºåÊàë‰ª¨ÂΩìÁÑ∂ÂèØ‰ª•‰ªøÁÖßÂÆÉÁöÑÊñπÂºè‰πüÂàõÂª∫‰∏Ä‰∏™ÈÖçÁΩÆÊñá‰ª∂Ôºå‰øùÂ≠òËá™ÂÆö‰πâÁöÑÂ∑•ÂéÇÁ±ªÔºåÊàñËÄÖ‰ΩøÁî®@EnableMongoRepositoriesÊ≥®Ëß£Êõ¥Âä†Êñπ‰æø‰∏Ä‰∫õÔºåÁªèËøáÊàë‰ª¨ÁöÑÊü•ÁúãÔºåÊé•‰∏ãÊù•Ë¶ÅÂÅöÁöÑ‰∫ãÂæàÊ∏ÖÊ•ö‰∫ÜÔºö</p>
<ol>
<li>
<p>ÂàõÂª∫Êé•Âè£Â∞ÅË£ÖËá™ÂÆö‰πâÁöÑÊñπÊ≥ïÔºåÊúÄÂ•ΩÂ∞ÜÊé•Âè£ÂàÜÂºÄÔºåÊØîÂ¶ÇÂàÜÈ°µÁöÑÂçïÁã¨Êîæ‰∏Ä‰∏™Êé•Âè£ÔºåËÅöÂêàÊü•ËØ¢ÂçïÁã¨Êîæ‰∏Ä‰∏™Êé•Âè£ÔºåÂü∫Êú¨ÁöÑÂ¢ûÂà†Êîπ‰πüÂçïÁã¨Êîæ‰∏Ä‰∏™Êé•Âè£</p>
</li>
<li>
<p>ÂàõÂª∫‰∏Ä‰∏™Êé•Âè£ÁªßÊâøÊâÄÊúâÂàõÂª∫ÁöÑÊé•Âè£ÂåÖÊã¨MongoRepository</p>
</li>
<li>
<p>ÂàõÂª∫ËØ•Êé•Âè£ÁöÑÂÆûÁé∞Á±ª</p>
</li>
<li>
<p>Âú®ÂêØÂä®Á±ª‰∏äÊ∑ªÂä†@EnableMongoRepositoriesÊ≥®Ëß£ÔºåÂπ∂Â∞ÜÊàë‰ª¨ÁöÑÂÆûÁé∞Á±ªÈÖçÁΩÆËøõÊù•</p>
<p>‚Äã		ÂºÄÂßãÂä®ÊâãÂêßÔºö</p>
</li>
</ol>
<p>1.ÂàõÂª∫HMMongoRepository,‰ª•ÂêéËøô‰∏™Êé•Âè£Â∞±ÊòØÊàë‰ª¨Ë¶ÅÂÆûÁé∞ÁöÑÊé•Âè£</p>
<pre><code class="language-java">public interface HMMongoRepository&lt;T, ID extends Serializable&gt;{

}

</code></pre>
<p>2.ÂàõÂª∫ËØ•Êé•Âè£ÁöÑÂÆûÁé∞Á±ª</p>
<pre><code class="language-java">public class HMMongoRespositoryImpl&lt;T, ID extends Serializable&gt; extends SimpleMongoRepository&lt;T, ID&gt; implements HMMongoRepository&lt;T,ID&gt; {

    private final MongoOperations mongoOperations;
    private final MongoEntityInformation&lt;T, ID&gt; entityInformation;
    /**
     * Creates a new {@link SimpleMongoRepository} for the given {@link MongoEntityInformation} and {@link MongoTemplate}.
     *
     * @param metadata        must not be {@literal null}.
     * @param mongoOperations must not be {@literal null}.
     */
    public HMMongoRespositoryImpl(MongoEntityInformation&lt;T, ID&gt; metadata, MongoOperations mongoOperations) {
        super(metadata, mongoOperations);
        this.entityInformation = metadata;
        this.mongoOperations = mongoOperations;
    }
}

</code></pre>
<h4 id="32-Â∞ÜÊàë‰ª¨Ëá™Â∑±ÂÆûÁé∞ÁöÑ‰øÆÊîπÂäüËÉΩÂ∞ÅË£ÖËøõÊ°ÜÊû∂">3.2 Â∞ÜÊàë‰ª¨Ëá™Â∑±ÂÆûÁé∞ÁöÑ‰øÆÊîπÂäüËÉΩÂ∞ÅË£ÖËøõÊ°ÜÊû∂
</h4><p>ÂàõÂª∫Êé•Âè£</p>
<pre><code class="language-java">public interface BaseMongoRepository&lt;T,TD&gt;  extends MongoRepository&lt;T,TD&gt; {
    public int upsert(Query query, Update update);
    public int update(T t);
}


</code></pre>
<p>Â∞ÜÊé•Âè£Ê∑ªÂä†Âà∞HMMongoRepositoryÁªßÊâøÂàóË°®‰∏≠</p>
<pre><code class="language-java">public interface HMMongoRepository&lt;T, ID extends Serializable&gt; extends MongoRepository&lt;T, ID&gt;,BaseMongoRepository&lt;T,ID&gt; {

}

</code></pre>
<p>Ê∑ªÂä†ÂÆûÁé∞</p>
<pre><code class="language-java"> @Override
    public int upsert(Query query, Update update) {
        return (int) mongoTemplate.upsert(query, update, entityClass).getModifiedCount();
    }

    @Override
    public int update(T t) {
        Query query = new Query();
        query.addCriteria(new Criteria(&quot;_id&quot;).is(entityInformation.getId(t)));
        Update update = MongoUpdateUtils.attrUpdateByBean(t);
        return (int)mongoOperations.updateFirst(query,update,entityInformation.getCollectionName()).getModifiedCount();
    }

</code></pre>
<h4 id="33-Â∞ÅË£ÖÂàÜÈ°µÊü•ËØ¢ÂäüËÉΩ">3.3 Â∞ÅË£ÖÂàÜÈ°µÊü•ËØ¢ÂäüËÉΩ
</h4><p>Â∞ÅË£Ö‰∏Ä‰∏™PageÊé•Âè£</p>
<pre><code class="language-java">public interface Page&lt;T&gt; {
    
    Page getInstance(int total, int current, int size, List&lt;T&gt; list);
}

</code></pre>
<p>Â∞ÅË£Ö‰∏Ä‰∏™ÂàÜÈ°µÊé•Âè£</p>
<pre><code class="language-java">public interface PageMongoRespository&lt;T,TD&gt; {

    public long count(@Nullable Query query);

    public Page&lt;T&gt; findPage(Query query, int current, int size, @Nullable Sort sort, Page&lt;T&gt; page);
}

</code></pre>
<p>Ê∑ªÂä†Âà∞HMMongoRepositoryÁªßÊâøÂàóË°®‰∏≠,ÂÆûÁé∞ËØ•ÊñπÊ≥ï</p>
<pre><code class="language-java"> @Override
    public long count(@Nullable Query query) {
        if (query == null) query = new Query();
        return mongoOperations.count(query, entityInformation.getJavaType());
    }

    @Override
    public Page&lt;T&gt; findPage(Query query, int current, int size, @Nullable Sort sort, Page&lt;T&gt; page) {
        long total = count(query);
        int offset = (current- 1)*size;
        List&lt;T&gt; list = mongoOperations.find(query.with(sort).limit(size).skip(offset), entityInformation.getJavaType(), entityInformation.getCollectionName());
        return page.getInstance((int) total, current, size, list);
    }

</code></pre>
<h4 id="34-Â∞ÅË£ÖËÅöÂêàÊü•ËØ¢ÂäüËÉΩ">3.4 Â∞ÅË£ÖËÅöÂêàÊü•ËØ¢ÂäüËÉΩ
</h4><h5 id="341-ÁÆ°ÈÅìÊü•ËØ¢">3.4.1 ÁÆ°ÈÅìÊü•ËØ¢
</h5><p>Êé•Âè£</p>
<pre><code class="language-java">public interface AggregationOperationMongoDao&lt;T,TD&gt; {

    public List&lt;T&gt; findAggregationOperation(List&lt;AggregationOperation&gt; aggregationOperationList);
}

</code></pre>
<p>ÂÆûÁé∞</p>
<pre><code class="language-java">@Override
    public List&lt;T&gt; findAggregationOperation(List&lt;AggregationOperation&gt; aggregationOperationList) {
        Aggregation aggregation = Aggregation.newAggregation(aggregationOperationList);
        AggregationResults&lt;T&gt; outputType = mongoOperations.aggregate(aggregation,entityInformation.getCollectionName(), entityInformation.getJavaType());
        List&lt;T&gt; resultList = new ArrayList&lt;&gt;();
        Iterator&lt;T&gt; iterator = outputType.iterator();
        while (iterator.hasNext()) {
            resultList.add(iterator.next());
        }
        return resultList;
    }

</code></pre>
<h3 id="4Â∞èÁªì-4">4.Â∞èÁªì
</h3><h1 id="Á¨¨‰∏âÁ´†-ËÅöÂêàÊü•ËØ¢">Á¨¨‰∏âÁ´† ËÅöÂêàÊü•ËØ¢
</h1><h2 id="0-mysqlÁ±ªÊØî">0. mysqlÁ±ªÊØî
</h2><p><img src="/p/mongodb/images/image-20211127171238134.png"
	width="484"
	height="633"
	
	loading="lazy"
	
		alt="image-20211127171238134"
	
	
		class="gallery-image" 
		data-flex-grow="76"
		data-flex-basis="183px"
	
></p>
<h2 id="1-ËÅöÂêàÁÆ°ÈÅìÊìç‰ΩúÁ¨¶">1. ËÅöÂêàÁÆ°ÈÅìÊìç‰ΩúÁ¨¶
</h2><p>pipeline &ndash; stageÁßçÁ±ª</p>
<p>$count , $group,  $match, $project, $unwind, $limit, $skip, $sort, $sortByCount, $lookup, $out, $addFields</p>
<h3 id="11-count">1.1 $count
</h3><p>ËØ≠Ê≥ï</p>
<pre><code>{ $count: &lt;string&gt; }

</code></pre>
<p>Á§∫‰æã</p>
<pre><code>db.collection.aggregate( [
   { $group: { _id: null, myCount: { $sum: 1 } } }, #ËøôÈáåmyCountËá™ÂÆö‰πâÔºåÁõ∏ÂΩì‰∫émysqlÁöÑselect count(*) as myCount
   { $project: { _id: 0 } }  # ËøîÂõû‰∏çÊòæÁ§∫_idÂ≠óÊÆµ
] )

</code></pre>
<h3 id="12--group">1.2  $group
</h3><p>ÊåáÂÆöÁöÑË°®ËææÂºèÂØπÊñáÊ°£ËøõË°åÂàÜÁªÑÔºåÂπ∂Â∞ÜÊØè‰∏™‰∏çÂêåÂàÜÁªÑÁöÑÊñáÊ°£ËæìÂá∫Âà∞‰∏ã‰∏Ä‰∏™Èò∂ÊÆµ,$group‰∏ç‰ºöËæìÂá∫ÂÖ∑‰ΩìÁöÑÊñáÊ°£ËÄåÂè™ÊòØÁªüËÆ°‰ø°ÊÅØ„ÄÇ</p>
<p>accumulatorÊìç‰ΩúÁ¨¶</p>
<p><img src="/p/mongodb/images/image-20211129134924122.png"
	width="913"
	height="572"
	
	loading="lazy"
	
		alt="image-20211129134924122"
	
	
		class="gallery-image" 
		data-flex-grow="159"
		data-flex-basis="383px"
	
></p>
<p>ËØ≠Ê≥ï</p>
<pre><code>{ $group: { _id: &lt;expression&gt;, &lt;field1&gt;: { &lt;accumulator1&gt; : &lt;expression1&gt; }, ... } }

</code></pre>
<ul>
<li>_idÂ≠óÊÆµÊòØÂøÖÂ°´ÁöÑ;‰ΩÜÊòØÔºåÂèØ‰ª•ÊåáÂÆö_idÂÄº‰∏∫nullÊù•‰∏∫Êï¥‰∏™ËæìÂÖ•ÊñáÊ°£ËÆ°ÁÆóÁ¥ØËÆ°ÂÄº„ÄÇ</li>
<li>Ââ©‰ΩôÁöÑËÆ°ÁÆóÂ≠óÊÆµÊòØÂèØÈÄâÁöÑÔºåÂπ∂‰ΩøÁî®<accumulator>ËøêÁÆóÁ¨¶ËøõË°åËÆ°ÁÆó„ÄÇ</li>
<li>_idÂíå<accumulator>Ë°®ËææÂºèÂèØ‰ª•Êé•Âèó‰ªª‰ΩïÊúâÊïàÁöÑ<a class="link" href="https://docs.mongodb.com/manual/meta/aggregation-quick-reference/#aggregation-expressions"  target="_blank" rel="noopener"
    >Ë°®ËææÂºè</a>„ÄÇ</li>
</ul>
<p>Êü•ËØ¢distinct values</p>
<h3 id="13-match">1.3 $match
</h3><p>ËØ≠Ê≥ï</p>
<pre><code>{ $match: { &lt;query&gt; } }

</code></pre>
<p><strong>Âú®ÂÆûÈôÖÂ∫îÁî®‰∏≠Â∞ΩÂèØËÉΩÂ∞Ü$matchÊîæÂú®ÁÆ°ÈÅìÁöÑÂâçÈù¢‰ΩçÁΩÆ</strong>„ÄÇËøôÊ†∑Êúâ‰∏§‰∏™Â•ΩÂ§ÑÔºö</p>
<p>‰∏ÄÊòØÂèØ‰ª•Âø´ÈÄüÂ∞Ü‰∏çÈúÄË¶ÅÁöÑÊñáÊ°£ËøáÊª§ÊéâÔºå‰ª•<strong>ÂáèÂ∞ëÁÆ°ÈÅìÁöÑÂ∑•‰ΩúÈáè</strong>Ôºõ</p>
<p>‰∫åÊòØÂ¶ÇÊûúÂÜçÊäïÂ∞ÑÂíåÂàÜÁªÑ‰πãÂâçÊâßË°å$matchÔºå<strong>Êü•ËØ¢ÂèØ‰ª•‰ΩøÁî®Á¥¢Âºï</strong>„ÄÇ</p>
<ul>
<li>‰∏çËÉΩÂú®$ matchÊü•ËØ¢‰∏≠‰ΩøÁî®$‰Ωú‰∏∫ËÅöÂêàÁÆ°ÈÅìÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇ</li>
<li>Ë¶ÅÂú®$matchÈò∂ÊÆµ‰ΩøÁî®$textÔºå$matchÈò∂ÊÆµÂøÖÈ°ªÊòØÁÆ°ÈÅìÁöÑÁ¨¨‰∏ÄÈò∂ÊÆµ„ÄÇ</li>
<li>ËßÜÂõæ‰∏çÊîØÊåÅÊñáÊú¨ÊêúÁ¥¢„ÄÇ</li>
</ul>
<h3 id="14-unwind">1.4 $unwind
</h3><p>ÁÆÄÂçïËØ¥Â∞±ÊòØ ÂèØ‰ª•Â∞ÜÊï∞ÁªÑÊãÜÂàÜ‰∏∫ÂçïÁã¨ÁöÑÊñáÊ°£„ÄÇ</p>
<p>‰ΩøÁî®ËØ≠Ê≥ï</p>
<pre><code>{
  $unwind:
    {
      path: &lt;field path&gt;,
      includeArrayIndex: &lt;string&gt;,  #ÂèØÈÄâ,‰∏Ä‰∏™Êñ∞Â≠óÊÆµÁöÑÂêçÁß∞Áî®‰∫éÂ≠òÊîæÂÖÉÁ¥†ÁöÑÊï∞ÁªÑÁ¥¢Âºï„ÄÇËØ•ÂêçÁß∞‰∏çËÉΩ‰ª•$ÂºÄÂ§¥„ÄÇ
      preserveNullAndEmptyArrays: &lt;boolean&gt; #ÂèØÈÄâÔºådefault :falseÔºåËã•‰∏∫true,Â¶ÇÊûúË∑ØÂæÑ‰∏∫Á©∫ÔºåÁº∫Â∞ëÊàñ‰∏∫Á©∫Êï∞ÁªÑÔºåÂàô$unwindËæìÂá∫ÊñáÊ°£
  } 
}

</code></pre>
<h3 id="15-project">1.5 $project
</h3><p>==ÂèØ‰ª•Âà©Áî®Ôºå<code>$project</code> ÂØπËæìÂÖ•ÊñáÊ°£ËøõË°åÂÜçÊ¨°ÊäïÂΩ±==</p>
<h4 id="1-ËØ≠Ê≥ï">1. ËØ≠Ê≥ï
</h4><pre><code>{ $project: { &lt;specification(s)&gt; } }

</code></pre>
<blockquote>
<p>specificationsÊúâ‰ª•‰∏ãÂΩ¢ÂºèÔºö</p>
<p><field>: &lt;1 or true&gt;  ÊòØÂê¶ÂåÖÂê´ËØ•Â≠óÊÆµÔºåfield:1/0ÔºåË°®Á§∫ÈÄâÊã©/‰∏çÈÄâÊã© field</p>
<p>_id: &lt;0 or false&gt;    ÊòØÂê¶ÊåáÂÆö_idÂ≠óÊÆµ</p>
<p><field>: <expression> Ê∑ªÂä†Êñ∞Â≠óÊÆµÊàñÈáçÁΩÆÁé∞ÊúâÂ≠óÊÆµÁöÑÂÄº„ÄÇ Âú®ÁâàÊú¨3.6‰∏≠Êõ¥ÊîπÔºöMongoDB 3.6Ê∑ªÂä†ÂèòÈáèREMOVE„ÄÇÂ¶ÇÊûúË°®ËææÂºèÁöÑËÆ°ÁÆóÁªìÊûú‰∏∫$$REMOVEÔºåÂàôËØ•Â≠óÊÆµÂ∞ÜÊéíÈô§Âú®ËæìÂá∫‰∏≠</p>
</blockquote>
<h4 id="2-‰æãÂ≠ê">2. ‰æãÂ≠ê
</h4><pre><code class="language-sql">db.person.insert([
    {name:{firstName:'Jonathan', lastName:'Lee'}, age:18, book:{name:'Áé©ËΩ¨HTML', price: 88}},
    {name:{firstName:'Amelie', lastName:'BNTang'}, age:17, book:{name:'Áé©ËΩ¨JavaScript', price: 99}}
]);

db.person.find();

</code></pre>
<p><img src="/p/mongodb/images/image-20230113105322790.png"
	width="611"
	height="512"
	
	loading="lazy"
	
		alt="image-20230113105322790"
	
	
		class="gallery-image" 
		data-flex-grow="119"
		data-flex-basis="286px"
	
></p>
<pre><code class="language-sql">db.person.aggregate([
    {
        $project:{
            _id:0,
            clientName: '$name.firstName',
            clientAge: '$age'
        }
    }
]);

</code></pre>
<p><img src="/p/mongodb/images/image-20230113105505191.png"
	width="446"
	height="323"
	
	loading="lazy"
	
		alt="image-20230113105505191"
	
	
		class="gallery-image" 
		data-flex-grow="138"
		data-flex-basis="331px"
	
></p>
<h3 id="16-lookup">1.6 $lookup
</h3><p>Áõ∏ÂΩì‰∫é sql ÁöÑ left outer join</p>
<h2 id="2-findËØ¶Ëß£">2. findËØ¶Ëß£
</h2><div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>Êìç‰ΩúÁ¨¶</th>
          <th>Ê†ºÂºè</th>
          <th>ÂÆû‰æã</th>
          <th>‰∏é RDBMS where ËØ≠Âè•ÊØîËæÉ</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Á≠â‰∫éÔºà=Ôºâ</td>
          <td>{<key> : {<value>}}</td>
          <td>db.test.find( {price : 24} )</td>
          <td>where price = 24</td>
      </tr>
      <tr>
          <td>Â§ß‰∫éÔºà&gt;Ôºâ</td>
          <td>{<key> : {$gt : <value>}}</td>
          <td>db.test.find( {price : {$gt : 24}} )</td>
          <td>where price &gt; 24</td>
      </tr>
      <tr>
          <td>Â∞è‰∫éÔºà&lt;Ôºâ</td>
          <td>{<key> : {$lt : <value>}}</td>
          <td>db.test.find( {price : {$lt : 24}} )</td>
          <td>where price &lt; 24</td>
      </tr>
      <tr>
          <td>Â§ß‰∫éÁ≠â‰∫éÔºà&gt;=Ôºâ</td>
          <td>{<key> : {$gte : <value>}}</td>
          <td>db.test.find( {price : {$gte : 24}} )</td>
          <td>where price &gt;= 24</td>
      </tr>
      <tr>
          <td>Â∞è‰∫éÁ≠â‰∫éÔºà&lt;=Ôºâ</td>
          <td>{<key> : {$lte : <value>}}</td>
          <td>db.test.find( {price : {$lte : 24}} )</td>
          <td>where price &lt;= 24</td>
      </tr>
      <tr>
          <td>‰∏çÁ≠â‰∫éÔºà!=Ôºâ</td>
          <td>{<key> : {$ne : <value>}}</td>
          <td>db.test.find( {price : {$ne : 24}} )</td>
          <td>where price != 24</td>
      </tr>
      <tr>
          <td>‰∏éÔºàandÔºâ</td>
          <td>{key01 : value01, key02 : value02, &hellip;}</td>
          <td>db.test.find( {name : &ldquo;„ÄäMongoDB ÂÖ•Èó®ÊïôÁ®ã„Äã&rdquo;, price : 24} )</td>
          <td>where name = &ldquo;„ÄäMongoDB ÂÖ•Èó®ÊïôÁ®ã„Äã&rdquo; and price = 24</td>
      </tr>
      <tr>
          <td>ÊàñÔºàorÔºâ</td>
          <td>{$or : [{key01 : value01}, {key02 : value02}, &hellip;]}</td>
          <td>db.test.find( {$or:[{name : &ldquo;„ÄäMongoDB ÂÖ•Èó®ÊïôÁ®ã„Äã&rdquo;},{price : 24}]} )</td>
          <td>where name = &ldquo;„ÄäMongoDB ÂÖ•Èó®ÊïôÁ®ã„Äã&rdquo; or price = 24</td>
      </tr>
  </tbody>
</table></div>
<p>Êü•ËØ¢ÈÄªËæëÂØπÁÖßË°®</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>sql</th>
          <th>mql</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>a = 1 AND b = 1</td>
          <td>{a: 1, b: 1} Êàñ {$and : [{a:1},{b:1}]}</td>
      </tr>
      <tr>
          <td>a = 1OR b = 1</td>
          <td>{$or: [{a: 1},{b: 1}]}</td>
      </tr>
      <tr>
          <td>a is NULL</td>
          <td>{a: {$exists: false}}</td>
      </tr>
      <tr>
          <td>a IN (1, 2, 3)</td>
          <td>{a: {$in: [1, 2, 3] }}</td>
      </tr>
  </tbody>
</table></div>
<pre><code> db.test.find({age:null})

</code></pre>
<blockquote>
<p>Ê≠§ËØ≠Âè•‰∏ç‰ªÖÂåπÈÖçÂá∫ age ‰∏∫ null ÁöÑÊñáÊ°£ÔºåÂÖ∂‰ªñ‰∏çÂêåÁ±ªÂûãÁöÑÊñáÊ°£‰πü‰ºöË¢´Êü•Âá∫„ÄÇËøôÊòØÂõ†‰∏∫ null ‰∏ç‰ªÖ‰ºöÂåπÈÖçÊüê‰∏™ÈîÆÂÄº‰∏∫ null ÁöÑÊñáÊ°£ÔºåËÄå‰∏îËøò‰ºöÂåπÈÖç‰∏çÂåÖÂê´Ëøô‰∏™ÈîÆÁöÑÊñáÊ°£</p>
</blockquote>
<p>Êü•ËØ¢Êúâ‰∏â‰∏™ÂÖÉÁ¥†ÁöÑÊï∞ÁªÑ</p>
<pre><code> db.test.find(
{
    tags:{$size:3}
}
)

</code></pre>
<p>limiit()ÂáΩÊï∞‰∏éSQL‰∏≠ÁöÑ‰ΩúÁî®Áõ∏Âêå, Áî®‰∫éÈôêÂà∂Êü•ËØ¢ÁªìÊûúÁöÑ‰∏™Êï∞</p>
<pre><code>db.test.find().limit(3)

</code></pre>
<p>Skip() ÂáΩÊï∞Áî®‰∫éÁï•ËøáÊåáÂÆö‰∏™Êï∞ÁöÑÊñáÊ°£ÔºåÂ¶Ç‰∏ãËØ≠Âè•Áï•ËøáÁ¨¨‰∏Ä‰∏™ÊñáÊ°£ÔºåËøîÂõûÂêé‰∏§‰∏™Ôºö</p>
<pre><code> db.test.find(
{
    tags:{$size:3}
}
)

</code></pre>
<p>sort() ÂáΩÊï∞Áî®‰∫éÂØπÊü•ËØ¢ÁªìÊûúËøõË°åÊéíÂ∫èÔºå1 ÊòØÂçáÂ∫èÔºå-1 ÊòØÈôçÂ∫èÔºåÂ¶Ç‰∏ãËØ≠Âè•ÂèØÂ∞ÜÊü•ËØ¢ÁªìÊûúÂçáÂ∫èÊòæÁ§∫</p>
<pre><code>db.test.find().sort({&quot;price&quot; : 1})

</code></pre>
<h2 id="3-Ê∏∏Ê†á">3. Ê∏∏Ê†á
</h2><h2 id="4-Êï∞ÁªÑÊìç‰Ωú">4. Êï∞ÁªÑÊìç‰Ωú
</h2><p>$all, $size, $slice, $elemMatch</p>
<h3 id="41-all">4.1 $all
</h3><p>Êü•ÊâæÊï∞ÁªÑ‰∏≠ÂåÖÂê´ÊåáÂÆöÂÄºÁöÑÊñáÊ°£</p>
<p>ËØ≠Ê≥ï</p>
<pre><code>{filed: {
	$all: [
		&lt;value1&gt;,
		&lt;value2&gt;
	]
}}

</code></pre>
<pre><code>db.orders.find(
{
	&quot;books&quot;:{$all:[&quot;java&quot;, &quot;mongodb&quot;]}
}
)

</code></pre>
<h3 id="42-size">4.2 $size
</h3><p>Êü•ÊâæÊï∞ÁªÑ‰ª£ÈîÄÁ≠â‰∫éÊåáÂÆöÂÄºÁöÑÊñáÊ°£</p>
<p>ËØ≠Ê≥ï</p>
<pre><code>{filed: {
	$size: number
}}

</code></pre>
<h3 id="43-slice">4.3 $slice
</h3><p>Êü•ËØ¢Êï∞ÁªÑ‰∏≠ÊåáÂÆöËøîÂõûÂÖÉÁ¥†ÁöÑ‰∏™Êï∞</p>
<p>ËØ≠Ê≥ï</p>
<pre><code>db.collect.find(
{},filed:{$slice:number}
)

db.collect.find(
{},
{field:{
	$slice:[
		number1,
		number2
	]
}})

</code></pre>
<p>numberËØ¥Êòé</p>
<blockquote>
<p>‰∏∫Ê≠£Êï∞Ë°®Á§∫ËøîÂõûÂâçÈù¢ÊåáÂÆöÁöÑÂÄºÁöÑ‰∏™Êï∞, ‰æãÂ¶Ç‰∏∫1, ËøîÂõûÊï∞ÁªÑÁ¨¨‰∏Ä‰∏™</p>
<p>‰∏∫Ë¥üÊï∞, ‰æãÂ¶Ç‰∏∫-1, ËøîÂõûÊï∞ÁªÑÂÄíÊï∞Á¨¨‰∏Ä‰∏™</p>
</blockquote>
<h3 id="44-elemmatch">4.4 $elemMatch
</h3><p>Êï∞ÁªÑÂÖÉÁ¥†Êìç‰ΩúÁ¨¶</p>
<pre><code>‰ΩúÁî®ÔºöÊï∞ÁªÑÂÄº‰∏≠Ëá≥Â∞ë‰∏Ä‰∏™ÂÖÉÁ¥†Êª°Ë∂≥ÊâÄÊúâÊåáÂÆöÁöÑÂåπÈÖçÊù°‰ª∂
		ËØ≠Ê≥ïÔºö  { &lt;field&gt;: { $elemMatch: { &lt;query1&gt;, &lt;query2&gt;, ... } } }
		ËØ¥ÊòéÔºö  Â¶ÇÊûúÊü•ËØ¢‰∏∫ÂçïÂÄºÊü•ËØ¢Êù°‰ª∂ÔºåÂç≥Âè™Êúâ&lt;query1&gt;ÔºåÂàôÊó†ÈúÄÊåáÂÆö$elemMatch

</code></pre>
<p>ÊêúÁ¥¢Â≠êÂØπË±°ÁöÑÂ§ö‰∏™Â≠óÊÆµÊó∂, Â¶ÇÊûú‰ΩøÁî®$elemMatch, ÂÆÉË°®Á§∫ÂøÖÈ°ªÊòØÂêå‰∏Ä‰∏™Â≠êÂØπË±°Êª°Ë∂≥Â§ö‰∏™Êù°‰ª∂</p>
<h2 id="50-mongodb-compass">5.0 mongodb compass
</h2><p><a class="link" href="https://blog.csdn.net/jamin_liu_90/article/details/88017013"  target="_blank" rel="noopener"
    >https://blog.csdn.net/jamin_liu_90/article/details/88017013</a></p>
<h2 id="60-ËÅöÂêàÊÄßËÉΩÂàÜÊûê">6.0 ËÅöÂêàÊÄßËÉΩÂàÜÊûê
</h2><pre><code>db.report.explain().aggregate()

</code></pre>
<pre><code>/* 1 */
{
    &quot;stages&quot; : [ 
        {
            &quot;$cursor&quot; : {
                &quot;query&quot; : {
                    &quot;formId&quot; : 5.0,
                    &quot;userId&quot; : 1.0
                },
                &quot;fields&quot; : {
                    &quot;answers&quot; : 1,
                    &quot;formId&quot; : 1,
                    &quot;userId&quot; : 1,
                    &quot;_id&quot; : 1
                },
                &quot;queryPlanner&quot; : {
                    &quot;plannerVersion&quot; : 1,
                    &quot;namespace&quot; : &quot;form.report&quot;,
                    &quot;indexFilterSet&quot; : false,
                    &quot;parsedQuery&quot; : {
                        &quot;$and&quot; : [ 
                            {
                                &quot;formId&quot; : {
                                    &quot;$eq&quot; : 5.0
                                }
                            }, 
                            {
                                &quot;userId&quot; : {
                                    &quot;$eq&quot; : 1.0
                                }
                            }
                        ]
                    },
                    &quot;queryHash&quot; : &quot;8046B318&quot;,
                    &quot;planCacheKey&quot; : &quot;8046B318&quot;,
                    &quot;winningPlan&quot; : {
                        &quot;stage&quot; : &quot;COLLSCAN&quot;,
                        // Êü•ËØ¢ÊñπÂºèÔºåÂ∏∏ËßÅÁöÑÊúâCOLLSCAN/ÂÖ®Ë°®Êâ´Êèè„ÄÅIXSCAN/Á¥¢ÂºïÊâ´Êèè„ÄÅ FETCH/Ê†πÊçÆÁ¥¢ÂºïÂéªÊ£ÄÁ¥¢ÊñáÊ°£„ÄÅSHARD_MERGE/ÂêàÂπ∂ÂàÜÁâáÁªìÊûú„ÄÅIDHACK/ÈíàÂØπ_idËøõË°åÊü•ËØ¢
                        &quot;filter&quot; : {
                            &quot;$and&quot; : [ 
                                {
                                    &quot;formId&quot; : {
                                        &quot;$eq&quot; : 5.0
                                    }
                                }, 
                                {
                                    &quot;userId&quot; : {
                                        &quot;$eq&quot; : 1.0
                                    }
                                }
                            ]
                        },
                        &quot;direction&quot; : &quot;forward&quot;
                    },
                    &quot;rejectedPlans&quot; : []
                }
            }
        }, 
        {
            &quot;$unwind&quot; : {
                &quot;path&quot; : &quot;$answers&quot;
            }
        }, 
        {
            &quot;$match&quot; : {
                &quot;answers.id&quot; : {
                    &quot;$eq&quot; : 64.0
                }
            }
        }, 
        {
            &quot;$unwind&quot; : {
                &quot;path&quot; : &quot;$answers.contents&quot;
            }
        }, 
        {
            &quot;$sort&quot; : {
                &quot;sortKey&quot; : {
                    &quot;answers.contents.reportTime&quot; : -1
                },
                &quot;limit&quot; : NumberLong(1)
            }
        }, 
        {
            &quot;$project&quot; : {
                &quot;_id&quot; : true,
                &quot;formId&quot; : true,
                &quot;userId&quot; : true,
                &quot;answers&quot; : {
                    &quot;id&quot; : true,
                    &quot;contents&quot; : {
                        &quot;reportTime&quot; : true
                    }
                }
            }
        }
    ],
    &quot;ok&quot; : 1.0
}

</code></pre>
<p>ÂèÇÊï∞Ëß£Èáä</p>
<h2 id="ÂÆûË∑µ">ÂÆûË∑µ
</h2><pre><code>db.report.aggregate([
{
    $match:{
        formId:5,
        userId:1
    }
},
{
    $unwind:{
        path:&quot;$answers&quot;
    }   
}, 
{
    $match: {
        &quot;answers.id&quot;: 1
    }
},
{
    $project: {
        answers: 1
    }
},
{
    $unwind: {
        path: &quot;$answers.contents&quot;
    }
}
])

</code></pre>
<h1 id="Á¨¨ÂõõÁ´†-ÊñáÊ°£ËÆæËÆ°">Á¨¨ÂõõÁ´† ÊñáÊ°£ËÆæËÆ°
</h1><p>Ê≥®ÊÑè: mongodb ËÅöÂêàÁÆ°ÈÅì‰∏≠ÁöÑÊï∞ÊçÆ‰∏çËÉΩË∂ÖËøá 16mb</p>
<h1 id="Ê∑±Êã∑Ë¥ù">Ê∑±Êã∑Ë¥ù
</h1><pre><code>public Object deepClone() throws Exception {
    Object cloneObj = null;
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    ObjectOutputStream obs = new ObjectOutputStream(out);
    obs.writeObject(this);
    obs.close();

    ByteArrayInputStream ios = new ByteArrayInputStream(out.toByteArray());
    ObjectInputStream ois = new ObjectInputStream(ios);
    cloneObj = ois.readObject();
    return cloneObj;
}

</code></pre>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/mongodb/">MongoDb</a>
        
            <a href="/tags/nosql/">Nosql</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

     
    
        
    <div class="disqus-container">
    <div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "hugo-theme-stack" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

<style>
    .disqus-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
</style>

<script>
    window.addEventListener('onColorSchemeChange', (e) => {
        if (typeof DISQUS == 'object') {
            DISQUS.reset({
                reload: true
            });
        }
    })
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2019 - 
        
        2025 LexqinMike
    </section>
    
    <section class="powerby">
        
            ‰Ω†Ê∞∏Ëøú‰∏çÁü•ÈÅìÔºåÊàëÁöÑ‰ª£Á†ÅÈáåËóè‰∫ÜÂ§öÂ∞ëÊïÖ‰∫ã„ÄÇ <br/>
        ‰ΩøÁî® <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> ÊûÑÂª∫ <br />
        ‰∏ªÈ¢ò <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.29.0">Stack</a></b> Áî± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> ËÆæËÆ°
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>
<div id="particles-js"></div>

<script src=https://mikeLing-qx.github.io/background/particles.min.js></script>
<script>
  particlesJS.load('particles-js', "https://mikeLing-qx.github.io/background/particlesjs-config.json", function() {
    console.log('particles.js loaded - callback');
  });
</script>

<style>
  #particles-js {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    z-index: -1;
  }
</style>

<style>
  body {
    background: url(https://mikeLing-qx.github.io/background/background-01.png) no-repeat center top;
    background-size: cover;
    background-attachment: fixed;
  }
</style>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/go.min.js"></script>
		<script>hljs.highlightAll();</script>
    </body>
</html>
